% Set builder notation (usage: `\set{a | P(a)}` or `\set[\big]{1, 2}`)
\usepackage{xparse}
\usepackage{ifthen}

\renewcommand{\op}[1]{{\operatorname{#1}}}

\usepackage{mathtools}
\DeclarePairedDelimiterX{\setdelim}[1]{\{}{\}}{\setargs{#1}}
\DeclarePairedDelimiterX{\dblsetdelim}[1]{\{\!\{}{\}\!\}}{\setargs{#1}}
\NewDocumentCommand{\setargs}{>{\SplitArgument{1}{|}}m}{\setargsaux#1}
\NewDocumentCommand{\setargsaux}{mm}{\IfNoValueTF{#2}{#1}{#1\nonscript\:\delimsize\vert\allowbreak\nonscript\:\mathopen{}#2}}%
\newcommand{\set}[2][*]{\ifthenelse{\equal{\detokenize{#1}}{*}}{\setdelim*{#2}}{\setdelim[#1]{#2}}}
\newcommand{\dblset}[2][*]{\ifthenelse{\equal{\detokenize{#1}}{*}}{\dblsetdelim*{#2}}{\setdelim[#1]{#2}}}


% basis vectors
% \newcommand{\vb}[1]{\symbfit{#1}}
\newcommand{\ve}{\vb{e}}
\newcommand{\vg}{\vb{Œ≥}}
\newcommand{\vs}{\vec{œÉ}}

\newcommand{\spanof}{\op{span}\set}

% special structures
\newcommand{\manif}{\mathcal}	% manifold
\newcommand{\cat}{\mathbf}	% category
\newcommand{\liealg}{\mathfrak}	% Lie algebra
\newcommand{\lin}{\mathrm}	% linear map
\newcommand{\rotor}{\mathscr}	% geometric algebra rotors

% fields
\usepackage{dsfont}
\newcommand{\FF}{\mathds{F}}
\newcommand{\RR}{\mathds{R}}
\newcommand{\CC}{\mathds{C}}
\newcommand{\HH}{\mathds{H}}
\newcommand{\ZZ}{\mathds{Z}}
\newcommand{\NN}{\mathds{N}}

% groups
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\GL}{GL}

% quotient structure
\newcommand{\quot}[2]{\left. #1 \middle/ #2 \right.}

% generator
% \DeclarePairedDelimiter{\doubleangle}{‚ü®\!‚ü®}{‚ü©\!‚ü©}
\DeclarePairedDelimiter{\doubleangle}{\{\!\{}{\}\!\}}
\newcommand{\gen}{\dblset}

% transpose superscript
\newcommand{\trans}{^{\mkern-1.5mu\mathsf{T}}}

% geometric algebra
\newcommand{\grade}[2][]{\left‚ü® #2 \right‚ü©_{#1}}



% differential geometry
\newcommand{\TT}{\mathrm{T}}

% injection, surjection, bijection
\newcommand{\inject}{\hookrightarrow} % ‚Ü™Ô∏é
\newcommand{\surject}{\twoheadrightarrow} % ‚Ü†
\usepackage{trimclip}
\newcommand{\biject}{\mathrel{%
\mathrlap{\clipbox*{0 -1ex {0.5\width} {\height}}{$\inject$}}%
\surject}}

% fibre bundle A ‚Ü™Ô∏é B ‚Ü† C
\newcommand{\fibrebundle}[4][]{#2 \inject #3 \overset{#1}{\surject} #4}




% algebras
\newcommand{\TA}[2][]{{#2}^{‚äó#1}}
\usepackage{scalerel}
\newcommand{\EA}[1][\,]{\scalerel*{\wedge}{T}^{\!#1}}
\newcommand{\SA}[1][\,]{ùíÆ^{\!#1}}
\newcommand{\GA}[1][]{ùí¢_{#1}}

\newcommand{\forms}[1][]{\op{Œ©}^{#1}}
