\chapter{Connections on Fibre Bundles}
\label{cha:connections}

We have seen that it is more natural to describe physical fields in the language of fibre bundles rather than simply as maps into a fixed codomain.
However, with a field $f âˆˆ \secs(â„±)$ now formulated as a section of a fibre bundle, it no longer makes sense to directly compare values $f|_x$ at different points $x âˆˆ â„³$, since each value exists in its own fibre.
But the ability to compare across fibres is desirable, particularly because a notion of derivative requires comparing values across `infinitesimally neighbouring' fibres.
One way to accomplish this (at least for flowable objects) was the Lie derivative of \cref{sec:lieder}.
Another way which is applicable to any bundle is to introduce the additional structure of a \emph{connection}; this then defines the \emph{covariant derivative} of a section.

\begin{marginfigure}
	\includefigure[0.8\columnwidth]{path-dependence}
	\caption{Parallel transport of the northern vector depends on the path taken.}
\end{marginfigure}


A trivial example is the usual connection on (the tangent bundle of) Euclidean space.
There, tangent vectors at a base point may be \emph{parallel transported} (i.e., translated irrotationally) to any other base point in a well-defined, path-independent way.
This defines an isomorphism between every tangent space and tangent space at the origin, forming a connection on $\TT \RR^n$.

We may try to define connections on general fibre bundles in this way --- by choosing an isomorphism from every fibre to a single `reference' fibre.\sidenote{
	This is equivalent to choosing a trivialisation $â„± â†’ â„³ Ã— F$, or prescribing global coordinates on $â„±$.
}
But defining a connection like this is needlessly strict, and is of course impossible for non-trivial bundles.
(For example, $\TT \Sphere^2$ is non-trivial; there is no way of smoothly identifying its tangent spaces.)

Instead, it is sufficient to identify fibres \emph{locally}.
In other words, we need only prescribe how values can be compared over infinitesimal paths; from this we can compare any path-connected fibres.
A connection obtained this way is much more general: it accomodates non-trivial bundles and curved connections, where parallel transport may be path-dependent.
(For example, parallel transport on the sphere embedded in $\RR^3$ is path-dependent.)




% \section{Connections on General Fibre Bundles}
\subsubsection{On general fibre bundles: Ehresmann connections}


The most general kind of smooth bundle $â„±$ is one where the fibres have the minimal structure of a smooth manifold.
We will specify a connection by defining \emph{vertical} and \emph{horizontal motion} within the bulk of the bundle.

A point $p âˆˆ â„±$ in the bundle belongs to the fibre $F_{Ï€(p)}$ rooted at the base point $Ï€(p) âˆˆ â„³$.
If the point $p$ is moved \emph{within} its fibre, the base point remains fixed and the motion is said to be ``vertical''.
The tangent space $\TT_p F_{Ï€(p)}$ of the fibre (in isolation from the bulk) consists of those displacement vectors which define vertical motion.
Taken together, the vertical tangent spaces of all fibres form the \textdef{vertical bundle}. 
\begin{definition}
	The \textdef{vertical bundle} of a smooth fibre bundle $\fibrebundle F â„± â„³$ is a smooth $(\dim F)$-dimensional tangent subbundle $\VV â„± âŠ† \TT â„±$ defined by
	\begin{math}
		\VV_p â„± = \TT_p F_p
	\end{math}
	for each point $p âˆˆ â„±$.
\end{definition}


\begin{marginfigure}
	\includefigure{ehresmann-connection}
	\caption{
		Illustration of an Ehresmann connection.
	}
	\label{fig:ehresmann-connection}
\end{marginfigure}
On the other hand, a \textdef{connection} specifies how the value $p âˆˆ â„±$ changes when the base point $Ï€(p) âˆˆ â„³$ moves, if $p$ is to be considered to move ``horizontally'', i.e., if $p$ is to undergo parallel transport.
\begin{definition}
	A \textdef{horizontal bundle} or \textdef{(Ehresmann) connection} $H$ on a smooth fibre bundle $\fibrebundle F â„± â„³$ is a smooth $(\dim â„³)$-dimensional tangent subbundle $H âŠ† \TT â„±$ which is complementary to the vertical bundle $V âŠ† \TT â„±$, in the sense that
	\begin{math}
		\TT_p â„± = \VV_p â„± âŠ• H_p
	\end{math}
	for each point $p âˆˆ â„±$.
\end{definition}
Note that while the tangent and vertical bundles $\TT â„±$ and $\VV â„±$ are canonical constructions, the choice of a horizontal bundle $H$ is not canonical: there may be many distinct horizontal bundles, corresponding to different senses of ``parallel transport''.



The requirement that $H$ be complimentary to $\VV â„±$ implies $H_p âˆ© \VV_p â„± = \set{\symbf 0}$ at each $p âˆˆ â„±$.
This means the restriction of $\dd Ï€ : \TT_pâ„± \biject \TT_{Ï€(p)}â„³$ to $H_p âŠ† \TT_pâ„±$ is an isomorphism.\sidenote{
	Using the fact that $\ker \dd Ï€ = \VV â„±$, implying $\ker \dd Ï€|_{H_p} = {
	\symbf 0}$.
}
It therefore has an inverse,
\begin{align}
	\label{eqn:lift-of-base-tangent-vectors}
	\dd Ï€|_{H_p}^{-1} : \TT_{Ï€(p)}â„³ \biject H_p
,\end{align}
which acts to ``lift'' tangent vectors from the base into the horizontal subbundle at $p$.
This proves to be a useful construction:
\begin{definition}
	\label{def:connection-map}
	Let $\fibrebundle[Ï€] F â„± â„³$ be a fibre bundle with an Ehresmann connection $H âŠ† \TT â„±$.
	The \textdef{horizontal lift} to the point $p âˆˆ â„±$ is the linear map
	\begin{align}
	% 	Î“(p) &: \TT_{Ï€(p)} â„³ â†’ H_p
	% \\	Î“(p) &â‰” -\dd Ï€|_{H_p}^{-1}
		Î“(p) â‰” -\dd Ï€|_{H_p}^{-1}
		: \TT_{Ï€(p)} â„³ â†’ H_p
	.\end{align}
	Also define the horizontal lift of a section $f âˆˆ â„±$ at $x âˆˆ â„³$ by
	\begin{align}
	% 	Î“ : \secs(â„±) &â†’ \forms[1](â„³, H)
		Î“(f)|_x &â‰” -\dd Ï€|_{H_{f(x)}}^{-1}
	.\end{align}
\end{definition}
\begin{marginfigure}
	\includefigure{connection-map}
	\caption{
		The tangent vector $ğ’–$ at $x$ is lifted to the horizontal bulk vector $Î“_ğ’–(f)$ at the point $f(x)$.
	}
	\label{fig:connection-map}
\end{marginfigure}
The horizontal lift of a section $f$ is a horizontal-valued $1$-form $Î“(f) âˆˆ \forms[1](â„³, H)$ whose action on tangent vectors $ğ’–$ we may write as $Î“_ğ’–(f) â‰” Î“(f)(ğ’–)$.
This device is designed so that tangent vectors $ğ’–$ are `lifted' to horizontal bulk vectors $-Î“_ğ’–(f)$ located on the section $f$ (see \cref{fig:connection-map}).
`Lifted' means $-Î“_ğ’–(f)$ projects onto $ğ’–$, so that we have $-\dd Ï€ (Î“_ğ’–(f)) = ğ’–$.
The minus sign is present to later align with the convention that a plus sign is present in the covariant derivative of a vector section.\sidenote{
	E.g., ``$âˆ‡_Î¼ X^a = âˆ‚_Î¼ X^a + Î“_Î¼{}^a{}_b X^b$''.
} 




\section{Parallel Transportation}

With a connection $H âŠ† \TT â„±$ defined on a bundle, a bulk value may be moved between fibres so that the motion is always horizontal with respect to the connection.
This is called \textdef{parallel transportation} of the value along a path.

More precisely, a path $Î³ : [0, 1] â†’ â„³$ representing the motion of a value $p_0 âˆˆ â„±$ from $Î³(0) = Ï€(p_0)$ can be \textdef{lifted} to a unique horizontal path $p_Î³ : [0, 1] â†’ â„±$ in the bulk.
This path is `above' $Î³$ in the sense that $Ï€(p_Î³(Î»)) = Î³(Î»)$, and `horizontal' in the sense that $\dd p_Î³(Î») âˆˆ H_{p_Î³(Î»)}$ (see \cref{fig:lifted-path}).
% In other words, $p_Î³$ is a one-dimensional integral manifold of the connection $H$ restricted to the `wall' $Ï€^{-1}(Î³) âŠ‚ â„±$.
In other words, $p_Î³$ is an integral curve of the connection along $Î³$ through $p_0$.

It is useful to describe this path--lifting process as an operator, associating fibre-mappings to each path in $â„³$.
\begin{definition}
	\label{def:transport-operator}
	If $Î³ : [0, 1] â†’ â„³$ is a path, then the \textdef{transport operator} $\trans_Î³ : F_{Î³(0)} â†’ F_{Î³(1)}$ is defined by
	\begin{math}
		\trans_Î³ p = p_Î³(1)
	\end{math}
	for any point $p âˆˆ F_{Î³(0)}$ where $p_Î³ : [0, 1] â†’ â„±$ is the lifted path satisfying
	\begin{align}
		\label{eqn:transport-operator-path-conds}
		Ï€(p_Î³(Î»)) = Î³(Î»)
		\qqtext{and}
		\dd p_Î³(Î») âˆˆ H_{p_Î³(Î»)}
	\end{align}
	for all $Î» âˆˆ [0, 1]$.
\end{definition}

\begin{marginfigure}
	\includefigure{lifted-path}
	\caption{
		The point $p_0$ parallel transported along a path $Î³$, giving the lifted path $p_Î»$.
	}
	\label{fig:lifted-path}
\end{marginfigure}

The transport operator is invariant under path reparametrisation, since any path $Î³'(Î») = Î³(f(Î»))$ where $f : [0, 1] â†’ [0, 1]$ is smooth also satisfies \cref{eqn:transport-operator-path-conds} if $Î³$ does.
Furthermore, the transport operator respects path concatenation $Î³_2 * Î³_1$ and inversion,
\begin{align}
	\trans_{Î³^{-1}} &= \trans_Î³{}^{-1}
,&	\trans_{Î³_2*Î³_1} &= \trans_{Î³_2} \circ \trans_{Î³_1}
.\end{align}
% This makes the transport operator a homomorphism from the groupoid of directed paths\sidenote{where the partially-defined group operation is path concatenation} (modulo reparametrisation) into the groupoid of fibre isomorphisms.



Parallel transport along a path involves `integrating' the connection; and conversely, the `derivative' of the transport operator is the horizontal lift, in a way made precise in the following lemma.
\begin{lemma}
	\label{lem:trans-ode}
	The transport operator along a path $Î³$ satisfies the ordinary differential equation
	\begin{align}
		\label{eqn:trans-ode}
		\dv{Î»} \trans_{Î³(Î» â† 0)} = -Î“_{\vb{\dot Î³}(Î»)} \circ \!\trans_{Î³(Î» â† 0)}
	,\end{align}
	where $Î³(Î» â† 0)$ denotes the sub-path of $Î³$ from $Î³(0)$ to $Î³(Î»)$.
\end{lemma}
\begin{proof}
	If $p âˆˆ F_{Î³(0)}$ then we have
	\begin{math}
		\trans_{Î³(Î» â† 0)} p = p_Î³(Î»)
	\end{math}
	where $p_Î³$ is the lift of $Î³$ through $p$, satisfying the conditions in \cref{def:transport-operator}.
	Differentiating with respect to $Î»$,
	\begin{align}
		\label{eqn:trans-ode-working.1}
		\dv{Î»} \trans_{Î³(Î» â† 0)} p = \dd p_Î³(Î») âˆˆ H_{p_Î³(Î»)}
	,\end{align}
	which is the horizontal by \cref{eqn:transport-operator-path-conds}.
	Additionally, from $Ï€ \circ p_Î³ = Î³$ we have $\dd Ï€ \circ \dd p_Î³ = \dd Î³$.
	Thus, we see that $\dd p_Î³(Î»)$ is horizontal lift of $\dd Î³(Î»)$ to the point $p_Î³(Î»)$,
	\begin{align}
		\label{eqn:trans-ode-working.2}
		\dd p_Î³(Î»)
		= \dd Ï€|_{H_{p_Î³(Î»)}}^{-1}(\dd Î³(Î»))
		= -Î“_{\vb{\dot Î³}(Î»)}(p_Î³(Î»))
	.\end{align}
	Finally, since
	\begin{math}
		p_Î³(Î») = \trans_{Î³(Î» â† 0)} p
	\end{math},
	combining \cref{eqn:trans-ode-working.1,eqn:trans-ode-working.2} we have the result.
\end{proof}

% For a linear bundle (introduced in \cref{sec:vector-bundles}) the composition in \cref{eqn:trans-ode} is just matrix multiplication, and the resulting linear differential equation can be solved explicitly.

Evaluating \cref{lem:trans-ode} at $Î» = 0$ yields the following useful result.
\begin{corollary}
	\label{lem:dtrans-is-hlift}
	Let $Î³ : [0, 1] â†’ â„³$ be a path and let $p âˆˆ â„±_{Î³(0)}$.
	\begin{align}
		\dv{Î»} \trans_{Î³(Î» â† 0)} p \, \bigg|_{Î» = 0} = -Î“_{\vb{\dot Î³}(0)}(p)
	\end{align}
\end{corollary}
An important consequence of this derivative relationship is that, since $\trans_Î³ âˆˆ G$ is an element of the group of fibre endomorphisms,\sidenote{
	Technically, $\trans_Î³$ can only be called a group element \emph{after} a bundle trivialisation (giving a well-defined identity map between fibres).
} the horizontal lift is Lie algebra--valued, $Î“_ğ’– âˆˆ \liealg g â‰¡ T_\op{id} G$.

\section{Covariant Differentiation}

We have seen that a choice of connection $H âŠ‚ \TT â„±$ determines which tangent vectors in the bulk of a bundle are horizontal.
This in turn defines the parallel transport operator.
From this we may also define the coordinate-independent \textdef{covariant derivative} as the rate of change of a section with respect to the connection's horizontal.

To decompose vectors into horizontal and vertical components according to $H$, we employ the \textdef{projection} and \textdef{rejection} maps
\begin{align}
	\label{eqn:proj-rej}
	\op{proj}_{H_p} : \TT_p â„± â†’ H_p
	\qqtext{and}
	\op{rej}_{H_p} : \TT_p â„± â†’ \VV_p â„±
\end{align}
defined by $\op{proj}_{H_p} ğ’– + \op{rej}_{H_p} ğ’– = ğ’– âˆˆ \TT_p â„±$ and idempotence.


% We expect a submanifold $f$ of $â„±$ (e.g., a curve or section) to have vanishing covariant derivative if the tangent space is horizontal (i.e., $\dd f$ everywhere lies in $H$).
% In other words, $f$ is covariantly constant if it is an integral manifold of the connection $H âŠ† \TT â„±$.
% The covariant derivative then measures the failure of $f$ to be covariantly constant; i.e., the rate of change in $f$ relative to the connection's horizontal.

\begin{definition}
	\label{def:covariant-derivative-on-fibre-bundle}
	% The \textdef{covariant derivative} $\df âˆ‡f : \TT_x â„³ â†’ \VV_{f(x)} â„±$ of a section $f âˆˆ \secs(â„±)$ is defined by
	The \textdef{covariant derivative} $\df âˆ‡f âˆˆ \forms[1](â„³, \VV â„±) $ of a section $f âˆˆ \secs(â„±)$ is defined by
	\begin{align}
		% âˆ‡f &: \TT_p â„³ â†’ \VV_{f(p)} â„±
		\label{eqn:covder}
		\df âˆ‡f &= \op{rej}_H{} âˆ˜ \dd f
	.\end{align}
\end{definition}
\Cref{eqn:covder} is a vertical-valued $1$-form, i.e., a linear map
\begin{math}
	\df âˆ‡f|_x : \TT_x â„³ â†’ \VV_{f(x)} â„±
\end{math}
defined at each $x âˆˆ â„³$.
Acting on a vector $ğ’– âˆˆ \TT_x â„³$, this reads
\begin{align}
	âˆ‡_ğ’–f â‰” \df âˆ‡f(ğ’–) = \op{rej}_{H_{f(x)}}(\dd f(ğ’–)) âˆˆ \VV_{f(x)} â„±
.\end{align}
This can be interpreted geometrically as follows.
The true gradient vector $\dd f(ğ’–) âˆˆ \TT_{f(x)}â„±$ of the section $f$ lies outside the fibre's tangent space $\VV_{f(x)}â„± âŠ† \TT_{f(x)}â„±$.
But we do not want to measure horizontal motion --- just the \emph{effective} vertical change of $f(x)$ induced by moving $x$ in the direction of $ğ’–$.
Thus, the covariant derivative $âˆ‡_ğ’–f âˆˆ \VV_{f(x)}â„±$ is the vertical projection of $\dd f(ğ’–)$ obtained by discarding its horizontal component, where `horizontal' is of course specified by the connection  (see \cref{fig:covariant-derivative}).


\begin{marginfigure}
	\includefigure{covariant-derivative}
	\caption{
		Covariant derivative of $f$ at $x âˆˆ â„³$ along $ğ’– âˆˆ \TT_x â„³$.
		The vector $-Î“_f(ğ’–) = \dd Ï€|_{H_{f(x)}}^{-1}(ğ’–)$ indicates horizontal motion under the connection $H$, and $âˆ‡_ğ’–f$ is the derivative relative to this horizontal.
	}
	\label{fig:covariant-derivative}
\end{marginfigure}

\begin{lemma}
	\label{lem:covariant-derivative-rewritten}
	The covariant derivative as in \cref{def:covariant-derivative-on-fibre-bundle} is equivalent to
	\begin{align}
		âˆ‡_ğ’– f = \dd f(ğ’–) + Î“_ğ’–(f) 
	,\end{align}
	where $\dd f$ is the push-forward of $f âˆˆ \secs(â„±)$ and $Î“$ is the horizontal lift as in \cref{def:connection-map}.
\end{lemma}

\begin{proof}
	By the defining property of the projection and rejection \eqref{eqn:proj-rej},
	\begin{align}
		\dd f = \op{rej}_H{} âˆ˜ \dd f + \op{proj}_H{} âˆ˜ \dd f
	\end{align}
	since $\dd f : \TT â„³ â†’ \TT â„±$ is linear.
	Therefore, rewriting \cref{def:covariant-derivative-on-fibre-bundle},
	\begin{align}
		\df âˆ‡f = \op{rej}_H{} âˆ˜ \dd f
			= \dd f - \op{proj}_H{} âˆ˜ \dd f
	.\end{align}
	Using \cref{eqn:lift-of-base-tangent-vectors}, the projection operator at $p âˆˆ â„±$ can be written as
	\begin{align}
		\op{proj}_{H_p} = \dd Ï€|_{H_p}^{-1} âˆ˜ \dd Ï€
	.\end{align}
	Finally, because $f$ is a section, $Ï€ âˆ˜ f = \op{id}$ and so
	\begin{math}
		\dd Ï€ âˆ˜ \dd f = \op{id}
	\end{math}
	by the chain rule (\cref{lem:differential-chain-rule}).
	Thus, acting on a base vector $ğ’– âˆˆ \TT_x â„³$,
	\begin{align}
		âˆ‡_ğ’–f
			&= \dd f(ğ’–) - \dd Ï€|_{H_{f(x)}}^{-1} âˆ˜ \dd Ï€ âˆ˜ \dd f (ğ’–)
		\\	&= \dd f(ğ’–) - \dd Ï€|_{H_{f(x)}}^{-1} (ğ’–)
	,\end{align}
	which by \cref{def:connection-map} gives the result.
\end{proof}









\subsubsection{Coordinate representation}

At this point, we may introduce component forms of the above devices for a general fibre bundle.
Choose a (local) trivialisation of $â„±$ so that $\set{x^A} = \set{x^Î¼, x^a}$ are (local) coordinates on $â„³$ and the fibres, respectively.
(Capital Latin indices run over all components, so we may write $(p^A) = (x^Î¼, x^a)$ for a bulk value $p âˆˆ â„±$.)
Vertical motion fixes the base coordinates, but the fibre coordinates $x^a$ are \emph{not} required to be constant under horizontal motion.

% The covariant derivative in \cref{lem:covariant-derivative-rewritten} acting on a section $f : â„³ â†’ â„±$ in the direction $ğ’– âˆˆ \TT_x â„³$ has the full form
% \begin{align}
% 	âˆ‡_ğ’–f = \dd f(ğ’–) + Î“_f(ğ’–)
% .\end{align}
% The connection map $Î“_f : \TTâ„³ â†’ H âŠ† \TT â„±$ is linear, so it is a $\TT â„±$-valued $1$-form which we may write as a bitensor (i.e., matrix--valued) section $Î“_f : â„³ â†’ \TT^*â„³ âŠ— \TT â„±$.
% Without reference to $f$, we have $Î“ : â„± â†’ \TT^*â„³ âŠ— \TT â„±$ with $Î“_f(x) â‰¡ Î“(f(x))$.
% % The horizontal projection $\dd Ï€|_{H_{f(x)}}^{-1} : \TT_xâ„³ â†’ H_{f(x)} âŠ† \TT â„±$ is a linear operator at each point in $â„±$, so we may write it as a $\TT â„±$-valued $1$-form.
Denote the associated coordinate basis of $\TT â„±$ by $(\âˆ‚_A) = (\âˆ‚_Î¼, \âˆ‚_a)$.
Recall that $Î“(f) âˆˆ \forms[1](â„³, H)$ is a $1$-form, and hence is linear in its tangent vector argument $ğ’– âˆˆ \secs(\TT â„³)$.
Thus, we define the components
\begin{align}
	\label{eqn:covariant-derivative-coords.1}
	Î“_Î¼ â‰” Î“_{\âˆ‚_Î¼}
\end{align}
so that
\begin{math}
	Î“_ğ’–(f) = u^Î¼ Î“_Î¼(f)
.\end{math}
Since $Î“_ğ’–(f)|_x âˆˆ H_{f(x)}$ is a (horizontal) vector, we may also define the $2$-component object $Î“_Î¼{}^A$ by
\begin{align}
	Î“_Î¼(f) = Î“_Î¼{}^A(f) \, \âˆ‚_A
.\end{align}
Note that horizontal vectors have both fibre \emph{and} base components,
\begin{align}
	Î“_Î¼{}^A \, \âˆ‚_A = Î“_Î¼{}^Î½ \, \âˆ‚_Î½ + Î“_Î¼{}^a \, \âˆ‚_a
.\end{align}
Indeed, the same applies to the push-forward
\begin{math}
	\dd f = \dd f^Î¼ \, \âˆ‚_Î¼ + \dd f^a \, \âˆ‚_a
\end{math}
since $\dd f$ is not vertical (the non-verticality of the usual derivative $\dd f$ is what the covariant derivative attempts to fix).
However, since $âˆ‡_Î¼ f âˆˆ \VV â„±$ as a whole \emph{is} vertical, the base components $Î“_Î¼{}^Î½$ and $âˆ‚_Î¼ f^Î½$ must cancel.

This is verified by noting that
\begin{align}
	\label{eqn:covariant-derivative-coords.2}
	\dd Ï€ (\dd f (ğ’–)) = ğ’–
	\qqtext{and}
	\dd Ï€(-Î“_{f(x)}(ğ’–)) â‰¡ \dd Ï€ (\dd Ï€|_{H_{f(x)}}^{-1}(ğ’–)) = ğ’–
\end{align}
are equal.
In effect, $\dd Ï€$ projects onto components of the base,
\begin{math}
	\dd Ï€(X^A \âˆ‚_A) = X^Î½ \âˆ‚_Î½
,\end{math}
and so \cref{eqn:covariant-derivative-coords.2} implies $\dd f^Î½(ğ’–) = -u^Î¼Î“_Î¼{}^Î½$.
Therefore, in components, the covariant derivative of a section is
\begin{align}
	\label{eqn:covder-comps-general-bundle}
	âˆ‡_Î¼ f^a = âˆ‚_Î¼ f^a + Î“_Î¼{}^a(f)
,\end{align}
with base components of $\dd f(ğ’–)$ and $Î“_ğ’–(f)$ suppressed.\sidenote{
	In practice, one usually works with a (local) trivialisation in which $f : â„³ â†’ F$ is given as a \emph{field}.
	Then, $\dd f = \dd f^a \, \âˆ‚_a$ has no base components anyway, so we take $Î“_Î¼(f) = Î“_Î¼{}^a(f) \, \âˆ‚_a$.
}
Note that $f$ need not be a vector section of a linear bundle --- \cref{eqn:covder-comps-general-bundle} is general to smooth fibre bundles of any kind.


\section{Connections on Vector Bundles}
\label{sec:vector-bundles}

So far, we have treated connections in the setting of a general smooth fibre bundle.
We now consider connections and their associated covariant derivatives on \emph{vector} bundles $\fibrebundle V ğ’± â„³$, with more or less additional structure.

% \subsubsection{On vector bundles}

In general, the transport operator over a path is an invertible map between the start and end fibres.
For a vector bundle, we often require this to be a \emph{linear} map, in which case the connection is said to be linear.
By \cref{lem:trans-ode}, this means the horizontal lift is also linear in its fibre argument,
\begin{math}
	\df Î“(Î»^i X_i) = Î»^i \df Î“(X_i)
,\end{math}
so we may regard $Î“_ğ’–$ as a matrix and $\df Î“$ as a matrix-valued $1$-form, acting on vectors $X âˆˆ ğ’±$ by matrix multiplication,
\begin{math}
	\df Î“ X â‰” \df Î“(X)
.\end{math}

If $\set{\ve_a}$ is a basis for some vector bundle $ğ’±$ with a linear connection, then we define $3$-component \textdef{connection coefficients},
\begin{align}
	Î“_Î¼{}^a{}_b â‰” Î“_Î¼{}^a \ve_b
	\marginnote{
		Our notation suggest a $1$-form
		$\df Î“ = Î“_Î¼ \dx^Î¼$ of matrices $Î“_Î¼{} = Î“_Î¼{}^a{}_b \ve_a âŠ— \ve^b$, but index placement varies in the literature:
		\cite{misner1973gravitation} uses $Î“^a{}_{bÎ¼}$; \cite{carroll2019gr} uses $Î“^a_{Î¼b}$.
	}
.\end{align}
We may write expressions in both basis-free and component forms; 
\begin{align}
	Î“_ğ’– X = u^Î¼ \, Î“_Î¼{}^a{}_b \, X^b \, \ve_a
.\end{align}

Linearity also allows the covariant derivative to be expressed as the limit of a difference, similar to the usual analytical definition of the derivative of a real function.
\begin{lemma}
	\label{lem:trans-and-covariant-der}
	If $Î³ : [0, 1] â†’ â„³$ is a path and $X âˆˆ \secs_Î³(ğ’±)$ is a smooth vector section defined on $Î³$, then
	\begin{align}
		âˆ‡_{\vb{\dot Î³}(0)} X|_{Î³(0)}
		&= \lim_{Îµ â†’ 0} \frac{X|_{Î³(Îµ)} - \trans_{Î³(Îµ â† 0)}X|_{Î³(0)}}{Îµ}
	\\	&= \dv{Î»}\eval{\qty(X|_{Î³(Î»)} - \trans_{Î³(Î» â† 0)}X|_{Î³(0)})}_{Î»=0}
	.\end{align}
\end{lemma}
\begin{proof}
	Using \cref{lem:dtrans-is-hlift}, the right-hand side is equal to
	\begin{align}
		\dd X(\vb{\dot Î³}(0)) + Î“_{\vb{\dot Î³}(0)}X
	,\end{align}
	which by \cref{lem:covariant-derivative-rewritten} is equal to $âˆ‡_{\vb{\dot Î³}(0)} X|_{Î³(0)}$.
\end{proof}



\subsubsection{Metric compatibile connections}

A linear connection on a metrical vector bundle $\fibrebundle V ğ’± â„³$ is called \textdef{metric compatible} if for any vectors $X, Y âˆˆ ğ’±$,
\begin{align}
	\ip{\trans X, \trans Y} = \ip{X, Y}
\end{align}
where the transport operators are over some common path. 
\begin{lemma}
	A metric compatible connection satisfies
	\begin{align}
		\ip{\df Î“ X, Y} = -\ip{X, \df Î“ Y}
		\qqtext{or}
		Î“_{Î¼ab} = -Î“_{Î¼ba}
	\end{align}
	where $Î“_{Î¼ab} = Î·_{ac}Î“_Î¼{}^c{}_b$.
\end{lemma}
\begin{proof}
	Consider transport along a path $Î³(Î» â† 0)$, and abbreviate $T_Î» â‰” \trans_{Î³(Î» â† 0)}$.
	Since $\ip{T_Î» X, T_Î» Y} = \ip{X, Y}$ is constant with respect to $Î»$, its $Î»$-derivative vanishes.
	But we also have
	\begin{align}
		0 = \dv{Î»} \ip{T_Î» X, T_Î» Y} \bigg|_{Î» = 0}
		% &= \dv{Î»} \ip{X, Y} \bigg|_{Î» = 0} = 0
		&= \ip{\dv{Î»} T_Î» X \, \big|_{Î» = 0}, Y} + \ip{X, \dv{Î»} T_Î» Y \, \big|_{Î» = 0}}
	\\	&= -\ip{Î“_{\vb{\dot Î³}(0)}X, Y} - \ip{X, Î“_{\vb{\dot Î³}(0)}Y}
	.\end{align}
	Since $Î³$ is arbitrary, we have
	\begin{math}
		\ip{Î“_ğ’– X, Y} + \ip{X, Î“_ğ’– Y} = 0
	\end{math}
	for all $ğ’– âˆˆ \TT â„³$.

	Writing this in component form,
	\begin{align}
		Î·_{ab} \, Î“_Î¼{}^a{}_c \, X^c \, Y^b
		= -Î·_{ab} \, X^a \, Î“_Î¼{}^b{}_c \, Y^c
	\end{align}
	which implies
	\begin{math}
		Î·_{ab} \, Î“_Î¼{}^a{}_c
		= -Î·_{ab} \, Î“_Î¼{}^b{}_c
	\end{math}
	since $X$ and $Y$ are arbitrary.
\end{proof}

Metric-compatible connections are not unique.
If $n = \dim â„³$ and $d = \dim V$, then there are $nd^2$ components of $Î“_Î¼{}^a{}_b$, subject to $nd(d+1)/2$ compatibility equations $Î“_{Î¼ab} + Î“_{Î¼ba} = 0$, leaving $nd(d-1)/2$ degrees of freedom.



\subsubsection{On algebra bundles}

On vector bundles equipped with an associative product, we often want the linear connection to be constrained so that $\df âˆ‡$ is a derivation;
\begin{align}
	\label{eqn:covder-derivation}
	\df âˆ‡ (A âŠ› B) = (\df âˆ‡ A) âŠ› B + A âŠ› (\df âˆ‡ B)
.\end{align}
This is equivalent to requiring that the transport operator respects multiplication,
\begin{align}
	\label{eqn:trans-respect-prod}
	(\trans X) âŠ› (\trans Y) = \trans (X âŠ› Y)
,\end{align}
similar to the metric compatibility criterion.
% \begin{lemma}
% 	\label{lem:covder-prod}
% 	Let $ğ’œ$ be an algebra bundle whose product $âŠ›$ is respected by parallel transportation (as in \cref{eqn:trans-respect-prod}).
% 	Then, $\df âˆ‡$ is a $âŠ›$-derivation, and
% 	\begin{align}
% 		\label{eqn:covder-prod}
% 		\df âˆ‡ (\etc{X_\i}âŠ›k) = \df\dd (\etc{X_\i}âŠ›k) + \sum_{i=1}^k \etcmid{X_\i}{\df Î“ X_i}âŠ›k
% 	\end{align}
% 	for $X_i âˆˆ \secs(ğ’±)$.
% \end{lemma}
\begin{proof}
	We will derive \cref{eqn:covder-derivation} from \cref{eqn:trans-respect-prod}, showing their equivalence.
	Denote $T_Î» â‰” \trans_{Î³(Î» â† 0)}$ for some path $Î³$.
	Using \cref{lem:trans-and-covariant-der}, we have
	% \begin{fullwidth}
	\begin{align}
		âˆ‡_{\vb{\dot Î³}(0)} (\etc{X_\i}âŠ›k)
		= \df\dd(\etc{X_\i}âŠ›k)(\vb{\dot Î³}(0))
		- \dv{Î»} T_Î»(\etc{X_\i}âŠ›k) \bigg|_{Î» = 0}
	.\end{align}
	We already know that $\df\dd$ is a derivation.
	For the rightmost term, \cref{eqn:trans-respect-prod}, linearity and associativity imply
	\begin{align}
		-\dv{Î»} \etc{T_Î» X_i}âŠ›k \, \bigg|_{Î»=0} = -\sum_{i=1}^k \etcmid{X_\i}{\dv{Î»} T_Î» X_i \big|_{Î»=0}}âŠ›k
	,\end{align}
	which by \cref{lem:dtrans-is-hlift} gives the result, after removing reference to the arbitrary vector $\vb{\dot Î³}(0)$.
\end{proof}

Consequently, a linear connection on a vector bundle $ğ’±$ induces a \emph{unique} $âŠ›$-respecting connection on the algebra bundle generated by $âŠ›$, since the covariant derivative of a product may be reduced to a product of covariant derivatives of vectors.
For example, for a tensor bundle $\TA{ğ’±}$ with a metric compatible connection, we derive the familiar formula for general type-$(p, q)$ tensors, written purely in tems of the connection coefficients for $ğ’±$.
\begin{fullwidth}
\begin{align}
	\label{eqn:covder-general-tensor}
	âˆ‡_Î¼T^{a_1\cdots a_p}{}_{b_1\cdots b_q}
	= âˆ‚_Î¼T^{a_1\cdots a_p}{}_{b_1\cdots b_q}
	+ \sum_{i = 1}^p Î“_Î¼{}^{a_i}{}_c T^{a_1\cdots c\cdots a_p}{}_{b_1\cdots b_q}
	- \sum_{j = 1}^q Î“_Î¼{}^c{}_{b_j} T^{a_1\cdots a_p}{}_{b_1\cdots c\cdots b_q}
\end{align}
\end{fullwidth}
% Note that \cref{eqn:covder-general-tensor} is written only in terms of the connection coefficients $Î“_Î¼{}^a{}_b$ on $ğ’±$.


\subsection{Bivector connections on multivector bundles}

Using the tools of geometric algebra, the covariant derivative associated with a metric--compatible connection may be expressed as a bivector--valued form.
This representation has the advantage that it is independent of the kind of multivector object being differentiated.
(In stark contrast to \cref{eqn:covder-general-tensor} for a general tensor, for example.)

To derive the bivector connection, begin with the covariant derivative of a vector $ğ‘¿ âˆˆ \GA[1](ğ’±, Î·)$,
\begin{align}
	âˆ‡_Î¼ ğ‘¿ = (âˆ‚_Î¼ X^a + Î“_Î¼{}^a{}_b X^b) \ve_a
.\end{align}
Rewrite the non-derivative term as
\begin{align}
	Î“_Î¼{}^a{}_b \, \ve_a X^b
	&= Î“_{Î¼ab} \, \ve^a (\ve^b \fatdot ğ‘¿)
\\	&= \frac12 Î“_{Î¼ab} \, (\ve^a (\ve^b \fatdot ğ‘¿) - (ğ‘¿ \fatdot \ve^a) \ve^b )
\end{align}
using the fact that $Î“_{Î¼ab} = -Î“_{Î¼ba}$ for a metric compatible connection, and that $\ve^a \fatdot ğ‘¿ = ğ‘¿ \fatdot \ve^a$ is a scalar commuting with $\ve^b$.
Then, since for vectors the inner product is $ğ‘¿ \fatdot ğ’€ = \frac12(ğ‘¿ğ’€ + ğ’€ğ‘¿)$, this is
\begin{align}
	\frac14 Î“_{Î¼ab} \, (\ve^a \ve^b ğ‘¿ + \ve^a ğ‘¿ \ve^b - ğ‘¿ \ve^a \ve^b - \ve^a ğ‘¿ \ve^b)
	&= \frac14 Î“_{Î¼ab} \, (\ve^a \ve^b ğ‘¿ - ğ‘¿ \ve^a \ve^b)
.\end{align}
In the right-hand side, the scalar parts from the products between $\ve^a$ and $\ve^b$ cancel, leaving a commutator product of the bivector $\ve^a âˆ§ \ve^b$ with $ğ‘¿$,
\begin{align}
	\frac12 Î“_{Î¼ab} \, (\ve^a âˆ§ \ve^b) Ã— ğ‘¿ = Ï‰_Î¼ Ã— ğ‘¿
,\end{align}
where we define the \textdef{connection bivectors} in the basis $\set{\ve_a}$ by
\begin{align}
	\label{eqn:connection-bivectors}
	Ï‰_Î¼ â‰” \frac12 Î“_{Î¼ab} \, \ve^a âˆ§ \ve^b
.\end{align}
Thus, we may write the covariant derivative of $ğ‘¿$ as
\begin{align}
	\label{eqn:covder-connection-bivectors}
	âˆ‡_Î¼ ğ‘¿ = âˆ‚_Î¼ ğ‘¿ + Ï‰_Î¼ Ã— ğ‘¿
,\end{align}
and define the \textdef{connection bivector $1$-form} $\df Ï‰$ by
\begin{math}
	\df Ï‰(ğ’–) â‰¡ Ï‰_ğ’– â‰” u^a Ï‰_a
.\end{math}

The connection bivector is especially useful because the form of \cref{eqn:covder-connection-bivectors} is in fact general to \emph{all} multivectors.


\begin{lemma}
	\label{lem:covder-multivector}
	The covariant derivative of any multivector $A âˆˆ \GA(ğ’±, Î·)$ is
	\begin{align}
		\df âˆ‡ A = \df\dd A + \df Ï‰ Ã— A
	.\end{align}
\end{lemma}
\begin{proof}
	The covariant derivative is a derivation if the connection respects the geometric product.
	Therefore, the covariant derivative of a product of $k$-many vectors is
	\begin{align}
		\df âˆ‡(\etc{ğ’–_\i}{}k)
		% &= \sum_{i=1}^k \etcmid{ğ’–_\i}{(\df âˆ‡ ğ’–_i)}{}k
		&= \sum_{i=1}^k \etcmid{ğ’–_\i}{(\df\dd ğ’–_i + \df Ï‰ Ã— ğ’–_i)}{}k
	% \\	&= \df\dd(\etc{ğ’–_\i}{}k) + \sum_{i=1}^k \etcmid{ğ’–_\i}{(\df Ï‰ Ã— ğ’–_i)}{}k
	\\	&= \df\dd(\etc{ğ’–_\i}{}k) + \df Ï‰ Ã— (\etc{ğ’–_\i}{}k)
	,\end{align}
	using \cref{eqn:covder-connection-bivectors} and the fact that commutation by a bivector is a derivation (\cref{lem:commutator-derivation}).
	Since all multivectors are linear combinations of products of vectors, the general result follows.
\end{proof}


A rapid alternative derivation of \cref{lem:covder-multivector} starts from the observation that parallel transport along a path may be written as
\begin{align}
	\trans_Î³ A = R A \rev{R}
,\end{align}
since any transformation continuously connected to the identity which preserves the geometric product belongs to the rotor group, $\op{Spin}^+$ (see \cref{sec:rotors}).
Any such rotor is of the form $R = e^{Ïƒ/2}$ for a bivector $Ïƒ$, so we have
\begin{align}
	\dv{Î»} \trans_{Î³(Î» â† 0)} A = \frac12 R (Ïƒ A - A Ïƒ) \rev{R}
\end{align}
where $Ïƒ = Ïƒ(Î»)$ and hence $R$ are functions of the path parameter.
At $Î» = 0$, the rotor is trivial, so by \cref{lem:dtrans-is-hlift} we find
\begin{align}
	\dv{Î»} \trans_{Î³(Î» â† 0)} A \, \bigg|_{Î»=0} = -Î“_{\vb{\dot Î³}(0)}(A) = Ïƒ(0) Ã— A
.\end{align}
Thus, the horizontal lift is given by commutation with a specified bivector.
Since this holds for arbitrary multivectors $A$, by \cref{lem:covariant-derivative-rewritten} we have the universally applicable formula for the covariant derivative of a multivector
\begin{align}
	âˆ‡_ğ’– A = âˆ‚_ğ’– A + Ï‰_ğ’– Ã— A
\end{align}
where $Ï‰_ğ’–$ is the required bivector.





% \section{Covariant Algebraic Derivatives}


% The covariant derivative $âˆ‡_ğ’–$ is analogous to the directional derivative $âˆ‚_ğ’–$ of \cref{sec:algder}, but defined for sections on a manifold $F âˆˆ \secs(ğ’œ)$ instead of fields on a vector space $F : V â†’ A$.
% In identical vein to \cref{def:algder}, it is useful to define a `total' derivative operator $ğ’Ÿ$ which is independent of a direction $ğ’– âˆˆ \TT â„³$.
% Like the algebraic derivative $\DD$ of \cref{sec:algder}, $ğ’Ÿ$ is defined whenever an inclusion $Î¹ : \TT^*â„³ â†’ ğ’œ$ is given (but $Î¹$ is usually left implicit) enabling tangent vectors to be multiplied by elements in the algebra.

% \begin{definition}
% 	\label{def:covalgder}
% 	Let $\fibrebundle A ğ’œ â„³$ be an algebra bundle with product $âŠ›$ and connection $\df âˆ‡$, equipped with an inclusion $Î¹ : \TT^*â„³ â†’ ğ’œ$.
% 	The \textdef{covariant algebraic derivative} of a section $F âˆˆ \secs(ğ’œ)$ is
% 	\begin{align}
% 		ğ’Ÿ F â‰” Î¹(\ve^a) âŠ› âˆ‡_{\ve_a} F
% 	\end{align}
% 	(summation on $a$) where $\set{\ve_a} âŠ‚ \secs(\TT â„³)$ and $\set{\ve^a} âŠ‚ \secs(\TT^* â„³)$ are dual bases of tangent sections.
% \end{definition}


% \subsection{The covariant vector derivative}


% On a geometric algebra bundle $\GA(\TT â„³, Î·)$, \cref{def:covalgder} is the \textdef{covariant vector derivative} $\VD$ and has similar properties to the vector derivative $\vd$ on $\GA(V, Î·)$.
% Given a basis $\set{\ve^a}$ (simultaneously of $\secs(\TT^* â„³)$ and $\GA[1](â„³, Î·)$, so $Î¹$ may be omitted), we have the operator
% \begin{align}
% 	\VD = \ve^a âˆ‡_a
% ,\end{align}
% sharing the algebraic properties of a grade-$1$ vector.\sidenote{Hence its bold symbol, like $\vd$.}
% In particular, for a $k$-vector section $F âˆˆ \GA[k](â„³, Î·)$, there is a decomposition into $(k Â± 1)$-grade parts,
% \begin{align}
% 	\VD F = \VD \lcontr F + \VD âˆ§ F
% ,\end{align}
% corresponding to the covariant curl and `cocurl'.