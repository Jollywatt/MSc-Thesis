\chapter{Spacetime as a Manifold}



The investigations of \cref{part:1} were restricted to \emph{flat geometries}.
In particular, special relativity models spacetime as a homogeneous, isotropic Minkowski vector space.
However, the general theory of relativity incorporates gravity as the curvature of space itself.
Thus, spacetime no longer has an intrinsic vector space structure where the `difference between points' has physical meaning.
The mathematical demands of curvature call for the \emph{differential geometry} of manifolds.




Here we only give a pragmatic definition of a manifold as a space which locally looks like $\RR^n$ upon which one can do calculus.
(A rigorous definition in terms of charts and atlases can be found in the first chapter of \cite{lee2012diffgeo}.)
\begin{definition}
	\label{def:manifold}
	A \textdef{manifold $\manif M$ of dimension $n$} is a nice\sidenote{
		Here, a `nice' topological space is:
		\begin{enumerate}[leftmargin=1.3em]
		\item \emph{Hausdorff}, meaning each distinct pair of points have mutually disjoint neighbourhoods (so it is ``not too small''); and
		\item \emph{second-countable}, meaning there exists a countable base (so it is ``not too large'').
		\end{enumerate}
	} topological space which is locally Euclidean, meaning for every $x ∈ \manif M$ there exist neighbourhoods $x ∈ \manif U \subseteq \manif M$ and subsets $U \subseteq \RR^n$ with a homeomorphism (continuous bijection) $\manif U \biject U$ between them.

	A \textdef{smooth manifold} is a manifold with the stricter requirement that $\manif U \biject U$ be a diffeomorphism (differentiable bijection).
\end{definition}


Essentially, \cref{def:manifold} is designed to guarantee that well-behaved local coordinates (corresponding to elements of $U$) always exist.
% Spherical surfaces, closed curves and spaces such as $\SO(n)$ are smooth manifolds, but cubes 
\begin{definition}
	\label{def:coord-chart}
	Let $\manif M$ be an $n$-dimensional manifold.
	A \textdef{(global) coordinate chart $\set{x^i} ≡ \set{\etc{x^\i},n}$} of $ℳ$ is a set of scalar fields $x^i : \manif M → \RR$ such that each point in $ℳ$ is specified uniquely by the coordinate values $(\etc{x^\i},n) ∈ \RR^n$.

	A \textdef{local coordinate chart} about a point $x ∈ \manif M$ is a coordinate chart of a neighbourhood of $x$.
\end{definition}
In other words, the coordinate functions $\set{x^i}$ specify a homeomorphism $ℳ → \RR^n$, or a diffeomorphism in the case of a smooth chart.
We will often call a point $x ∈ \manif M$ by the same symbol as the local coordinates $x^i : \manif M → \RR$ without the index --- but these objects are not interchangeable.

A structure-preserving map between manifolds is a continuous function; and between smooth manifolds, a differentiable function.
For brevity, we assume the definitions that follow take place in the category of manifolds, and \emph{take all maps between manifolds to be continuous.}
Furthermore, if the qualifier ``smooth'' is present, we operate in the category of smooth manifolds and such maps are assumed differentiable.
Thus, the coordinate scalars $x^i$ of \cref{def:coord-chart} are continuous functions, and are differentiable if the manifold is smooth.


\todo{Define $\forms(ℳ)$.}

\section{Derivatives of Smooth Maps}
\label{sec:differential}

Manifolds themselves do not have inherent vector space structure.
However, being locally Euclidean means there is a real vector space naturally associated to each point:
\begin{definition}
	\label{def:tangent-space-bundle}
	The \textdef{tangent space $\TT_x\manif M$} of a manifold at a point $x ∈ \manif M$ is the vector space of derivations on smooth functions at that point.\sidenote{
		More precisely, each vector $𝒖 ∈ \TT_x\manif M$ is an equivalence class of derivatives evaluated at the point $x$, where different derivations which agree at the point $x$ are identified.
	}
	In any local coordinate chart $\set{x^i}_{i=1}^n$ of $\manif M$ containing $x$, this is
	\begin{align}
		\TT_x\manif M ≅ \spanof{\eval{\pdv{x^i}}_x}_{i=1}^n
	.\end{align}
	The \textdef{tangent bundle $\TT\manif M$} is the disjoint union of all tangent spaces
	\begin{align}
		\TT\manif M = \set{(x, 𝒖) | x ∈ \manif M, 𝒖 ∈ \TT_x\manif M}
	\end{align}
	equipped with an appropriate manifold topology.\sidenote{
		Specifically, the topology of a fibre bundle (see \cref{cha:fibre-bundles}).
	}
\end{definition}


Given a smooth manifold, its tangent bundle comes for free: its construction is canonical and requires no additional data.
Similarly, given a smooth function $f$ between manifolds, its derivative $\dd f$ (i.e., its `tangent') also comes for free.

In the same way that the tangent bundle consists of `directional derivatives of points' in the manifold (i.e., tangent vectors), the differential $\dd f$ encodes the derivative of $f$ at each point in all directions.\sidenote{
	This parallel is precise: $\dd$ and $\TT$ form a functor in category of smooth manifolds, sending
	\begin{math}
		f: ℳ → 𝒩
	\end{math}
	to
	\begin{math}
		\dd f: \TTℳ → \TT𝒩
	.\end{math}
	Some authors use the symbol $\TT$ for both.
}
Intuitively, if $𝒖 ∈ \TT_x\manif M$ is a vector at a point $x ∈ \manif M$, then the vector $\dd f(𝒖) ∈ \TT_{f(x)}\manif N$ is interpreted as the directional derivative of $f(x) ∈ \manif N$ in the direction $𝒖$.




\begin{definition}
	\label{def:differential}
	The \textdef{differential} or \textdef{push forward} of a map $f : \manif M \to \manif N$ between smooth manifolds is the map $\dd f : \TT\manif M \to \TT\manif N$ defined by
	\begin{align}
		\label{eqn:differential}
		\qty(\dd f(𝒖))(φ)\big|_{f(x)} ≔ 𝒖(φ \circ f)\big|_x
	\end{align}
	for each point $x ∈ \manif M$, vector $𝒖 ∈ \TT_x\manif M$ and smooth function $φ : \manif N → \RR$.
\end{definition}

In the definition above, vectors act on scalar functions as derivations; hence $\dd f(𝒖)$ is defined by its action on an arbitrary scalar field.

Note that $\dd f(𝒖)$ is not always defined everywhere.
If $𝒖|_x ∈ \TT_x\manif M$ is now a family of vectors defined everywhere over $x ∈ ℳ$, then $\dd f(𝒖)|_{f(x)} = \dd f(𝒖|_x)$ is defined only at each $f(x) ∈ \manif N$.
This means that if $f$ fails to be surjective, then $\dd f(𝒖)$ is not defined at those points lying outside the image $f(\manif M) \subset \manif N$.
Likewise, if $f$ fails to be injective at a point $y ∈ \manif N$, then $\dd f(𝒖)$ is \emph{multivalued} at $y$.
Only if $f$ is bijective does $\dd f(𝒖)|_y$ have a single value everywhere.



The meaning of \cref{def:differential} may become clearer when expressed in coordinates.
Suppose $\set{x^i}$ is a local chart of $\manif M$ containing a point $x ∈ \manif M$, and $\set{y^j}$ a chart of $\manif N$ containing $f(x)$.
With the associated coordinate bases
\begin{math}
	\TT_x\manif M = \spanof{\pdv{x^i}}
	\text{ and }
	\TT_{f(x)}\manif N = \spanof{\pdv{y^j}}
,\end{math}
\cref{eqn:differential} takes the full form:
\begin{align}%autonum: was align*
	\qty[\dd f\qty(u^i\pdv{x^i})]^j \eval{\pdv{φ}{y^j}}_{f(x)} &= u^i\eval{\pdv{φ \circ  f}{x^i}}_x
	= u^i\eval{\pdv{y^j \circ  f}{x^i}}_x \eval{\pdv{φ}{y^j}}_{f(x)}
\end{align}%autonum: was align*
The first equality is the definition itself, and the second is an application of the chain rule.
Since $φ$ is an arbitrary smooth function, this holds as an equation of differential operators, and we may remove reference to any particular $φ$ on which the operators act.
\begin{align}
	\label{eqn:differntial-coordinate-form.step1}
	\qty[\dd f\qty(u^i ∂_i)]^j\eval{∂_j}_{f(x)} = u^i \eval{\pdv{f^j}{x^i}}_x \eval{∂_j}_{f(x)}
\end{align}
We have reduced typographical complexity with $∂_i ≔ \pdv{x^i}$ and $∂_j ≔ \pdv{y^j}$, being aware that these are basis vectors of \emph{different} tangent spaces.
We also abbreviate $f^j ≔ y^j \circ  f$ so that $f^j(x)$ is the $j$th coordinate of the point $f(x)$ in the $y^j$ chart.
Thus, the coordinate form of $\dd f$ is precisely the Jacobian matrix,
\begin{align}
	[\dd f(∂_i)]^j = \pdv{f^j}{x^i}
.\end{align}
The point $x$ being arbitrary, we have also suppressed the evaluation signs, with the understanding that the Jacobian maps vectors at $x$ to vectors at $f(x)$.

Turning back to \cref{eqn:differntial-coordinate-form.step1}, the partial derivatives $\pdv*{x^i}$ act on smooth functions $f^j : \manif M → \RR$ to produce smooth functions $\pdv*{f^j}{x^i} : \manif M → \RR$.
However, since we have an intuitive picture of the directional derivative of the {point} $f(x)$ as $x$ is displaced, it is useful to formally extend the notation $\pdv*{x^i}$ so that we may write the partial derivative of a mapping of \emph{points} $f : \manif M → \manif N$.
\begin{marginfigure}
	\centering
	\includefigure[0.8\columnwidth]{derivative-of-point}
	\caption{
		The derivative of the point $x ∈ ℳ$ along the direction of increasing $x^μ$ is a tangent vector $∂_μx ∈ \TT_xℳ$.
		The vector is tangent to the dotted line, along which all coordinates but $x^μ$ are constant. 
	}
	\label{fig:derivative-of-point}
\end{marginfigure}
Semantically, we understand $\pdv{f}{x^i}\big|_x ∈ \TT_{f(x)}\manif N$ to be the infinitesimal displacement vector of the destination point $f(x) ∈ \manif N$ caused by an infinitesimal variation in the $i$th coordinate of the source point $x$.
This is precisely the meaning of the last term in \cref{eqn:differntial-coordinate-form.step1}, so the desired shorthand is
\begin{align}
	\label{eqn:pdv-of-map-notation}
	\pdv{f}{x^i} ≔ \pdv{f^j}{x^i}∂_j
	\qqtext{or, in full,}
	\eval{\pdv{f}{x^i}}_x ≔ \eval{\pdv{y^i \circ  f}{x^i}}_x \eval{\pdv{y^j}}_{f(x)}
.\end{align}
With this, \cref{eqn:differntial-coordinate-form.step1} may be written as
\begin{align}
	\label{eqn:differential-succinct}
	\dd f(𝒖) = u^i\pdv{f}{x^i}
.\end{align}
This condensed form is perhaps too implicit for some purposes, with the notation $\pdv*{f}{x^i}$ doing the work of \cref{eqn:pdv-of-map-notation}.
However, it is nonetheless useful: take for instance the coordinate functions $x^i : \manif M → \RR$ regarded as maps between manifolds.
Then \cref{eqn:differential-succinct} yields the defining property of the coordinate dual basis,
\begin{align}
	\dd x^i(∂_j) = \pdv{x^i}{x^j} = δ^i_j
,\end{align}
where we have identified the one-dimensional vector space $\TT_{x^i}\RR$ with $\RR$ itself.





\begin{lemma}[Chain rule]
	\label{lem:differential-chain-rule}
	If $f\circ g$ is a composition of maps between smooth manifolds, then
	\begin{align}
		\dd (f \circ g) = \dd f \circ \dd g
	.\end{align}
\end{lemma}
\begin{proof}
	Acting on a vector $𝒖$ and applying the forward-pushed vector to a scalar field $φ$, we obtain
	\begin{align}
		(\dd (f \circ g)(𝒖))(φ)
		&= 𝒖(φ \circ f \circ g)
	\\	= 𝒖((φ \circ f) \circ g)
		&= (\dd g (𝒖))(φ \circ f)
		= \dd f(\dd g (𝒖))(φ)
	\end{align}
	by three applications of \cref{def:differential}.
\end{proof}



\section{Fibre Bundles}
\label{cha:fibre-bundles}

In flat geometries, fields were modelled as functions into a fixed vector space.
For example, in flat spacetime $ℳ = \RR^{1+3}$, the electromagnetic bivector $F : ℳ → \EA[2]{\RR^4}$ makes no distinction between the vector space $\EA[2]{\RR^4}$ evaluated at one point in spacetime over another.
This would suggest that all values of a field are directly comparable, making expressions like $F(x) + F(y) ∈ \EA[2]{\RR^4}$ geometrically meaningful for different points $x,y ∈ ℳ$.
However, these kinds of expressions are ill-defined for general smooth manifolds $ℳ$, since they depend on the way tangent spaces are chosen.
Instead, it is beneficial to distinguish between codomains \emph{at each point in the domain}, and treat $F(x)$ and $F(y)$ as belonging to different spaces.

\begin{marginfigure}
	\centering
	\includefigure[0.8\columnwidth]{sphere}
	\caption{
		Vectors in different tangent spaces, and their basis-dependent representation as an $\RR^2$-valued field.
	}
	\label{fig:ball}
\end{marginfigure}

This can be motivated with the simple example of a fluid flowing on a sphere.
The instantaneous fluid velocity at a point is a vector lying in the sphere's tangent plane at that point.
If the fluid flow is given as a map $f : \Sphere^2 → \RR^2$, then any two velocity vectors exist in the ``same'' space, even when \emph{geometrically} they do not (\cref{fig:ball}).
This is more than a purely philosophical point: the fluid flow's representation as a field $f : \Sphere^2 → \RR^2$ is \emph{dependent on the choice of basis}.
That is, $f$ depends on the way in which the single codomain $\RR^2$ is identified with each tangent plane on the sphere, and there is no such canonical choice for the sphere.
We would do better with a more geometrical representation of the vector field which is independent of any choice of basis.
This requires viewing the fluid velocities at different points as existing in different spaces.

From this we construct the tangent \emph{bundle} $\TT \Sphere^2$, where all the tangent planes of $\Sphere^2$ are collected in a disjoint union forming a \emph{bulk}.
The vector field on the sphere now becomes a \emph{section} of $\TT \Sphere^2$, which is a map $f : \Sphere^2 → \TT \Sphere^2$ such that $f(x)$ belongs to the tangent space rooted at $x$.
No longer is the expression $f(x) + f(y)$ well-defined.

The tangent bundle is a special case of a \emph{fibre bundle}, which is a manifold consisting of disjoint copies of a space (called the \emph{fibre}) taken at every point in a base manifold.

\begin{marginfigure}
	\includefigure[\columnwidth]{fibre-bundle}
	\caption{
		(a) A field $f : ℳ → F$, where values at any point can be compared.
		(b) A fibre bundle $\fibrebundle F ℱ ℳ$ with a section $f ∈ \secs(ℱ)$ whose individual fibres $F$ are labelled by base point in $ℳ$.
	}
\end{marginfigure}




\begin{definition}
	\label{def:fibre-bundle}
	A \textdef{fibre bundle} $\fibrebundle[π] F ℱ ℳ$ consists of
	\begin{itemize}
		% \item a \textdef{fibre manifold} $A$;
		\item a \textdef{bulk manifold} $ℱ$;
		\item a \textdef{base manifold} $ℳ$; and
		\item a surjection $π : ℱ → ℳ$, the \textdef{projection}, such that
		\item the inverse image $F_x ≔ π^{-1}(x)$ of a base point $x ∈ ℳ$ is homeomorphic to the \textdef{fibre} $F$.
	\end{itemize}
\end{definition}

\Cref{def:fibre-bundle} takes place in the category of manifolds, so the projection $π : ℱ → ℳ$ is continuous.
In a \textdef{smooth fibre bundle}, the projection $π$ is differentiable and $F$, $ℱ$ and $ℳ$ are all smooth manifolds.

Many different kinds of fibre bundle may be considered by giving $F$ more structure.
For example,
\begin{itemize}
	\item a \textdef{vector bundle} is one where the fibre is a vector space;
	\item a \textdef{principle bundle} is one where the fibre is a group (usually a Lie group); and
	\item an \textdef{algebra bundle} is a vector bundle where each fibre is equipped with a (smoothly varying) algebraic product; and so on.
\end{itemize}


\subsection{Trivialisations and coordinates}

The bulk $ℱ$ of a fibre bundle $\fibrebundle F ℱ ℳ$ is itself a manifold (of dimension $\dim ℱ = \dim ℳ + \dim F$) so we may always prescribe local coordinates on $ℱ$.
If we already have coordinates $\set{x^μ}$ on the base $ℳ$ and $\set{x^a}$ on a fibre $F$, then we often want to use the same coordinates $\set{x^μ, x^a}$ to describe the bulk $ℱ$.
This first requires a way of continuously splitting the bulk $ℱ → ℳ × F$ into its base and fibre ``components'', in a way which respects the fibred structure of the bundle.
This splitting is known as a \emph{trivialisation} of the bundle.
\begin{definition}
	A \textdef{trivialisation} of a fibre bundle $\fibrebundle[π] F ℱ ℳ$ is a homeomorphism $φ : ℱ → ℳ × F$ such that
	\begin{math}
		\op{pr}_1 ∘ φ = π
	.\end{math}
\end{definition}
It is not always possible to find a global trivialisation of a fibre bundle, and if it is, the bundle is called a \textdef{trivial fibre bundle} and there may be different possible trivialisations.\sidenote{
	A simple non-trivial fibre bundle is the Möbius strip, viewed as a bundle over the circle $\Sphere^1$ with fibre $[0, 1]$.
	The trivial bundle $\Sphere^1 × [0, 1]$ describes a strip without a twist.
}

However, it is always possible trivialise \emph{locally}.
That is, for any base point $x ∈ ℳ$, there exists a neighbourhood $x ∈ U ⊆ ℳ$ for which the subbundle $\fibrebundle[π] F {π^{-1}(U)} U$ admits a (global) trivialisation.
Hence, it is always possible to assign \emph{local} coordinates $\set{x^μ, x^a}$ to the bulk of a fibre bundle, where $x^μ$ are coordinates on the base and $x^a$ are coordinates on the fibres, such that $x^μ$ do not vary along the fibres.








\subsection{Sections of fibre bundles}


In the language of fibre bundles, a field $f : ℳ → F$ is replaced by a \emph{section}, which is a ``vertical'' map $f : ℳ → ℱ$ into the bulk $ℱ$ such that $f(x) ∈ F_x$.
\begin{definition}
	A \textdef{section} $f$ of a fibre bundle $\fibrebundle[π] F ℱ ℳ$ is a right-inverse of $π$.
	The space of sections is denoted
	\begin{align}
		\secs(ℱ) = \set{f : ℳ → ℱ | π∘f = \op{id}}
	.\end{align}
\end{definition}
(Again, sections $f ∈ \secs(ℱ)$ are assumed continuous, and \textdef{smooth sections} are sections of smooth fibre bundles for which $f$ is smooth.)


For example, the instantaneous fluid velocity $𝒖$ on a sphere $\Sphere^2$ is a section $𝒖 ∈ \secs(\TT\Sphere^2)$ of the tangent bundle, with a single vector at $x ∈ \Sphere^2$ is denoted $𝒖|_x ∈ \TT_x\Sphere^2$.




\subsection{Exterior differential forms}

\Cref{sec:exterior-forms} defined exterior forms $\forms(V, A)$ as alternating multilinear maps from the fixed vector space $V$ into $A$.
Similarly, the differential of a map $\dd f : \TT ℳ → \TT 𝒩$ is an object that takes a vector argument $𝒖 ∈ \TTℳ$, like an exterior $1$-form, except that the entire tangent bundle $\TT ℳ$ is not a vector space.

Exterior forms, which are alternating maps from a fixed space $\TA{V}$, can be extended to exterior \emph{differential} forms, which exist on a manifold, defining alternating maps from $\TA{(\TT_x ℳ)}$ at each $x ∈ ℳ$.

Although the entire bundle $\TT Μ$ is not a vector space, the space of vector sections $\secs(\TT Μ)$ is.
Hence, when viewed as a map $\dd f : \secs(\TT ℳ) → \secs(\TT 𝒩)$ the differential $\dd f ∈ \forms[1](\secs(\TT ℳ), \secs(\TT 𝒩))$ is a $\secs(\TT 𝒩)$-valued exterior $1$-form in the sense of \cref{def:exterior-form}.
This mouthful may be eased by defining the notation
\begin{align}
	\forms(ℳ, \manif E) ≔ \forms(\secs(\TT ℳ), \secs(\manif E))
\end{align}
for some vector bundle $\fibrebundle ℳ {\manif E} V$.
As with exterior forms, the wedge product is defined as in \cref{eqn:wedge-of-forms}.

An element of $\forms[k](ℳ, \manif E)$ is called an \textdef{$\manif E$-valued exterior differential $k$-form}, where `differential' distinguishes it as an object on a manifold.
Scalar-valued exterior differential forms are elements of $\forms[k](ℳ) ≔ \forms[k](ℳ, ℳ × \RR)$, where $\fibrebundle[π] ℳ {ℳ × \RR} \RR$ is the trivial line bundle with projection $π(x, λ) = λ$.


We sometimes use the notation $\df α$ to emphasise that $α$ is an exterior differential form.






\chapter{Connections on Fibre Bundles}

We have seen that it is more natural to describe physical fields in the language of fibre bundles rather than simply as maps into a fixed codomain.
However, with a field $f ∈ \secs(ℱ)$ now formulated as a section of a fibre bundle, it no longer makes sense to directly compare values $f|_x$ at different points $x ∈ ℳ$, since each value exists in its own fibre.
But the ability to compare across fibres is desirable, particularly because a notion of derivative requires comparing values across `neighbouring' fibres.
To accomplish this, the additional structure of a \emph{connection} on the fibre bundle is required; this then defines the \emph{covariant derivative} of a section.

A trivial example of a connection is the one associated with (the tangent bundle of) Euclidean space.
In this case, tangent vectors at a base point may be \emph{parallel transported} (i.e., translated irrotationally) to any other base point in a well-defined, path-independent way.\sidenote{
	Any tangent vectors $𝒖_p ∈ \TT \RR^n ≅ \RR^n ⊕ \RR^n$ are compared by translating them to the origin (or discarding the base point) $𝒖_p ≡ (p, 𝒖) ↦ 𝒖 ∈ \RR^n$.
}
This defines an isomorphism between every tangent space and tangent space at the origin, which is a connection on $\TT \RR^n$.

We may try to define connections on general fibre bundles in this way, by choosing an isomorphism from every fibre to a single `reference' fibre.
This is the same as choosing a trivialisation $ℱ → ℳ × F$, which identifies every fibre with the reference fibre $F$ (equivalent to prescribing global coordinates on the bundle).
However, defining a connection by a trivialisation like this is a needlessly strict requirement, and is of course impossible to do globally on non-trivial bundles.

For example, the tangent bundle of the sphere $\TT \Sphere^2$ is non-trivial, so it is impossible to give a globally smooth identification of tangent spaces.\sidenote{
	To see this, consider a point on the globe.
	Given a trivialisation of $\TT \Sphere^2$, the northward vector is extended to a vector field on the sphere.
	The hairy ball theorem implies the field vanishes at some point, at which the trivialisation fails.
}
However, it is always possible to define a connection \emph{locally} on the sphere, since local trivialisations always exist.
In other words, tangent vectors on the sphere can be parallel transported over sufficiently short paths, since locally the sphere looks like the Euclidean plane.
This generalises to all smooth manifolds: To define a connection, it is only necessary to specify how values are parallel-transported to `neighbouring' fibres.




\section{Connections on General Fibre Bundles}


The most general kind of smooth bundle is one where the fibres are diffeomorphic to a manifold $F$ and have no further assumed structure.
% The tangent bundle is a special kind of vector bundle, but here we start in generality.
A point $p ∈ ℱ$ in a fibre bundle represents a value in that fibre $F_{π(p)}$ which is rooted at the base point $π(p) ∈ ℳ$.
If the point $p$ is moved within its fibre, the base point remains fixed and the motion is said to be ``vertical''.
The tangent space $\TT_p F_{π(p)}$ of the fibre (in isolation from the bulk) consists of those displacement vectors which define vertical motion.
\begin{definition}
	The \textdef{vertical bundle} of a smooth fibre bundle $\fibrebundle F ℱ ℳ$ is a smooth $(\dim F)$-dimensional tangent subbundle $\VV ℱ ⊆ \TT ℱ$ defined by
	\begin{align}
		\VV_p ℱ = \TT_p F_p
	\end{align}
	for each point $p ∈ ℱ$.
\end{definition}
In other words, the tangent bundles of all the fibres taken together form the vertical bundle.


On the other hand, a \emph{connection} specifies how the value $p ∈ ℱ$ changes when the base point $π(p) ∈ ℳ$ moves, if $p$ is to be considered to move ``horizontally'', i.e., if $p$ is to undergo parallel transport.
\begin{definition}
	A \textdef{horizontal bundle} or \textdef{(Ehresmann) connection} $H$ on a smooth fibre bundle $\fibrebundle F ℱ ℳ$ is a smooth $(\dim ℳ)$-dimensional tangent subbundle $H ⊆ \TT ℱ$ which is complementary to the vertical bundle $V ⊆ \TT ℱ$, in the sense that
	\begin{align}
		\TT_p ℱ = \VV_p ℱ ⊕ H_p
	\end{align}
	for each point $p ∈ ℱ$.
\end{definition}
\begin{marginfigure}
	\centering
	\includefigure{ehresmann-connection}
	\caption{
		Illustration of an Ehresmann connection.
	}
	\label{fig:ehresmann-connection}
\end{marginfigure}
Note that, while the tangent bundle $\TT ℱ$ and vertical bundle $\VV ℱ$ are canonical constructions, the choice of a horizontal bundle $H$ is not: there may be many distinct meanings of parallel transport on a given bundle.



The requirement that $H_p$ be complimentary to $\VV_p ℱ$ means that $H_p ∩ \VV_p ℱ = \set{\symbf 0}$, and hence the restriction of $\dd π : \TT_pℱ \biject \TT_{π(p)}ℳ$ to $H_p ⊆ \TT_pℱ$ is an isomorphism.\sidenote{
	Using the fact that $\ker \dd π = \VV ℱ$, implying $\ker \dd π|_{H_p} = {
	\symbf 0}$.
}
It therefore has an inverse,
\begin{align}
	\label{eqn:lift-of-base-tangent-vectors}
	\dd π|_{H_p}^{-1} : \TT_{π(p)}ℳ \biject H_p
,\end{align}
which acts to ``lift'' tangent vectors from the base into the horizontal subbundle at $p$.
This proves to be a useful construction:
\begin{definition}
	\label{def:connection-map}
	Let $\fibrebundle[π] F ℱ ℳ$ be a fibre bundle with a connection $H ⊆ \TT ℱ$.
	The \textdef{connection map} $Γ|_p : \TT_{π(p)}ℳ → H_p$ is the linear map defined by
	\begin{align}
		Γ|_p ≔ -\dd π|_{H_p}^{-1} : \TT_{π(p)}ℳ → H_p
	\end{align}
	at every $p ∈ ℱ$.
	If $f ∈ \secs(ℱ)$ is a section, also define $Γ_f : \TT_xℳ → H_{f(x)}$ by
	\begin{align}
		Γ_f\big|_x ≔ Γ|_{f(x)} = -\dd π|_{H_{f(x)}}^{-1}
	\end{align}
	for any $x ∈ ℳ$ as a convenient shorthand.
\end{definition}



\subsection{Parallel transport}

With a connection defined on a bundle, a value $p_0 ∈ ℱ$ can be \textdef{parallel transported} between fibres so that the motion is everywhere horizontal with respect to the connection.

Thus, a path $γ : [0, 1] → ℳ$ representing the motion of a value $p_0 ∈ ℱ$ from $γ(0) = π(p_0)$ can be \textdef{lifted} to a horizontal path $p_0 : [0, 1] → ℱ$ in the bulk.
This path is `above' $γ$ in the sense that $π(p_γ(λ)) = γ(λ)$, and `horizontal' in the sense that $\dd p_γ(λ) ∈ H_{p_γ(λ)}$, for all $λ ∈ [0, 1]$ (see \cref{fig:lifted-path})
In other words, $p_γ$ is a one-dimensional integral manifold of the connection $H$ restricted to the `wall' $π^{-1}(γ) ⊂ ℱ$.

\begin{marginfigure}
	\centering
	\includefigure{lifted-path}
	\caption{
		The point $p_0$ and its parallel transport $p_λ$ along a path $γ$.
	}
	\label{fig:lifted-path}
\end{marginfigure}

It is useful to describe as an operator the mapping between fibres defined by parallel transport along a path:
\begin{definition}
	\label{def:transport-operator}
	If $γ : [0, 1] → ℳ$ is a path, then the \textdef{transport operator} $\trans_γ : F_{γ(0)} → F_{γ(1)}$ is defined by
	\begin{math}
		\trans_γ p = p_γ(1)
	\end{math}
	for any point $p ∈ F_{γ(0)}$ where $p_γ : [0, 1] → ℱ$ is the lifted path satisfying
	\begin{align}
		\label{eqn:transport-operator-path-conds}
		π(p_γ(λ)) = γ(λ)
		\qqtext{and}
		\dd p_γ(λ) ∈ H_{p_γ(λ)}
	\end{align}
	for all $λ ∈ [0, 1]$.
\end{definition}
The transport operator is invariant under path reparametrisation, since any path $γ'(λ) = γ(f(λ))$ where $f : [0, 1] → [0, 1]$ is smooth also satisfies equations \ref{eqn:transport-operator-path-conds} if $γ$ does.
Furthermore, the transport operator respects path concatenation $γ_2 * γ_1$ and inversion,
\begin{align}
	\trans_{γ^{-1}} &= \trans_γ{}^{-1}
,&	\trans_{γ_2*γ_1} &= \trans_{γ_2} \circ \trans_{γ_1}
.\end{align}
This makes the transport operator a homomorphism from the groupoid of directed paths modulo reparametrisation\sidenote{where the partially-defined group operation is path concatenation} into the groupoid of fibre isomorphisms.



\begin{lemma}
	\label{lem:dtrans-is-Γ}
	The connection map $Γ : \TTℳ → H$ is the derivative of the transport operator, in the sense that
	\begin{align}
		\dv{λ} \trans_{γ(λ ← 0)} p \Big|_{λ=0} = -Γ|_p(\dot γ(0))
	\end{align}
	for $p ∈ F_{γ(0)}$.
\end{lemma}
\begin{proof}
	If $p ∈ F_{γ(0)}$ then we have
	\begin{math}
		\trans_{γ(λ ← 0)} p = p_γ(λ)
	\end{math}
	where $p_γ$ is the lift of $γ$ through $p$, satisfying the conditions in \cref{def:transport-operator}.
	Differentiating with respect to $λ$,
	\begin{align}
		\dv{λ} \trans_{γ(λ ← 0)} p = \dd p_γ(λ) ∈ H_{p_γ(λ)}
	,\end{align}
	which is the horizontal by \cref{eqn:transport-operator-path-conds}.
	Additionally, from $π \circ p_γ = γ$ we have $\dd π \circ \dd p_γ = \dd γ$.
	Thus, we see that $\dd p_γ(λ)$ is horizontal lift of $\dd γ(λ)$ to the point $p_γ(λ)$, which may be expressed in terms of the connection map,
	\begin{align}
		\dd p_γ(λ) = \dd π|_{H_{p_γ(λ)}}^{-1}(\dd γ(λ)) = -Γ|_{p_γ(λ)}(\dot γ(λ))
	.\end{align}
	Evaluating at $λ = 0$ gives the result.
\end{proof}

\todo{Show how $Γ$ is a $\liealg{gl}(\manif E)$-valued $1$-form}

If, instead of evaluating at $λ = 0$ in the final step, we rewrite $p_γ(λ) = \trans_{γ(λ ← 0)} p$, we obtain a differential equation for the transport operator.
\begin{corollary}
	The derivative at any $λ$ is
	\begin{align}
		\label{eqn:transport-operator-derivative}
		\dv{λ} \trans_{γ(λ ← 0)} = -Γ(\dot γ(λ)) \circ \!\trans_{γ(λ ← 0)}
	\end{align}
	where the composition stands for the map $p \mapsto Γ|_{\trans_{γ(λ ← 0)} p}(\dot γ(λ))$ for any $p ∈ F_{γ(0)}$.
\end{corollary}
As we will see in \cref{sec:specialised-bundles}, for a vector bundle, the composition in \cref{eqn:transport-operator-derivative} is just matrix multiplication, and the resulting linear differential equation can be solved explicitly.



\subsection{Covariant differentiation}

We have seen that a choice of connection determines which tangent vectors in the bulk of a bundle are ``horizontal''.
This also defines the \textdef{covaraint derivative} as the rate of change of a section with respect to the connection's horizontal, in a coordinate free way.


To decompose vectors into horizontal and vertical components according to $H$, we define the linear \textdef{projection} and \textdef{rejection} maps
\begin{align}
	\label{eqn:proj-rej}
	\op{proj}_{H_p} : \TT_p ℱ → H_p
	\qqtext{and}
	\op{rej}_{H_p} : \TT_p ℱ → \VV_p ℱ
\end{align}
satisfying $\op{proj}_{H_p} 𝒖 + \op{rej}_{H_p} 𝒖 = 𝒖 ∈ \TT_pℱ$.


We expect a submanifold $f$ of $ℱ$ (e.g., a curve or section) to have vanishing covariant derivative if the tangent space is horizontal (i.e., $\dd f$ everywhere lies in $H$).
In other words, $f$ is covariantly constant if it is an integral manifold of the connection $H ⊆ \TTℱ$.
The covariant derivative then measures the failure of $f$ to be covariantly constant; i.e., the rate of change in $f$ relative to the connection's horizontal.

\begin{definition}
	\label{def:covariant-derivative-on-fibre-bundle}
	The \textdef{covariant derivative} $∇f : \TT_x ℳ → \VV_{f(x)} ℱ$ of a section $f ∈ \secs(ℱ)$ is defined by
	\begin{align}
		% ∇f &: \TT_p ℳ → \VV_{f(p)} ℱ
		\label{eqn:covder}
		∇f &= \op{rej}_H{} ∘ \dd f
	.\end{align}
\end{definition}
\Cref{eqn:covder} is written as a vertical-valued $1$-form.
Acting on a vector $𝒖 ∈ \TT_x ℳ$, this reads
\begin{align}
	∇_𝒖f ≔ ∇f(𝒖) = \op{rej}_{H_{f(x)}} \dd f(𝒖) ∈ \VV_{f(x)} ℱ
.\end{align}
This can be interpreted intuitively as follows.
The true gradient vector $\dd f(𝒖) ∈ \TT_{f(x)}ℱ$ of the section $f$ lies outside the fibre's tangent space $\VV_{f(x)}ℱ ⊆ \TT_{f(x)}ℱ$.
However, we do not want to measure horizontal motion --- just the \emph{effective} vertical change of $f(x)$ within the fibre induced by moving $x$ in the direction of $𝒖$.
Thus, the covariant derivative $∇_𝒖f ∈ \VV_{f(x)}ℱ$ is the vertical projection of $\dd f(𝒖)$ obtained by discarding its horizontal component, where `horizontal' is of course specified by the connection  (see \cref{fig:covariant-derivative}).

\begin{marginfigure}
	\includefigure{covariant-derivative}
	\caption{
		Covariant derivative of $f$ at $x ∈ ℳ$ along $𝒖 ∈ \TT_x ℳ$.
		The vector $-Γ_f(𝒖) = \dd π|_{H_p}^{-1}(𝒖)$ indicates horizontal motion under the connection $H$, and $∇_𝒖f$ is the derivative relative to this horizontal.
	}
	\label{fig:covariant-derivative}
\end{marginfigure}




\begin{lemma}
	\label{lem:covariant-derivative-rewritten}
	The covariant derivative as in \cref{def:covariant-derivative-on-fibre-bundle} is equivalent to
	\begin{align}
		% ∇f|_x = \dd f|_x - \dd π|_{H_{f(x)}}^{-1}
		∇f = \dd f + Γ_f
	,\end{align}
	where $Γ_f$ is the connection map as in \cref{def:connection-map}.
\end{lemma}
Acting on a vector $𝒖 ∈ \TT_x ℳ$, this reads $∇_𝒖 f = \dd f(𝒖) + Γ_f(𝒖) = 𝒖(f) - \dd π|_{H_{f(x)}}^{-1}(𝒖)$.
\begin{proof}
	By the defining property of the projection and rejection \eqref{eqn:proj-rej},
	\begin{align}
		\dd f = \op{rej}_H{} ∘ \dd f + \op{proj}_H{} ∘ \dd f
	\end{align}
	since $\dd f : \TT ℳ → \TT ℱ$ is linear.
	Therefore, rewriting \cref{def:covariant-derivative-on-fibre-bundle},
	\begin{align}
		∇f = \op{rej}_H{} ∘ \dd f
			= \dd f - \op{proj}_H{} ∘ \dd f
	.\end{align}
	Using \cref{eqn:lift-of-base-tangent-vectors}, the projection operator at $p ∈ ℱ$ can be written as
	\begin{align}
		\op{proj}_{H_p} = \dd π|_{H_p}^{-1} ∘ \dd π
	.\end{align}
	Finally, because $f : ℳ → ℱ$ is a section, $π ∘ f = \op{id}$ and so
	\begin{math}
		\dd π ∘ \dd f = \op{id}
	\end{math}
	by the chain rule (\cref{lem:differential-chain-rule}).
	Thus, acting on a base vector $𝒖 ∈ \TT_x ℳ$,
	\begin{align}
		∇_𝒖f
			&= \dd f(𝒖) - \dd π|_{H_{f(x)}}^{-1} ∘ \dd π ∘ \dd f (𝒖)
		\\	&= \dd f(𝒖) - \dd π|_{H_{f(x)}}^{-1} (𝒖)
	,\end{align}
	which by \cref{def:connection-map} is
	\begin{math}
		∇_𝒖f = \dd f(𝒖) + Γ_f(𝒖)
	.\end{math}
\end{proof}









\subsubsection{Coordinate representation}

At this point, we can find a coordinate representation of the covariant derivative in a general fibre bundle.
Suppose there is a local trivialisation where $\set{x^μ}$ are local coordinates on $ℳ$ and $\set{x^a}$ local coordinates of the fibres.
Let capital Latin indices $\set{x^A} = \set{x^μ, x^a}$ run over all coordinates.
A point $p ∈ ℱ$ in the bulk then has coordinates $(p^A) = (x^μ, x^a)$.
Vertical motion fixes $π(p)$ and hence leaves the base coordinates $x^μ$ unchanged.
(However, the fibre coordinates $x^a$ are \emph{not} required to be constant under horizontal motion.)

% The covariant derivative in \cref{lem:covariant-derivative-rewritten} acting on a section $f : ℳ → ℱ$ in the direction $𝒖 ∈ \TT_x ℳ$ has the full form
% \begin{align}
% 	∇_𝒖f = \dd f(𝒖) + Γ_f(𝒖)
% .\end{align}
% The connection map $Γ_f : \TTℳ → H ⊆ \TT ℱ$ is linear, so it is a $\TT ℱ$-valued $1$-form which we may write as a bitensor (i.e., matrix--valued) section $Γ_f : ℳ → \TT^*ℳ ⊗ \TT ℱ$.
% Without reference to $f$, we have $Γ : ℱ → \TT^*ℳ ⊗ \TT ℱ$ with $Γ_f(x) ≡ Γ(f(x))$.
% % The horizontal projection $\dd π|_{H_{f(x)}}^{-1} : \TT_xℳ → H_{f(x)} ⊆ \TT ℱ$ is a linear operator at each point in $ℱ$, so we may write it as a $\TT ℱ$-valued $1$-form.
The associated coordinate basis of $\TT ℱ$ is $(\∂_A) = (\∂_μ, \∂_a)$.
Recall that the connection map is a $\TT ℱ$-valued $1$-form $Γ|_p : \TT_{π(p)} → H_p$.
Thus, $Γ|_p(𝒖)$ is linear in $𝒖$, and we may define the components
\begin{align}
	\label{eqn:covariant-derivative-coords.1}
	Γ_μ|_p ≔ Γ|_p(\∂_μ) ∈ \TT ℱ
.\end{align}
We may define a $2$-index form $Γ_μ{}^A$ of the component functions by
\begin{align}
	Γ_μ|_p = Γ_μ{}^A|_p \, \∂_A ∈ \TT ℱ
.\end{align}
Note that this has both fibre and base components;
\begin{align}
	Γ_μ{}^A|_p \, \∂_A = Γ_μ{}^ν|_p \, \∂_ν + Γ_μ{}^a|_p \, \∂_a
.\end{align}
Thus, in the coordinate basis, the covariant derivative of $f$ in the direction $𝒖 ∈ \TT_xℳ$ is
\begin{align}
	\label{eqn:covariant-derivative-coords.3}
	∇_𝒖 f|_x ≡ u^μ ∇_μf^A|_x \∂_A = u^μ \qty(∂_μ f^A|_x + Γ_μ{}^a|_{f
	(x)}) \∂_A
.\end{align}
Note that this is a sum over coordinate vectors both in the fibre, $\∂_a$, and in the base $\∂_μ$.
However, since $∇_𝒖f ∈ \VVℱ$ is vertical, we expect its horizontal components $∇_𝒖 f^μ$ to vanish, leaving only vertical components.
This is verified by noting that
\begin{align}
	\label{eqn:covariant-derivative-coords.2}
	\dd π (\dd f (𝒖)) = 𝒖
	\qqtext{and}
	\dd π(-Γ_{f(x)}(𝒖)) ≡ \dd π (\dd π|_{H_{f(x)}}^{-1}(𝒖)) = 𝒖
\end{align}
are equal.
In effect, $\dd π$ projects onto components of the base,
\begin{align}
	\dd π(∂_μ f^A \∂_A) = ∂_μ f^ν \∂_ν
,\end{align}
and so \cref{eqn:covariant-derivative-coords.2} implies $∂_μ f^ν = -Γ_μ{}^ν$.
Hence, the base components of the two terms in \cref{eqn:covariant-derivative-coords.3} cancel, leaving only the fibre components,
\begin{align}
	∇_μf|_x ≡ ∇_μf^a|_x \; \∂_a = \qty(∂_μ f^a|_x + Γ^a{}_μ|_{f(x)}) \, \∂_a
.\end{align}


Therefore, when expressing the covariant derivative in coordinates with respect to some trivialisation of $ℱ$, the base components of $\dd f$ and $Γ_f$ can be suppressed, so that the upper indices run only over fibre components:
\begin{align}
	(∇_μ f)^a|_x = ∂_μ f^a|_x + Γ_μ{}^a |_{f(x)}
.\end{align}
% This calculation is performed from the point of view that $f : ℳ → ℱ$ is a section, in which case $\dd f = \dd f^μ \∂_μ + \dd f^a \∂_a$ is a $1$-form with values in the bulk tangent space $\TTℱ = \TTℳ ⊕ \VVℱ$.
% In practice, it is usual to have a (local) trivialisation where $f : ℳ → F$ is no longer given as a section, but as a map into a fixed space $F$.
% Under such a trivialisation, the derivative $\dd f = \dd f^a \∂_a$ no longer has no bulk components.
% Thus, in the presence of a trivialisation, \cref{lem:covariant-derivative-rewritten} should be written
% \begin{align}
% 	\label{eqn:covder-of-trivialised-field}
% 	∇f = \dd f + Γ^a|_f\∂_a
% ,\end{align}
% suppressing bulk components of $Γ_f$.
% Computations are usually performed after a choice of (local) trivialisation --- but to reiterate, the expression \eqref{eqn:covder-of-trivialised-field} where $f : ℳ → F$ is not independent of trivialisation, whereas the previous sense of covariant derivative of a section $f : ℳ → ℱ$ is purely geometrical.





\section{Structure Preserving Connections}

So far, we have treated connections in the setting of a general fibre bundle, in which fibres have the minimal structure of a smooth manifold.
We now consider connections and their associated covariant derivatives on vector bundles with more or less structure.

The transport operator over a path in a general fibre bundle is some invertible map between the two fibres rooted at the path's endpoints.
For a vector bundle, we require the transport operator to be a linear map.
Linearity allows the covariant derivative to be expressed as the limit of a difference, similar to the usual analytical definition of the derivative of a real function.
\begin{lemma}
	\label{lem:trans-and-covariant-der}
	If $γ : [0, 1] → ℳ$ is a path and $𝒖 ∈ \secs_γ(𝒱)$ is a smooth section of vectors defined on $γ$, then
	\begin{align}
		∇_{\dot{γ}(0)} 𝒖|_{γ(0)}
		&= \lim_{ε → 0} \frac{𝒖|_{γ(ε)} - \trans_{γ(ε ← 0)}𝒖|_{γ(0)}}{ε}
	\\	&= \dv{λ}\eval{\qty(𝒖|_{γ(λ)} - \trans_{γ(λ ← 0)}𝒖|_{γ(0)})}_{λ=0}
	.\end{align}
\end{lemma}
\begin{proof}
	Using \cref{lem:dtrans-is-Γ}, the right-hand side is equal to
	\begin{align}
		\dd 𝒖(\dot γ(0)) + Γ(\dot γ(0)) \trans_{γ(0←0)} 𝒖
		= (\dd 𝒖 + Γ 𝒖)(\dot γ(0)) = ∇_{\dot{γ}(0)} 𝒖
	,\end{align}
	since transport over a trivial path is the identity.
\end{proof}

For a linear connection, the components $Γ_μ{}^a|_p$ are linear with respect to the bulk vector $p ∈ 𝒱$, allowing the definition of the $3$-index components
\begin{align}
	Γ_μ{}^a{}_b ≔ Γ_μ{}^a|_{\ve_b}
\end{align}
where $\set{\ve_a}$ form a basis of the fibre vector space.

As well as linearity, vector bundles may be equipped with further structure, placing further constraints on the connection.
For example, equipped with a metric, and we may require the connection to be \emph{metric-compatible}.
Given an associative product, we may require parallel transport to respect multiplication, etcetera.
These requirements are all instances of \emph{functorality} of the transport operator.
In general, if $ϕ$ is a $k$-ary multilinear operator (e.g., an inner product, an associative product, etc.) then the transport operator \emph{preserves} $ϕ$ if
\begin{align}
	\label{eqn:functorality-of-trans}
	\trans_γ ϕ(\etc{a_\i},k) = ϕ(\trans_γ a_1, ..., \trans_γ a_k)
\end{align}
for values $a_i$ from the fibre at the start of $γ$.
How does this requirement for structure-preservation translate to the associated covariant derivative?
\begin{lemma}
	\label{lem:covder-of-anything}
	Let $ϕ$ be a multilinear $k$-ary operator on a vector bundle.
	If the transport operator preserves $ϕ$, then
	\begin{align}
		∇ ϕ(\etc{a_\i},k) = \dd ϕ(\etc{a_\i},k) + \sum_{i=1}^k ϕ(a_1, ..., Γ_{a_i}, ..., a_k)
	.\end{align}
\end{lemma}
\begin{proof}
	The covariant derivative along some curve $γ$, by \cref{lem:trans-and-covariant-der}, is
	\begin{align}
		&\phantom{{}={}}∇_{\dot γ(0)} ϕ(\etc{a_\i},k)
	% \\	&= \dv{λ} \eval{\qty( ϕ(\etc{a_\i},k)\big|_{γ(λ)} - \trans_{γ(λ ← 0)} ϕ(\etc{a_\i},k)|_{γ(0)})}_{λ=0}
	\\	&= \dd (ϕ(\etc{a_\i},k))(\dot γ(0)) - \dv{λ} ϕ(\trans_{γ(λ ← 0)} a_1, ..., \trans_{γ(λ ← 0)} a_k)\Big|_{λ=0}
	\\	&= \dd (ϕ(\etc{a_\i},k))(\dot γ(0)) - \sum_{i=1}^k ϕ\qty(a_1, ..., \dv{λ} \trans_{γ(λ ← 0)} a_i \Big|_{λ=0}, ..., a_k)
	\\	&= \dd (ϕ(\etc{a_\i},k))(\dot γ(0)) + \sum_{i=1}^k ϕ(a_1, ..., Γ_{a_i}(\dot γ(0)), ..., a_k)
	.\end{align}
	Removing reference to the arbitrary direction of derivation $\dot γ(0)$ yields the result.
\end{proof}

Taking $ϕ : A × A → A$ to be the associative product of the algebra bundle $\fibrebundle A 𝒜 ℳ$, we recover the covariant product rule.
\begin{corollary}
	On an algebra bundle,
	\begin{align}
		∇_𝒖(a⊛b) = \dd(a⊛b)(𝒖) + Γ_a(𝒖)⊛b + a⊛Γ_b(𝒖)
	.\end{align}
\end{corollary}
This corollary implies that a connection respecting an associative product is determined completely determined by the connection on the subbundle of grade-$1$ vectors $𝒱 ⊆ 𝒜$.


For instance, given a connection on a vector bundle $𝒱$, we have the familiar formula
\begin{align}
	% ∇(𝒖⊗𝒗) &= \dd(𝒖⊗𝒗) + Γ_𝒖⊗𝒗 + 𝒖⊗Γ_𝒗
	∇_μu^av^b &= ∂_μ(u^a v^b) + Γ_μ{}^a{}_c u^c v^b + u^a Γ_μ{}^b{}_c v^c
.\end{align}
Given a metric to raise and lower indices, a connection defined on $𝒱$ extends to general type-$(p, q)$ tensors,
\begin{samepage}
\begin{fullwidth}
\begin{align}
	∇_μT^{a_1\cdots a_p}{}_{b_1\cdots b_q}
	= ∂_μT^{a_1\cdots a_p}{}_{b_1\cdots b_q}
	+ \sum_{i = 1}^p Γ_μ{}^{a_i}{}_c T^{a_1\cdots c\cdots a_p}{}_{b_1\cdots b_q}
	- \sum_{j = 1}^q Γ_μ{}^c{}_{b_j} T^{a_1\cdots a_p}{}_{b_1\cdots c\cdots b_q}
.\end{align}
\end{fullwidth}
\end{samepage}




\begin{corollary}
	\label{col:metric-compat-Γ-antisym}
	% If a linear connection preserves an inner product $η_{ab} = \ip{\ve_a, \ve_b}$, then
	If a linear connection preserves an inner product $\ip{\phantom{𝒖}, \phantom{𝒗}}$, then
	\begin{align}
		\label{eqn:covder-of-ip}
		∇\ip{𝒖, 𝒗} = \dd\ip{𝒖, 𝒗} + \ip{Γ_𝒖, 𝒗} + \ip{𝒖, Γ_𝒗}
	.\end{align}
	Furthermore, this implies $Γ_{μab} = -Γ_{μba}$, where $Γ_{μab} ≔ η_{ac}Γ_μ{}^c{}_b$ and $η_{ab} = \ip{\ve_a, \ve_b}$.
\end{corollary}
\begin{proof}
	\Cref{eqn:covder-of-ip} follows from \Cref{lem:covder-of-anything} in the case $φ(𝒖, 𝒗) = \ip{𝒖, 𝒗}$.
	Since $\ip{𝒖, 𝒗}$ is a scalar, we simultaneously have $∇\ip{𝒖, 𝒗} = \dd\ip{𝒖, 𝒗}$, and hence
	\begin{align}
		% \label{eqn:Γ-inner-prod-symmetry}
		\ip{Γ_𝒖, 𝒗} = -\ip{𝒖, Γ_𝒗}
	.\end{align}
	Writing this in components, we have
	\begin{align}
		η_{cb} Γ_μ{}^c{}_a u^a v^b &= -η_{ac} u^a Γ_μ{}^c{}_b v^b
	&	&\implies
	&	η_{bc} Γ_μ{}^c{}_a &= -η_{ac} Γ_μ{}^c{}_b
	,\end{align}
	implying $Γ_{μba} = -Γ_{μab}$ where the metric $η_{ab}$ is used to lower indices.
\end{proof}


