\chapter{Spacetime as a Manifold}



The investigations of \cref{part:1} were restricted to \emph{flat geometries}.
Special relativity models spacetime as a homogeneous, isotropic Minkowski vector space.
However, in the general theory of relativity, spacetime no longer has an intrinsic vector space structure, instead exhibiting curvature to incorporate gravity.
The mathematical demands of curvature call for \emph{differential geometry with smooth manifolds}.


Here we give a condensed, pragmatic definition of a manifold as a space which locally looks like $\RR^n$ upon which one can do calculus.\sidenote{
	See \cite[Â§1]{lee2012diffgeo} for a more rigorous definition in terms of charts and atlases.
}
\begin{definition}
	\label{def:manifold}
	A \textdef{manifold $â„³$ of dimension $n$} is a nice\sidenote{
		Here, a `nice' topological space is:
		\begin{enumerate}[leftmargin=1.3em]
		\ragged
		\item \emph{Hausdorff:} each distinct pair of points have mutually disjoint neighbourhoods (so it is ``not too small''); and
		\item \emph{second-countable:} there exists a countable base (so it is ``not too large'').
		\end{enumerate}
	} topological space which is locally Euclidean, meaning for every $x âˆˆ â„³$ there exists a neighbourhood $x âˆˆ \manif U \subseteq â„³$ and subset $U \subseteq \RR^n$ with a homeomorphism\sidenote{continuous bijection} $Ï† : \manif U \biject U$, called a \textdef{coordinate chart}, between them.

	% Transition functions are the  map $Ï†âˆ˜Ï•^{-1} : U \biject V$ for two homeomorphisms $Ï• : \manif U \biject U$ and $Ï† : \manif V \biject V$.
	A \textdef{smooth manifold} is one for which all transition functions
	\begin{math}
		Ï• \circ Ï†^{-1} : Ï†^{-1}(ğ’° âˆ© ğ’±) \biject Ï•^{-1}(ğ’° âˆ© ğ’±)
	\end{math}
	between coordinate charts $Ï† : ğ’° \biject U$ and $Ï• : ğ’± \biject V$ are smooth (as maps between subsets of $\RR^n$).
\end{definition}


Essentially, \cref{def:manifold} is designed to guarantee that well-behaved local coordinates always exist.
A coordinate chart $Ï† : ğ’° â†’ \RR^n$ defines coordinate scalars $\set{x^i} â‰¡ \set{\etc{x^\i},n}$ by $x^i = \op{pr}_i \circ Ï†$.
These are called \textdef{global} if $ğ’° = â„³$ is the entire manifold, and \textdef{local} if $ğ’° âŠ‚ â„³$.
We often call a point $x âˆˆ â„³$ by the same symbol as the coordinates $x^i : â„³ â†’ \RR$ without the index --- but these objects are not strictly interchangeable.

A structure-preserving map between manifolds is a continuous function; and between smooth manifolds, a differentiable function.
For brevity, we assume the definitions that follow take place in the category of manifolds, and assume \emph{all maps between manifolds to be continuous.}
Furthermore, if the qualifier ``smooth'' is present, we operate in the category of smooth manifolds and such maps are assumed differentiable.
Thus, the coordinate scalars $x^i$ of \cref{def:coord-chart} are continuous functions, and are differentiable if the manifold is smooth, etcetera.



\section{Derivatives of Smooth Maps}
\label{sec:differential}

Manifolds themselves do not have inherent vector space structure.
However, being locally Euclidean means there is a real vector space naturally associated to each point:
\begin{definition}
	\label{def:tangent-space-bundle}
	The \textdef{tangent space $\TT_xâ„³$} of a manifold at a point $x âˆˆ â„³$ is the vector space of derivations on smooth functions at that point.\sidenote{
		More precisely, each vector $ğ’– âˆˆ \TT_xâ„³$ is an equivalence class of derivatives evaluated at the point $x$, where different derivations which agree at the point $x$ are identified.
	}
	In any local coordinate chart $\set{x^i}_{i=1}^n$ of $â„³$ containing $x$, this is
	\begin{align}
		\TT_xâ„³ â‰… \spanof{\eval{\pdv{x^i}}_x}_{i=1}^n
	.\end{align}
	The \textdef{tangent bundle $\TTâ„³$} is the disjoint union of all tangent spaces
	\begin{math}
		\TTâ„³ = \set{(x, ğ’–) | x âˆˆ â„³, ğ’– âˆˆ \TT_xâ„³}
	\end{math}
	equipped with an appropriate manifold topology.\sidenote{
		Specifically, the topology of a fibre bundle (see \cref{cha:fibre-bundles}).
	}
\end{definition}

Given a smooth manifold, its tangent bundle comes for free: its construction is canonical.
Similarly, given a smooth function $f$ between manifolds, there is a kind of `tangent' or derivative $\dd f$ which also comes for free.
In the same way that the tangent bundle consists of `directional derivatives of points' in the manifold (i.e., tangent vectors), the differential $\dd f$ encodes the directional derivatives of $f$ at all points in the domain.\sidenote{
	This parallel is precise: $\dd$ and $\TT$ form a functor in category of smooth manifolds, sending
	\begin{math}
		f: â„³ â†’ ğ’©
	\end{math}
	to
	\begin{math}
		\dd f: \TTâ„³ â†’ \TTğ’©
	.\end{math}
	Some authors use the symbol $\TT$ for both.
}

\begin{definition}
	\label{def:differential}
	The \textdef{differential} or \textdef{push forward} of a map $f : â„³ \to \manif N$ between smooth manifolds is the map $\dd f : \TTâ„³ \to \TT\manif N$ defined by
	\begin{align}
		\label{eqn:differential}
		\qty(\dd f(ğ’–))(Ï†)\big|_{f(x)} â‰” ğ’–(Ï† \circ f)\big|_x
	\end{align}
	for each point $x âˆˆ â„³$, vector $ğ’– âˆˆ \TT_xâ„³$ and smooth function $Ï† : \manif N â†’ \RR$.
\end{definition}

\todo{Consider notation ovrehaul: $\dd f âŸ¼ f_*$}

In the definition above, vectors act on scalar functions as derivations; hence $\dd f(ğ’–)$ is defined by its action on an arbitrary scalar field.
Intuitively, if $ğ’– âˆˆ \TT_xâ„³$ is a vector at a point $x âˆˆ â„³$, then the vector $\dd f(ğ’–) âˆˆ \TT_{f(x)}\manif N$ is interpreted as the derivative of $f(x) âˆˆ \manif N$ in the direction $ğ’–$.


Note that $\dd f(ğ’–)$ may not be defined everywhere on $ğ’©$.
If $ğ’–|_x âˆˆ \TT_xâ„³$ is now a family of vectors defined everywhere over $x âˆˆ â„³$, then $\dd f(ğ’–)|_{f(x)} = \dd f(ğ’–|_x)$ is defined only at each $f(x) âˆˆ \manif N$.
This means that if $f$ fails to be surjective, then $\dd f(ğ’–)$ is not defined at those points lying outside the image $f(â„³) \subset \manif N$.
Likewise, if $f$ fails to be injective at a point $y âˆˆ \manif N$, then $\dd f(ğ’–)$ is \emph{multivalued} at $y$.
Only if $f$ is bijective does $\dd f(ğ’–)|_y$ have a single value everywhere.



The meaning of \cref{def:differential} may become clearer when expressed in coordinates.
Suppose $\set{x^i}$ is a local chart of $â„³$ containing a point $x âˆˆ â„³$, and $\set{y^j}$ a chart of $\manif N$ containing $f(x)$.
With associated coordinate bases
\begin{math}
	\TT_xâ„³ = \spanof[\big]{\pdv{x^i}}
	\text{ and }
	\TT_{f(x)}\manif N = \spanof[\big]{\pdv{y^j}}
,\end{math}
\cref{eqn:differential} takes the full form:
\begin{align}%autonum: was align*
	\qty[\dd f\qty(u^i\pdv{x^i})]^j \eval{\pdv{Ï†}{y^j}}_{f(x)} &= u^i\eval{\pdv{Ï† \circ  f}{x^i}}_x
	= u^i\eval{\pdv{y^j \circ  f}{x^i}}_x \eval{\pdv{Ï†}{y^j}}_{f(x)}
\end{align}%autonum: was align*
The first equality is the definition itself, and the second is an application of the chain rule.
Since $Ï†$ is an arbitrary smooth function, this holds as an equation of differential operators, and we may remove reference to any particular $Ï†$ on which the operators act.
\begin{align}
	\label{eqn:differntial-coordinate-form.step1}
	\qty[\dd f\qty(u^i âˆ‚_i)]^j\eval{âˆ‚_j}_{f(x)} = u^i \eval{\pdv{f^j}{x^i}}_x \eval{âˆ‚_j}_{f(x)}
\end{align}
We reduce typographical complexity with $âˆ‚_i â‰” \pdv{x^i}$ and $âˆ‚_j â‰” \pdv{y^j}$, being aware that these are basis vectors of \emph{different} tangent spaces.
We also abbreviate $f^j â‰” y^j \circ  f$ so that $f^j(x)$ is the $j$th coordinate of the point $f(x)$ in the $y^j$ chart.
Thus, the coordinate form of $\dd f$ is precisely the Jacobian matrix,
\begin{align}
	[\dd f(âˆ‚_i)]^j = \pdv{f^j}{x^i}
.\end{align}
% The point $x$ being arbitrary, we have also suppressed the evaluation signs, with the understanding that the Jacobian maps vectors at $x$ to vectors at $f(x)$.

Turning back to \cref{eqn:differntial-coordinate-form.step1}, the partial derivatives $\pdv*{x^i}$ act on smooth functions $f^j : â„³ â†’ \RR$ to produce smooth functions $\pdv*{f^j}{x^i} : â„³ â†’ \RR$.
However, since we have an intuitive picture of the directional derivative of the {point} $f(x)$ as $x$ is displaced, it is useful to formally extend the notation $\pdv*{x^i}$ so that we may write the partial derivative of a mapping of \emph{points} $f : â„³ â†’ \manif N$.
\begin{marginfigure}
	\centering
	\includefigure[0.8\columnwidth]{derivative-of-point}
	\caption{
		The derivative of the point $x âˆˆ â„³$ along the direction of increasing $x^Î¼$ is a tangent vector $âˆ‚_Î¼x âˆˆ \TT_xâ„³$.
		The vector is tangent to the dotted line, along which all coordinates but $x^Î¼$ are constant. 
	}
	\label{fig:derivative-of-point}
\end{marginfigure}
That is, $\pdv*{f}{x^i}\big|_x âˆˆ \TT_{f(x)}\manif N$ is the infinitesimal displacement vector of $f(x) âˆˆ \manif N$ caused by an infinitesimal variation in the $i$th coordinate of the source point $x$.
This is the meaning of the last term in \cref{eqn:differntial-coordinate-form.step1}, so the desired shorthand is
\begin{align}
	\label{eqn:pdv-of-map-notation}
	\pdv{f}{x^i} â‰” \pdv{f^j}{x^i}âˆ‚_j
	\qqtext{or, in full,}
	\eval{\pdv{f}{x^i}}_x â‰” \eval{\pdv{y^i \circ  f}{x^i}}_x \eval{\pdv{y^j}}_{f(x)}
.\end{align}
With this, \cref{eqn:differntial-coordinate-form.step1} may be written as
\begin{align}
	\label{eqn:differential-succinct}
	\dd f(ğ’–) = u^i\pdv{f}{x^i}
.\end{align}
This condensed notation is useful, despite being implicit: take for instance the coordinate functions $x^i : â„³ â†’ \RR$ regarded as maps between manifolds.
Then \cref{eqn:differential-succinct} yields the defining property of the coordinate dual basis,
\begin{align}
	\dd x^i(âˆ‚_j) = \pdv{x^i}{x^j} = Î´^i_j
,\end{align}
where we have identified the one-dimensional vector space $\TT_{x^i}\RR$ with $\RR$ itself.





\begin{lemma}[Chain rule]
	\label{lem:differential-chain-rule}
	If $f\circ g$ is a composition of maps between smooth manifolds, then
	\begin{math}
		\dd (f \circ g) = \dd f \circ \dd g
	.\end{math}
\end{lemma}
\begin{proof}
	Acting on a vector $ğ’–$ and applying the forward-pushed vector to a scalar field $Ï†$, we obtain
	\begin{align}
		(\dd (f \circ g)(ğ’–))(Ï†)
		&= ğ’–(Ï† \circ f \circ g)
	\\	= ğ’–((Ï† \circ f) \circ g)
		&= (\dd g (ğ’–))(Ï† \circ f)
		= \dd f(\dd g (ğ’–))(Ï†)
	\end{align}
	by three applications of \cref{def:differential}.
\end{proof}



\section{Fibre Bundles}
\label{cha:fibre-bundles}


For flat geometries, we have modelled ``fields'' as functions into a fixed vector space, e.g., the electromagnetic bivector field $F : \RR^{1+3} â†’ \EA[2]{\RR^4}$.
Such a map makes no distinction between the vector space $\EA[2]{\RR^4}$ evaluated at one point in spacetime and another.
This would suggest that all values of a field are directly comparable, making expressions like ``$F(x) + F(y)$'' meaningful for different points $x$ and $y$.
However, these kinds of expressions are ill-defined for general smooth manifolds, since they depend on the way tangent spaces are identified.
(Or, as will be defined, on the \emph{choice of trivialisation of the tangent bundle}.)
Instead, it is beneficial to distinguish between codomains \emph{at each point} in the domain, and treat $F(x)$ and $F(y)$ as belonging to different spaces entirely.

\begin{marginfigure}
	\centering
	\includefigure[0.8\columnwidth]{sphere}
	\caption{
		Vectors in different tangent spaces, and their basis-dependent representation as an $\RR^2$-valued field.
	}
	\label{fig:ball}
\end{marginfigure}

A concrete example of why this is necessary is a fluid flow on the sphere $\Sphere^2$.
% the instantaneous fluid velocity at a point is a vector lying in the sphere's tangent plane at that point.
% If the fluid flow is given as a field $f : \Sphere^2 â†’ \RR^2$, then any two velocity vectors exist in the ``same'' space, though \emph{geometrically} they do not (\cref{fig:ball}).
Any representation of the fluid flow as a field $f : \Sphere^2 â†’ \RR^2$ is only defined after the fixed codomain $\RR^2$ is identified with each geometrically--distinct tangent plane on the sphere --- and this choice is not canonical.
Even worse, it is not even possible to do this smoothly for the sphere\sidenote{
	Consider a constant non-zero vector field $f(x) = ğ’– âˆˆ \RR^2$.
	If the tangent bundle is trivialised smoothly, then $f$ represents a fluid flow which is smooth and nowhere vanishing.
	But this is forbidden by the hairy ball theorem, which states that any smooth vector field on the sphere must vanish at some point.
} (or more generally, for any \emph{non-parallizable} manifold).
A basis-independent representation of $f$ requires treating each tangent space as distinct.

In doing this, we are led to the tangent \emph{bundle} $\TT \Sphere^2$, where all the tangent planes of $\Sphere^2$ are collected in a disjoint union.
The vector field on the sphere now becomes a \emph{section} of $\TT \Sphere^2$, which is a map $f : \Sphere^2 â†’ \TT \Sphere^2$ such that $f(x)$ belongs to the tangent space at $x$.
No longer is the expression $f(x) + f(y)$ well-defined.

The tangent bundle is a special case of a \emph{fibre bundle}, which is a manifold consisting of disjoint copies of a space (called the \emph{fibre}) taken at every point in a base manifold.




\begin{definition}
	\label{def:fibre-bundle}
	A \textdef{fibre bundle} $\fibrebundle[Ï€] F â„± â„³$ consists of
	\begin{itemize}
		% \item a \textdef{fibre manifold} $A$;
		\item a \textdef{bulk manifold} $â„±$;
		\item a \textdef{base manifold} $â„³$; and
		\item a surjection $Ï€ : â„± â†’ â„³$, the \textdef{projection}, such that
		\item the inverse image $F_x â‰” Ï€^{-1}(x)$ of a base point $x âˆˆ â„³$ is homeomorphic to the \textdef{fibre} $F$.
	\end{itemize}
\end{definition}

\begin{marginfigure}
	\includefigure[\columnwidth]{fibre-bundle}
	\caption{
		(a) A field $f : â„³ â†’ F$, where values at any point can be compared.
		(b) A fibre bundle $\fibrebundle F â„± â„³$ with a section $f âˆˆ \secs(â„±)$ whose individual fibres $F$ are labelled by base point in $â„³$.
	}
\end{marginfigure}

\Cref{def:fibre-bundle} takes place in the category of manifolds, so the projection $Ï€ : â„± â†’ â„³$ is continuous.
In a \textdef{smooth fibre bundle}, the projection $Ï€$ is differentiable and $F$, $â„±$ and $â„³$ are all smooth manifolds.

Many different kinds of fibre bundle may be considered by giving $F$ more structure.
For example,
\begin{itemize}
	\item a \textdef{vector bundle} is one where the fibre is a vector space;
	\item a \textdef{principal bundle} is one where the fibre is a group (usually a Lie group); and
	\item an \textdef{algebra bundle} is a vector bundle where each fibre is equipped with a (smoothly varying) algebraic product; and so on.
\end{itemize}


\subsubsection{Trivialisations and coordinates}

The bulk $â„±$ of a fibre bundle $\fibrebundle F â„± â„³$ is itself a manifold (of dimension $\dim â„± = \dim â„³ + \dim F$) so we may always prescribe local coordinates on $â„±$.
If we already have coordinates $\set{x^Î¼}$ on the base $â„³$ and $\set{x^a}$ on a fibre $F$, then we often want to use the same coordinates $\set{x^Î¼, x^a}$ to describe the bulk $â„±$.
This first requires a way of continuously splitting the bulk $â„± â†’ â„³ Ã— F$ into its base and fibre ``components'', in a way which respects the fibred structure of the bundle.
This splitting is known as a \emph{trivialisation} of the bundle.
\begin{definition}
	A \textdef{trivialisation} of a fibre bundle $\fibrebundle[Ï€] F â„± â„³$ is a homeomorphism $Ï† : â„± â†’ â„³ Ã— F$ such that
	\begin{math}
		\op{pr}_1 âˆ˜ Ï† = Ï€
	.\end{math}
\end{definition}
It is not always possible to find a global trivialisation of a fibre bundle, and if it is, the bundle is called a \textdef{trivial fibre bundle} and there may be different possible trivialisations.\sidenote{
	A simple non-trivial fibre bundle is the MÃ¶bius strip, viewed as a bundle over the circle $\Sphere^1$ with fibre $[0, 1]$.
	The trivial bundle $\Sphere^1 Ã— [0, 1]$ describes a strip without a twist.
}

However, it is always possible trivialise \emph{locally}.
That is, for any base point $x âˆˆ â„³$, there exists a neighbourhood $x âˆˆ U âŠ† â„³$ for which the subbundle $\fibrebundle[Ï€] F {Ï€^{-1}(U)} U$ admits a trivialisation.
Hence, it is always possible to assign \emph{local} coordinates $\set{x^Î¼, x^a}$ to the bulk of a fibre bundle, where $x^Î¼$ are coordinates on the base and $x^a$ are coordinates on the fibres, such that $x^Î¼$ do not vary along the fibres.
In other words, local trivialisations are equivalent to local coordinates.







\subsubsection{Sections of fibre bundles}


In the language of fibre bundles, a field $f : â„³ â†’ F$ is replaced by a \emph{section}, which is a ``vertical'' map $f : â„³ â†’ â„±$ into the bulk $â„±$ such that $f(x) âˆˆ F_x$.
\begin{definition}
	A \textdef{section} $f$ of a fibre bundle $\fibrebundle[Ï€] F â„± â„³$ is a right-inverse of $Ï€$.
	The space of sections is denoted
	\begin{align}
		\secs(â„±) = \set{f : â„³ â†’ â„± | Ï€âˆ˜f = \op{id}}
	.\end{align}
\end{definition}
(Again, sections $f âˆˆ \secs(â„±)$ are assumed continuous, and \textdef{smooth sections} are sections of smooth fibre bundles for which $f$ is smooth.)


For example, the instantaneous fluid velocity $ğ’–$ on a sphere $\Sphere^2$ is a section $ğ’– âˆˆ \secs(\TT\Sphere^2)$ of the tangent bundle, with a single vector at $x âˆˆ \Sphere^2$ is denoted $ğ’–|_x âˆˆ \TT_x\Sphere^2$.




\subsection{Exterior differential forms on manifolds}

\Cref{sec:exterior-forms} defined exterior forms $\forms(V, A)$ as alternating multilinear maps from the fixed vector space $\TA{V}$ into $A$.
% Similarly, the differential of a map $\dd f : \TT â„³ â†’ \TT ğ’©$ is an object that takes a vector argument $ğ’– âˆˆ \TTâ„³$ --- almost like an exterior $1$-form, except that the entire tangent bundle $\TT â„³$ is not itself a vector space.
Exterior forms can be extended to exterior \emph{differential} forms, existing on manifolds.
Such objects define alternating maps from $\TA{(\TT_x â„³)}$ for each point $x âˆˆ â„³$ in a smooth way.

Although the entire bundle $\TT â„³$ is not a vector space, the space of vector sections $\secs(\TT â„³)$ is.
Hence, we may consider the space
\begin{math}
	\forms(â„³, â„°) â‰” \forms(\secs(\TT â„³), \secs(â„°))
\end{math}
of $\secs(â„°)$-valued exterior forms, for some vector bundle $\fibrebundle â„³ {â„°} V$.
As with exterior forms, the wedge product is defined as in \cref{eqn:wedge-of-forms}, only now acting pointwise on \emph{sections} of exterior forms.

An element of $\forms[k](â„³, â„°)$ is called an \textdef{$â„°$-valued exterior differential $k$-form}, where `differential' distinguishes it as an object on a manifold.
For scalar--valued exterior differential forms, we take $â„°$ to be the trivial line bundle $â„³ Ã— \RR$.
We sometimes use the notation $\df Î±$ to emphasise that $Î±$ is an exterior differential form.


\subsubsection{The exterior derivative revisited}

For exterior \emph{differential} forms $\forms(â„³, ğ’œ)$, the exterior derivative is defined in the same way as in \cref{sec:exterior-derivative-forms} for exterior forms $\forms(V, A)$ --- except it must now be made explicit that only the form itself is differentiated, not its vector arguments.
Indeed, since the exterior derivative of a $k$-form $Ï†$ is defined independently of vector arguments, it cannot depend on their derivatives.
Informally, we may write
\begin{align}
	\label{eqn:exder.1}
	(\dd Ï†)(\etc[0]{ğ’–_\i}âŠ—k)
	&= \sum_{i=0}^k (-1)^k (ğ’–_i(Ï†))(\etcskip[0]{ğ’–_\i}âŠ—ik)
\end{align}
where $ğ’–_i(Ï†)$ means that only $Ï†$ is differentiated, not other vector sections.
Formally, vectors may only act as derivatives on scalars and not forms, so this may be rewritten as
\begin{fullwidth}
\begin{align}
	(\dd Ï†)(\etc[0]{ğ’–_\i}âŠ—k)
	&= \sum_{i=0}^k (-1)^k ğ’–_i(Ï†(\etcskip[0]{ğ’–_\i}âŠ—ik))
\\	&- \sum_{j < i} (-1)^{i + j} Ï†([ğ’–_i, ğ’–_j] âŠ— ğ’–_0 âŠ— â‹¯ âŠ— \widehat{ğ’–_i} âŠ— â‹¯ âŠ— \widehat{ğ’–_j} âŠ— â‹¯ âŠ— ğ’–_k)
	\label{eqn:exder.2}
.\end{align}
\end{fullwidth}
The first term involves scalar derivatives of $Ï†(\etcskip[0]{ğ’–_\i}âŠ—ik)$, and the second cancels out unwanted terms involving derivatives of $ğ’–_j$.
A useful special case is the exterior derivative of a $1$-form, which reads
\begin{align}
	(\dd Ï†)(ğ’–, ğ’—) = ğ’–(Ï†(ğ’—)) - ğ’—(Ï†(ğ’–)) - Ï†([ğ’–, ğ’—])
.\end{align}


\subsection{Geometric Algebra Bundles}

As for exterior differential forms, a geometric algebra $\GA(V, Î·)$ may be defined on a manifold by taking $V$ to be the vector space of \emph{sections} $\secs(ğ’±)$ for some vector bundle $ğ’±$.
We write
\begin{math}
	\GA(â„°, Î·) â‰” \GA(\secs(â„°), Î·)
\end{math}
to indicate this construction.


\section{Lie Differentiation}

In general, the derivative of a section of a fibre bundle is not defined, because there is no way of comparing fibres without additional structure (such as a \emph{connection}; see \cref{cha:connections}).
For some kinds of object, however, it is possible to define transport between fibres using the \emph{flow} of a tangent vector section.
We call objects for which this is possible \textdef{flowable}.

Thus, the value of a flowable object at a point $x$ to may be directly compared to its value at some other point $y$ by flowing the $y$-value back to the $x$-fibre.
This enables the definition of a kind of derivative with respect to the flow --- a construction called the \emph{Lie derivative}.

% However, tangent vectors can be transported by differentials of smooth maps.
% In particular, a vector section $ğ’— âˆˆ \secs(\TT â„³)$ can be transported along the \emph{flow} of another section $ğ’–$.
% Thus, the value of $ğ’—$ at a point $x$ can be compared to its value at another point $y$ by ``flowing $ğ’—|_y$ backwards'' to the original point $x$.
% This construction is called the \emph{Lie derivative} of $ğ’—$.

\begin{definition}
	\label{def:flow}
	The \textdef{flow} of $ğ’– âˆˆ \secs(\TT â„³)$ is the diffeomorphism $\flow{ğ’–}{t} : â„³ â†’ â„³$ satisfying
	\begin{align}
		\dv{t}\eval{\flow{ğ’–}{t}(x)}_y = ğ’–|_y
	\end{align}
	for all values of the parameter $t$.
\end{definition}
\begin{definition}
	\label{def:lieder}
	The \textdef{Lie derivative} $\lie_ğ’– A$ of a flowable object $A$ along a tangent section $ğ’– âˆˆ \secs(\TT â„³)$ is
	\begin{align}
		\lie_ğ’– A â‰” \dv{t} \eval{ \flow{ğ’–}{-t} A \, }_{t = 0}
	.\end{align}
\end{definition}

Scalar sections $f : â„³ â†’ \RR$ are flowable by defining
\begin{math}
	\flow{ğ’–}{t} f â‰” e^{-tğ’–} f
.\end{math}
For example, in one dimension, $\flow{âˆ‚_x}{t}f = e^{-tâˆ‚_x}f(x) = f(x - t)$ is the Taylor series of $f$ translated by $+t$.
Tangent vectors $ğ’— âˆˆ \secs(\TT â„³)$ are also flowable, using the differential of a flow
\begin{math}
	\dd(\flow{ğ’–}{t}) : \TT â„³ â†’ \TT â„³
.\end{math}
Thus, we also define the flow of tangent vectors
\begin{align}
	\flow{ğ’–}{t} ğ’— â‰” \dd(\flow{ğ’–}{t})(ğ’—)
\end{align}
in terms of the flow of points.\sidenote{
	Risking overloaded notation, $\flow{ğ’–}{t}$ on the left-hand side acts on vectors, while on the right-hand side on points.
}
Other flowable objects include structures built from the tangent bundle, e.g., tangent tensors $\TA{(\TT â„³)}$ or multivectors $\GA(\TT â„³, Î·)$.
\todo{This is the first appearance of $\GA(\TT â„³, Î·)$...}

% \begin{align}
% 	e^{t ğ’–} f(x^Î¼) = \sum_{n=0}^âˆ \frac{(t u^Î½)^n}{n!} âˆ‚_Î½^n f(x^Î¼) = f(x^Î¼ + t u^Î¼)
% \end{align}
% \begin{align}
% 	\flow{ğ’–}{t} f(x) = e^{-tğ’–} f
% \end{align}



\begin{lemma}
	The Lie derivative on scalars is
	\begin{math}
		\lie_ğ’– f = ğ’–(f)
	,\end{math}
	and on tangent vectors is the Lie bracket,
	\begin{math}
		\lie_ğ’– ğ’— = [ğ’–, ğ’—] â‰” ğ’– âˆ˜ ğ’— - ğ’— âˆ˜ ğ’–
	.\end{math}
\end{lemma}
\begin{proof}
	For scalars, the result follows from
	\begin{math}
		\lie_ğ’– f = \dv{t}\eval{e^{-tğ’–} f \, }_{t=0} = ğ’–(f)
	.\end{math}

	For tangent vectors, unpacking \cref{def:lieder} for a vector argument, and then using \cref{def:differential} to rewrite the pushforward, we have
	\begin{align}
		(\lie_ğ’– ğ’—)f|_x
		&= \dv{t}\eval{\dd(\flow{ğ’–}{-t})\qty(ğ’—|_{\flow{ğ’–}{t}(x)})f \, }_{t=0}
		= \dv{t}\eval{ğ’—(f âˆ˜ \flow{ğ’–}{-t})\big|_{\flow{ğ’–}{t}(x)} \, }_{t=0}
	.\end{align}
	By the product rule over the two appearances of $t$, this is equal to
	\begin{align}
		\label{eqn:lieder-is-bracket.1}
		\eval{ğ’—\qty(\dv{t}\eval{f âˆ˜ \flow{ğ’–}{-t}}_{t=0})}_x + \dv{t}\eval{ğ’—(f)\big|_{\flow{ğ’–}{t}(x)} \, }_{t=0}
	.\end{align}
	Using the chain rule (\cref{lem:differential-chain-rule}) and \cref{def:flow}, we have
	\begin{math}
		\dv{t}\eval{g âˆ˜ \flow{ğ’–}{t} \, }_{t=0} = \dd g(ğ’–) = ğ’–(g)
	.\end{math}
	Taking $g$ to be $f$ and $ğ’—(f)$ for the left- and right-hand terms of \cref{eqn:lieder-is-bracket.1} respectively, we find
	\begin{align}
		(\lie_ğ’– ğ’—)f = -ğ’—(ğ’–(f)) + ğ’–(ğ’—(f))
	\end{align}
	which is the lie bracket acting on the arbitrary scalar section $f$.
\end{proof}

\subsection{On tensors and differential forms}

By requiring $\lie_ğ’–$ to be a derivation, we deduce from
\begin{math}
	\lie_ğ’– \, Ï†(ğ’—) = (\lie_ğ’– Ï†)(ğ’—) + Ï†(\lie_ğ’– ğ’—)	
\end{math}
the form of the Lie derivative on a covector $Ï†$.
Continuing in this way, it follows that the Lie derivative of a general tensor $T = T^{Î¼_1...Î¼_p}{}_{Î½_1...Î½_q} \etc{\ve_{Î¼_\i}}âŠ—p âŠ— \etc{\ve^{Î½_\i}}âŠ—q$ is
\begin{fullwidth}
\begin{align}
	\lie_ğ’– T^{Î¼_1...Î¼_p}{}_{Î½_1...Î½_q}
	= u^Î» âˆ‚_Î» T^{Î¼_1...Î¼_p}{}_{Î½_1...Î½_q}
	- \sum_{i=1}^p T^{Î¼_1...Î»...Î¼_p}{}_{Î½_1...Î½_q} âˆ‚_Î» u^{Î¼_i}
	+ \sum_{i=1}^q T^{Î¼_1...Î¼_p}{}_{Î½_1...Î»...Î½_q} âˆ‚_{Î½_i} u^Î»
.\end{align}
\end{fullwidth}
This sets the stage for how much simpler Lie derivative formulae are on exterior differential forms and multivectors.

On exterior differential forms $\df Ï†$, the Lie derivative may be expressed in a basis-free fashion using Cartan's ``magic formula''\sidenotemark
\sidenotetext{
	\emph{Sketch proof.}
	$\dd$ and $ğ’– \lcontr$ are anti-derivations, so their anti-commutator is a derivation.
	Derivations agreeing on scalars and exact $1$-forms (which generate the exterior algebra) are equal.
	Indeed, $ğ’– \lcontr \dd f = ğ’–(f) = \lie_ğ’– f$ while $\dd(ğ’– \lcontr f) = 0$; and for exact $1$-forms, $ğ’– \lcontr \dd \df Ï† = 0$ while $\dd\big(ğ’– \lcontr \df Ï†) = \dd \df Ï†(ğ’–) = \lie_ğ’– \df Ï†$.
}
\begin{align}
	\label{eqn:magic-formula}
	\lie_ğ’– \df Ï† = ğ’– \lcontr \dd \df Ï† + \dd\big(ğ’– \lcontr \df Ï†)
,\end{align}
which employs the \textdef{interior derivative} or \textdef{hook product} $ğ’– \lcontr : \forms[k](V) â†’ \forms[k - 1](V)$ defined by
\begin{math}
	(ğ’– \lcontr \df Ï†)(\etc[2]{ğ’–_\i}âŠ—k) = \df Ï†(ğ’– âŠ— \etc[2]{ğ’–_\i}âŠ—k)
.\end{math}
Cartan's magic formula is the statement that the Lie derivative on forms is the anti-commutator of the exterior and interior derivatives.



\subsection{The geometric Lie bracket and derivative}

Similar to Cartan's formula \eqref{eqn:magic-formula}, the Lie derivative admits a simple form when applied to tangent multivectors, i.e., elements of the geometric algebra $\GA(\TT â„³, Î·)$.
This insight begins with the following generalisation of the vector Lie bracket $[ğ’–, ğ’—] = ğ’– âˆ˜ ğ’— - ğ’— âˆ˜ ğ’–$ to general multivectors.

\begin{definition}
	\label{def:geometric-lie-bracket}
	The \textdef{geometric Lie bracket} of two tangent multivectors $A, B âˆˆ \GA(\TT â„³, Î·)$ is
	\begin{align}
		[A, B] â‰” (A \rcontr \vd) âˆ§ B - (B \rcontr \vd) âˆ§ A
		\marginnote{
			Recall the right contraction
			\begin{math}
				\grade[p]{A} \rcontr \grade[q]{B} âˆˆ \GA[p-q]
			\end{math}
			from \cref{sec:more-graded-prods}.
		}
	,\end{align}
	where $\vd$ acts on the multivector to its immediate right.
\end{definition}
When acting on vectors, \cref{def:geometric-lie-bracket} reduces to the standard vector Lie bracket,\sidenote{
	$ğ’– \rcontr \vd = ğ’– Â· \vd = âˆ‚_ğ’–$ are scalar operators, so the wedge product is just scalar multiplication.
	Also note that $ğ’– Â· \vd ğ’— â‰¡ (ğ’– Â· \vd)ğ’—$, and not $ğ’– Â· (\vd ğ’—)$.
}
\begin{align}
	(ğ’– \rcontr \vd) âˆ§ ğ’— - (ğ’— \rcontr \vd) âˆ§ ğ’– â‰¡ ğ’– Â· \vd ğ’— - ğ’— Â· \vd ğ’– = [ğ’–, ğ’—]
,\end{align}
so the use of the same notation $[\phantom{ğ’–}, \phantom{ğ’–}]$ is appropriate.
However, \cref{def:geometric-lie-bracket} is a significant generalisation of the vector Lie bracket, applicable to multivectors of arbitrary grade.

\begin{theorem}
	\label{thm:geometric-lie-derivative}
	Let $A âˆˆ \GA(\TT â„³, Î·)$ be a multivector and $ğ’– âˆˆ \TT â„³$ a tangent vector.
	The Lie derivative of $A$ along $ğ’–$ is
	\begin{align}
		\label{eqn:geometric-lie-derivative}
		\lie_ğ’– A = [ğ’–, A]
	.\end{align}
\end{theorem}
This is a remarkably elegant result: it applies to multivectors of any kind (vectors, $k$-blades, even inhomogeneous rotors) and the Lie derivative has the same simple form.
\begin{proof}
	Since $\lie_ğ’–$ is linear, it suffices to prove the case where $A = \etc{ğ’‚_\i}âˆ§k$ is a $k$-blade.
	Because $\lie_ğ’–$ is a derivation, we must have the result that
	\begin{align}
		\label{eqn:geolieder.0}
		\lie_ğ’– (\etc{ğ’‚_\i}âˆ§k) = \sum_{i=1}^k \etcmid{ğ’‚_\i}{[ğ’–, ğ’‚_i]}âˆ§k
	\end{align}
	where $\lie_ğ’– ğ’‚_i = [ğ’–, ğ’‚_i]$ is the vector Lie bracket.
	Expanding the right-hand side of \cref{eqn:geometric-lie-derivative}, we have, by \cref{def:geometric-lie-bracket}
	\begin{align}
		[ğ’–, A] = ğ’– \fatdot \vd A - (A \rcontr \vd) âˆ§ ğ’–
	.\end{align}
	We will expand the two terms on the right-hand side.

	The first term  is
	\begin{align}
		\label{eqn:geolieder.1}
		ğ’– \fatdot \vd A = ğ’– \fatdot \vd (\etc{ğ’‚_\i}âˆ§k)
		= \sum_{i=1}^k \etcmid{ğ’‚_\i}{ğ’– \fatdot \vd ğ’‚_i}âˆ§k
	\end{align}
	since $ğ’– \fatdot \vd \equiv âˆ‚_ğ’–$ is a scalar derivation.

	The second term  is
	\begin{math}
		(A \rcontr \vd) âˆ§ ğ’–
	.\end{math}
	Recall that contraction by a vector is an anti-derivation \todo{show this}.
	Thus, for some vector $ğ’—$,
	\begin{align}
		ğ’— \lcontr A = ğ’— \lcontr (\etc{ğ’‚_\i}âˆ§k)
		= \sum_{i=1}^k (-1)^{i-1} \etcmid{ğ’‚_\i}{(ğ’— \fatdot ğ’‚_i)}âˆ§k
	.\end{align}
	Wedging this with a vector $ğ’–$ produces
	\begin{align}
		\label{eqn:geolieder.2}
		ğ’– âˆ§ (ğ’— \lcontr A)
		= \sum_{i=1}^k \etcmid{ğ’‚_\i}{(ğ’‚_i \fatdot ğ’—)ğ’–}âˆ§k
	,\end{align}
	where the factor of $(-1)^{i-1}$ is cancelled by anticommuting $ğ’–$ to the $i$th position.
	Now, note that $A$, $ğ’— \lcontr A$ and $ğ’– âˆ§ (ğ’— \lcontr A)$ are of grades $k$, $k - 1$ and $k$, respectively, allowing us to exploit reversion to obtain
	\begin{align}
		\label{eqn:geolieder.3}
		ğ’– âˆ§ (ğ’— \lcontr A)
		= \revsign{k} \, \rev{(ğ’— \lcontr A)} âˆ§ \rev{ğ’–}
		= \revsign{k} \, (\rev{A} \rcontr \rev{ğ’—}) âˆ§ ğ’–
		= (A \rcontr ğ’—) âˆ§ ğ’–
	.\end{align}
	The notation on the right-hand side lends itself better to the case where $ğ’—$ is instead the vector derivative $\vd$ acting on $ğ’–$, since $ğ’–$ is then to its immediate right.
	Thus, with \cref{eqn:geolieder.2,eqn:geolieder.3} we have shown that
	\begin{align}
		\label{eqn:geolieder.4}
		(A \rcontr \vd) âˆ§ ğ’–
		= \sum_{i=1}^k \etcmid{ğ’‚_\i}{(ğ’‚_i \fatdot \vd ğ’–)}âˆ§k
	.\end{align}
	Combining \cref{eqn:geolieder.1,eqn:geolieder.4} yields
	\begin{fullwidth}
	\begin{align}
		[ğ’–, A] =
		ğ’– \fatdot \vd A - (A \rcontr \vd) âˆ§ ğ’–
		= \sum_{i=1}^k \etcmid{ğ’‚_\i}{(ğ’– \fatdot \vd ğ’‚_i - ğ’‚_i \fatdot \vd ğ’–)}âˆ§k
	\end{align}
	\end{fullwidth}
	whose right-hand side is equal to \cref{eqn:geolieder.0}.
\end{proof}