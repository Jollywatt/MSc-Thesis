\chapter{Spacetime as a Manifold}



The investigations of \cref{part:1} were restricted to \emph{flat geometries}.
In particular, special relativity models spacetime as a homogeneous, isotropic Minkowski vector space.
However, the general theory of relativity incorporates gravity as the curvature of space itself.
Thus, spacetime no longer has an intrinsic vector space structure where the `difference between points' has physical meaning.
The mathematical demands of curvature call for the \emph{differential geometry} of manifolds.




Here we only give a pragmatic definition of a manifold as a space which locally looks like $\RR^n$ upon which one can do calculus.
(A rigorous definition in terms of charts and atlases can be found in the first chapter of \cite{lee2012diffgeo}.)
\begin{definition}
	\label{def:manifold}
	A \textdef{manifold $\manif M$ of dimension $n$} is a nice\sidenote{
		Here, a `nice' topological space is:
		\begin{enumerate}[leftmargin=1.3em]
		\item \emph{Hausdorff}, meaning each distinct pair of points have mutually disjoint neighbourhoods (so it is ``not too small''); and
		\item \emph{second-countable}, meaning there exists a countable base (so it is ``not too large'').
		\end{enumerate}
	} topological space which is locally Euclidean, meaning for every $x âˆˆ \manif M$ there exist neighbourhoods $x âˆˆ \manif U \subseteq \manif M$ and subsets $U \subseteq \RR^n$ with a homeomorphism (continuous bijection) $\manif U \biject U$ between them.

	A \textdef{smooth manifold} is a manifold with the stricter requirement that $\manif U \biject U$ be a diffeomorphism (differentiable bijection).
\end{definition}


Essentially, \cref{def:manifold} is designed to guarantee that well-behaved local coordinates (corresponding to elements of $U$) always exist.
% Spherical surfaces, closed curves and spaces such as $\SO(n)$ are smooth manifolds, but cubes 
\begin{definition}
	\label{def:coord-chart}
	Let $\manif M$ be an $n$-dimensional manifold.
	A \textdef{(global) coordinate chart $\set{x^i} â‰¡ \set{\etc{x^\i},n}$} of $â„³$ is a set of scalar fields $x^i : \manif M â†’ \RR$ such that each point in $â„³$ is specified uniquely by the coordinate values $(\etc{x^\i},n) âˆˆ \RR^n$.

	A \textdef{local coordinate chart} about a point $x âˆˆ \manif M$ is a coordinate chart of a neighbourhood of $x$.
\end{definition}
In other words, the coordinate functions $\set{x^i}$ specify a homeomorphism $â„³ â†’ \RR^n$, or a diffeomorphism in the case of a smooth chart.
We will often call a point $x âˆˆ \manif M$ by the same symbol as the local coordinates $x^i : \manif M â†’ \RR$ without the index --- but these objects are not interchangeable.

A structure-preserving map between manifolds is a continuous function; and between smooth manifolds, a differentiable function.
For brevity, we assume the definitions that follow take place in the category of manifolds, and \emph{take all maps between manifolds to be continuous.}
Furthermore, if the qualifier ``smooth'' is present, we operate in the category of smooth manifolds and such maps are assumed differentiable.
Thus, the coordinate scalars $x^i$ of \cref{def:coord-chart} are continuous functions, and are differentiable if the manifold is smooth.



\section{Derivatives of Smooth Maps}
\label{sec:differential}

Manifolds themselves do not have inherent vector space structure.
However, being locally Euclidean means there is a real vector space naturally associated to each point:
\begin{definition}
	\label{def:tangent-space-bundle}
	The \textdef{tangent space $\TT_x\manif M$} of a manifold at a point $x âˆˆ \manif M$ is the vector space of derivations on smooth functions at that point.\sidenote{
		More precisely, each vector $ğ’– âˆˆ \TT_x\manif M$ is an equivalence class of derivatives evaluated at the point $x$, where different derivations which agree at the point $x$ are identified.
	}
	In any local coordinate chart $\set{x^i}_{i=1}^n$ of $\manif M$ containing $x$, this is
	\begin{align}
		\TT_x\manif M â‰… \spanof{\eval{\pdv{x^i}}_x}_{i=1}^n
	.\end{align}
	The \textdef{tangent bundle $\TT\manif M$} is the disjoint union of all tangent spaces
	\begin{align}
		\TT\manif M = \set{(x, ğ’–) | x âˆˆ \manif M, ğ’– âˆˆ \TT_x\manif M}
	\end{align}
	equipped with an appropriate manifold topology.\sidenote{
		Specifically, the topology of a fibre bundle (see \cref{cha:fibre-bundles}).
	}
\end{definition}


Given a smooth manifold, its tangent bundle comes for free: its construction is canonical and requires no additional data.
Similarly, given a smooth function $f$ between manifolds, its derivative $\dd f$ (i.e., its `tangent') also comes for free.

In the same way that the tangent bundle consists of `directional derivatives of points' in the manifold (i.e., tangent vectors), the differential $\dd f$ encodes the derivative of $f$ at each point in all directions.\sidenote{
	This parallel is precise: $\dd$ and $\TT$ form a functor in category of smooth manifolds, sending
	\begin{math}
		f: â„³ â†’ ğ’©
	\end{math}
	to
	\begin{math}
		\dd f: \TTâ„³ â†’ \TTğ’©
	.\end{math}
	Some authors use the symbol $\TT$ for both.
}
Intuitively, if $ğ’– âˆˆ \TT_x\manif M$ is a vector at a point $x âˆˆ \manif M$, then the vector $\dd f(ğ’–) âˆˆ \TT_{f(x)}\manif N$ is interpreted as the directional derivative of $f(x) âˆˆ \manif N$ in the direction $ğ’–$.




\begin{definition}
	\label{def:differential}
	The \textdef{differential} or \textdef{push forward} of a map $f : \manif M \to \manif N$ between smooth manifolds is the map $\dd f : \TT\manif M \to \TT\manif N$ defined by
	\begin{align}
		\label{eqn:differential}
		\qty(\dd f(ğ’–))(Ï†)\big|_{f(x)} â‰” ğ’–(Ï† \circ f)\big|_x
	\end{align}
	for each point $x âˆˆ \manif M$, vector $ğ’– âˆˆ \TT_x\manif M$ and smooth function $Ï† : \manif N â†’ \RR$.
\end{definition}

In the definition above, vectors act on scalar functions as derivations; hence $\dd f(ğ’–)$ is defined by its action on an arbitrary scalar field.

Note that $\dd f(ğ’–)$ is not always defined everywhere.
If $ğ’–|_x âˆˆ \TT_x\manif M$ is now a family of vectors defined everywhere over $x âˆˆ â„³$, then $\dd f(ğ’–)|_{f(x)} = \dd f(ğ’–|_x)$ is defined only at each $f(x) âˆˆ \manif N$.
This means that if $f$ fails to be surjective, then $\dd f(ğ’–)$ is not defined at those points lying outside the image $f(\manif M) \subset \manif N$.
Likewise, if $f$ fails to be injective at a point $y âˆˆ \manif N$, then $\dd f(ğ’–)$ is \emph{multivalued} at $y$.
Only if $f$ is bijective does $\dd f(ğ’–)|_y$ have a single value everywhere.



The meaning of \cref{def:differential} may become clearer when expressed in coordinates.
Suppose $\set{x^i}$ is a local chart of $\manif M$ containing a point $x âˆˆ \manif M$, and $\set{y^j}$ a chart of $\manif N$ containing $f(x)$.
With the associated coordinate bases
\begin{math}
	\TT_x\manif M = \spanof{\pdv{x^i}}
	\text{ and }
	\TT_{f(x)}\manif N = \spanof{\pdv{y^j}}
,\end{math}
\cref{eqn:differential} takes the full form:
\begin{align}%autonum: was align*
	\qty[\dd f\qty(u^i\pdv{x^i})]^j \eval{\pdv{Ï†}{y^j}}_{f(x)} &= u^i\eval{\pdv{Ï† \circ  f}{x^i}}_x
	= u^i\eval{\pdv{y^j \circ  f}{x^i}}_x \eval{\pdv{Ï†}{y^j}}_{f(x)}
\end{align}%autonum: was align*
The first equality is the definition itself, and the second is an application of the chain rule.
Since $Ï†$ is an arbitrary smooth function, this holds as an equation of differential operators, and we may remove reference to any particular $Ï†$ on which the operators act.
\begin{align}
	\label{eqn:differntial-coordinate-form.step1}
	\qty[\dd f\qty(u^i âˆ‚_i)]^j\eval{âˆ‚_j}_{f(x)} = u^i \eval{\pdv{f^j}{x^i}}_x \eval{âˆ‚_j}_{f(x)}
\end{align}
We have reduced typographical complexity with $âˆ‚_i â‰” \pdv{x^i}$ and $âˆ‚_j â‰” \pdv{y^j}$, being aware that these are basis vectors of \emph{different} tangent spaces.
We also abbreviate $f^j â‰” y^j \circ  f$ so that $f^j(x)$ is the $j$th coordinate of the point $f(x)$ in the $y^j$ chart.
Thus, the coordinate form of $\dd f$ is precisely the Jacobian matrix,
\begin{align}
	[\dd f(âˆ‚_i)]^j = \pdv{f^j}{x^i}
.\end{align}
The point $x$ being arbitrary, we have also suppressed the evaluation signs, with the understanding that the Jacobian maps vectors at $x$ to vectors at $f(x)$.

Turning back to \cref{eqn:differntial-coordinate-form.step1}, the partial derivatives $\pdv*{x^i}$ act on smooth functions $f^j : \manif M â†’ \RR$ to produce smooth functions $\pdv*{f^j}{x^i} : \manif M â†’ \RR$.
However, since we have an intuitive picture of the directional derivative of the {point} $f(x)$ as $x$ is displaced, it is useful to formally extend the notation $\pdv*{x^i}$ so that we may write the partial derivative of a mapping of \emph{points} $f : \manif M â†’ \manif N$.
\begin{marginfigure}
	\centering
	\includefigure[0.8\columnwidth]{derivative-of-point}
	\caption{
		The derivative of the point $x âˆˆ â„³$ along the direction of increasing $x^Î¼$ is a tangent vector $âˆ‚_Î¼x âˆˆ \TT_xâ„³$.
		The vector is tangent to the dotted line, along which all coordinates but $x^Î¼$ are constant. 
	}
	\label{fig:derivative-of-point}
\end{marginfigure}
Semantically, we understand $\pdv{f}{x^i}\big|_x âˆˆ \TT_{f(x)}\manif N$ to be the infinitesimal displacement vector of the destination point $f(x) âˆˆ \manif N$ caused by an infinitesimal variation in the $i$th coordinate of the source point $x$.
This is precisely the meaning of the last term in \cref{eqn:differntial-coordinate-form.step1}, so the desired shorthand is
\begin{align}
	\label{eqn:pdv-of-map-notation}
	\pdv{f}{x^i} â‰” \pdv{f^j}{x^i}âˆ‚_j
	\qqtext{or, in full,}
	\eval{\pdv{f}{x^i}}_x â‰” \eval{\pdv{y^i \circ  f}{x^i}}_x \eval{\pdv{y^j}}_{f(x)}
.\end{align}
With this, \cref{eqn:differntial-coordinate-form.step1} may be written as
\begin{align}
	\label{eqn:differential-succinct}
	\dd f(ğ’–) = u^i\pdv{f}{x^i}
.\end{align}
This condensed form is perhaps too implicit for some purposes, with the notation $\pdv*{f}{x^i}$ doing the work of \cref{eqn:pdv-of-map-notation}.
However, it is nonetheless useful: take for instance the coordinate functions $x^i : \manif M â†’ \RR$ regarded as maps between manifolds.
Then \cref{eqn:differential-succinct} yields the defining property of the coordinate dual basis,
\begin{align}
	\dd x^i(âˆ‚_j) = \pdv{x^i}{x^j} = Î´^i_j
,\end{align}
where we have identified the one-dimensional vector space $\TT_{x^i}\RR$ with $\RR$ itself.





\begin{lemma}[Chain rule]
	\label{lem:differential-chain-rule}
	If $f\circ g$ is a composition of maps between smooth manifolds, then
	\begin{align}
		\dd (f \circ g) = \dd f \circ \dd g
	.\end{align}
\end{lemma}
\begin{proof}
	Acting on a vector $ğ’–$ and applying the forward-pushed vector to a scalar field $Ï†$, we obtain
	\begin{align}
		(\dd (f \circ g)(ğ’–))(Ï†)
		&= ğ’–(Ï† \circ f \circ g)
	\\	= ğ’–((Ï† \circ f) \circ g)
		&= (\dd g (ğ’–))(Ï† \circ f)
		= \dd f(\dd g (ğ’–))(Ï†)
	\end{align}
	by three applications of \cref{def:differential}.
\end{proof}



\section{Fibre Bundles}
\label{cha:fibre-bundles}

In flat geometries, fields were modelled as functions into a fixed vector space.
For example, in flat spacetime $â„³ = \RR^{1+3}$, the electromagnetic bivector $F : â„³ â†’ \EA[2]{\RR^4}$ makes no distinction between the vector space $\EA[2]{\RR^4}$ evaluated at one point in spacetime over another.
This would suggest that all values of a field are directly comparable, making expressions like $F(x) + F(y) âˆˆ \EA[2]{\RR^4}$ geometrically meaningful for different points $x,y âˆˆ â„³$.
However, these kinds of expressions are ill-defined for general smooth manifolds $â„³$, since they depend on the way tangent spaces are chosen.
Instead, it is beneficial to distinguish between codomains \emph{at each point in the domain}, and treat $F(x)$ and $F(y)$ as belonging to different spaces.

\begin{marginfigure}
	\centering
	\includefigure[0.8\columnwidth]{sphere}
	\caption{
		Vectors in different tangent spaces, and their basis-dependent representation as an $\RR^2$-valued field.
	}
	\label{fig:ball}
\end{marginfigure}

This can be motivated with the simple example of a fluid flowing on a sphere.
The instantaneous fluid velocity at a point is a vector lying in the sphere's tangent plane at that point.
If the fluid flow is given as a map $f : \Sphere^2 â†’ \RR^2$, then any two velocity vectors exist in the ``same'' space, even when \emph{geometrically} they do not (\cref{fig:ball}).
This is more than a purely philosophical point: the fluid flow's representation as a field $f : \Sphere^2 â†’ \RR^2$ is \emph{dependent on the choice of basis}.
That is, $f$ depends on the way in which the single codomain $\RR^2$ is identified with each tangent plane on the sphere, and there is no such canonical choice for the sphere.
We would do better with a more geometrical representation of the vector field which is independent of any choice of basis.
This requires viewing the fluid velocities at different points as existing in different spaces.

From this we construct the tangent \emph{bundle} $\TT \Sphere^2$, where all the tangent planes of $\Sphere^2$ are collected in a disjoint union forming a \emph{bulk}.
The vector field on the sphere now becomes a \emph{section} of $\TT \Sphere^2$, which is a map $f : \Sphere^2 â†’ \TT \Sphere^2$ such that $f(x)$ belongs to the tangent space rooted at $x$.
No longer is the expression $f(x) + f(y)$ well-defined.

The tangent bundle is a special case of a \emph{fibre bundle}, which is a manifold consisting of disjoint copies of a space (called the \emph{fibre}) taken at every point in a base manifold.




\begin{definition}
	\label{def:fibre-bundle}
	A \textdef{fibre bundle} $\fibrebundle[Ï€] F â„± â„³$ consists of
	\begin{itemize}
		% \item a \textdef{fibre manifold} $A$;
		\item a \textdef{bulk manifold} $â„±$;
		\item a \textdef{base manifold} $â„³$; and
		\item a surjection $Ï€ : â„± â†’ â„³$, the \textdef{projection}, such that
		\item the inverse image $F_x â‰” Ï€^{-1}(x)$ of a base point $x âˆˆ â„³$ is homeomorphic to the \textdef{fibre} $F$.
	\end{itemize}
\end{definition}

\begin{marginfigure}
	\includefigure[\columnwidth]{fibre-bundle}
	\caption{
		(a) A field $f : â„³ â†’ F$, where values at any point can be compared.
		(b) A fibre bundle $\fibrebundle F â„± â„³$ with a section $f âˆˆ \secs(â„±)$ whose individual fibres $F$ are labelled by base point in $â„³$.
	}
\end{marginfigure}

\Cref{def:fibre-bundle} takes place in the category of manifolds, so the projection $Ï€ : â„± â†’ â„³$ is continuous.
In a \textdef{smooth fibre bundle}, the projection $Ï€$ is differentiable and $F$, $â„±$ and $â„³$ are all smooth manifolds.

Many different kinds of fibre bundle may be considered by giving $F$ more structure.
For example,
\begin{itemize}
	\item a \textdef{vector bundle} is one where the fibre is a vector space;
	\item a \textdef{principle bundle} is one where the fibre is a group (usually a Lie group); and
	\item an \textdef{algebra bundle} is a vector bundle where each fibre is equipped with a (smoothly varying) algebraic product; and so on.
\end{itemize}


\subsection{Trivialisations and coordinates}

The bulk $â„±$ of a fibre bundle $\fibrebundle F â„± â„³$ is itself a manifold (of dimension $\dim â„± = \dim â„³ + \dim F$) so we may always prescribe local coordinates on $â„±$.
If we already have coordinates $\set{x^Î¼}$ on the base $â„³$ and $\set{x^a}$ on a fibre $F$, then we often want to use the same coordinates $\set{x^Î¼, x^a}$ to describe the bulk $â„±$.
This first requires a way of continuously splitting the bulk $â„± â†’ â„³ Ã— F$ into its base and fibre ``components'', in a way which respects the fibred structure of the bundle.
This splitting is known as a \emph{trivialisation} of the bundle.
\begin{definition}
	A \textdef{trivialisation} of a fibre bundle $\fibrebundle[Ï€] F â„± â„³$ is a homeomorphism $Ï† : â„± â†’ â„³ Ã— F$ such that
	\begin{math}
		\op{pr}_1 âˆ˜ Ï† = Ï€
	.\end{math}
\end{definition}
It is not always possible to find a global trivialisation of a fibre bundle, and if it is, the bundle is called a \textdef{trivial fibre bundle} and there may be different possible trivialisations.\sidenote{
	A simple non-trivial fibre bundle is the MÃ¶bius strip, viewed as a bundle over the circle $\Sphere^1$ with fibre $[0, 1]$.
	The trivial bundle $\Sphere^1 Ã— [0, 1]$ describes a strip without a twist.
}

However, it is always possible trivialise \emph{locally}.
That is, for any base point $x âˆˆ â„³$, there exists a neighbourhood $x âˆˆ U âŠ† â„³$ for which the subbundle $\fibrebundle[Ï€] F {Ï€^{-1}(U)} U$ admits a (global) trivialisation.
Hence, it is always possible to assign \emph{local} coordinates $\set{x^Î¼, x^a}$ to the bulk of a fibre bundle, where $x^Î¼$ are coordinates on the base and $x^a$ are coordinates on the fibres, such that $x^Î¼$ do not vary along the fibres.








\subsection{Sections of fibre bundles}


In the language of fibre bundles, a field $f : â„³ â†’ F$ is replaced by a \emph{section}, which is a ``vertical'' map $f : â„³ â†’ â„±$ into the bulk $â„±$ such that $f(x) âˆˆ F_x$.
\begin{definition}
	A \textdef{section} $f$ of a fibre bundle $\fibrebundle[Ï€] F â„± â„³$ is a right-inverse of $Ï€$.
	The space of sections is denoted
	\begin{align}
		\secs(â„±) = \set{f : â„³ â†’ â„± | Ï€âˆ˜f = \op{id}}
	.\end{align}
\end{definition}
(Again, sections $f âˆˆ \secs(â„±)$ are assumed continuous, and \textdef{smooth sections} are sections of smooth fibre bundles for which $f$ is smooth.)


For example, the instantaneous fluid velocity $ğ’–$ on a sphere $\Sphere^2$ is a section $ğ’– âˆˆ \secs(\TT\Sphere^2)$ of the tangent bundle, with a single vector at $x âˆˆ \Sphere^2$ is denoted $ğ’–|_x âˆˆ \TT_x\Sphere^2$.




\subsection{Exterior differential forms}

\Cref{sec:exterior-forms} defined exterior forms $\forms(V, A)$ as alternating multilinear maps from the fixed vector space $V$ into $A$.
Similarly, the differential of a map $\dd f : \TT â„³ â†’ \TT ğ’©$ is an object that takes a vector argument $ğ’– âˆˆ \TTâ„³$, like an exterior $1$-form, except that the entire tangent bundle $\TT â„³$ is not a vector space.

Exterior forms, which are alternating maps from a fixed space $\TA{V}$, can be extended to exterior \emph{differential} forms, which exist on a manifold, defining alternating maps from $\TA{(\TT_x â„³)}$ at each $x âˆˆ â„³$.

Although the entire bundle $\TT Îœ$ is not a vector space, the space of vector sections $\secs(\TT Îœ)$ is.
Hence, when viewed as a map $\dd f : \secs(\TT â„³) â†’ \secs(\TT ğ’©)$ the differential $\dd f âˆˆ \forms[1](\secs(\TT â„³), \secs(\TT ğ’©))$ is a $\secs(\TT ğ’©)$-valued exterior $1$-form in the sense of \cref{def:exterior-form}.
This mouthful may be eased by defining the notation
\begin{align}
	\forms(â„³, \manif E) â‰” \forms(\secs(\TT â„³), \secs(\manif E))
\end{align}
for some vector bundle $\fibrebundle â„³ {\manif E} V$.
As with exterior forms, the wedge product is defined as in \cref{eqn:wedge-of-forms}.

An element of $\forms[k](â„³, \manif E)$ is called an \textdef{$\manif E$-valued exterior differential $k$-form}, where `differential' distinguishes it as an object on a manifold.
Scalar-valued exterior differential forms are elements of $\forms[k](â„³) â‰” \forms[k](â„³, â„³ Ã— \RR)$, where $\fibrebundle[Ï€] â„³ {â„³ Ã— \RR} \RR$ is the trivial line bundle with projection $Ï€(x, Î») = Î»$.


We sometimes use the notation $\df Î±$ to emphasise that $Î±$ is an exterior differential form.
\toself{Not necessary for differentials $\dd f$ since is clear.}




\chapter{Connections on Fibre Bundles}

We have seen that it is more natural to describe physical fields in the language of fibre bundles rather than simply as maps into a fixed codomain.
However, with a field $f âˆˆ \secs(â„±)$ now formulated as a section of a fibre bundle, it no longer makes sense to directly compare values $f|_x$ at different points $x âˆˆ â„³$, since each value exists in its own fibre.
But the ability to compare across fibres is desirable, particularly because a notion of derivative requires comparing values across `infinitesimally neighbouring' fibres.
To accomplish this, the additional structure of a \emph{connection} on the fibre bundle is required; this then defines the \emph{covariant derivative} of a section.

A trivial example of a connection is the one associated with (the tangent bundle of) Euclidean space.
In this case, tangent vectors at a base point may be \emph{parallel transported} (i.e., translated irrotationally) to any other base point in a well-defined, path-independent way.\sidenote{
	Any tangent vectors $ğ’–_p âˆˆ \TT \RR^n â‰… \RR^n âŠ• \RR^n$ are compared by translating them to the origin (or discarding the base point) $ğ’–_p â‰¡ (p, ğ’–) â†¦ ğ’– âˆˆ \RR^n$.
}
This defines an isomorphism between every tangent space and tangent space at the origin, which is a connection on $\TT \RR^n$.

We may try to define connections on general fibre bundles in this way, by choosing an isomorphism from every fibre to a single `reference' fibre.
This is the same as choosing a trivialisation $â„± â†’ â„³ Ã— F$, which identifies every fibre with $F$ (equivalent to prescribing global coordinates on the bundle).
However, defining a connection by a trivialisation like this is a needlessly strict requirement, and is of course impossible to do globally on non-trivial bundles.

For example, the tangent bundle of the sphere $\TT \Sphere^2$ is non-trivial, so it is impossible to give a globally smooth identification of tangent spaces.\sidenote{
	To see this, consider a point on the globe.
	Given a trivialisation of $\TT \Sphere^2$, the northward vector is extended to a vector field on the sphere.
	The hairy ball theorem implies the field vanishes at some point, at which the trivialisation fails.
}
However, it is always possible to define a connection \emph{locally} on the sphere, since local trivialisations always exist.
In other words, tangent vectors on the sphere can be parallel transported over sufficiently short paths, since locally the sphere looks like the Euclidean plane.
This generalises to all smooth manifolds: To define a connection, it is only necessary to specify how values are parallel-transported in an infinitesimal manner.




\section{Connections on General Fibre Bundles}


The most general kind of smooth bundle is one where the fibres are diffeomorphic to a manifold $F$ and have no further assumed structure.
% The tangent bundle is a special kind of vector bundle, but here we start in generality.
A point $p âˆˆ â„±$ in a fibre bundle represents a value in that fibre $F_{Ï€(p)}$ which is rooted at the base point $Ï€(p) âˆˆ â„³$.
If the point $p$ is moved within its fibre, the base point remains fixed and the motion is said to be ``vertical''.
The tangent space $\TT_p F_{Ï€(p)}$ of the fibre (in isolation from the bulk) consists of those displacement vectors which define vertical motion.
\begin{definition}
	The \textdef{vertical bundle} of a smooth fibre bundle $\fibrebundle F â„± â„³$ is a smooth $(\dim F)$-dimensional tangent subbundle $\VV â„± âŠ† \TT â„±$ defined by
	\begin{align}
		\VV_p â„± = \TT_p F_p
	\end{align}
	for each point $p âˆˆ â„±$.
\end{definition}
In other words, the tangent bundles of all the fibres taken together form the vertical bundle.


\begin{marginfigure}
	\centering
	\includefigure{ehresmann-connection}
	\caption{
		Illustration of an Ehresmann connection.
	}
	\label{fig:ehresmann-connection}
\end{marginfigure}
On the other hand, a \emph{connection} specifies how the value $p âˆˆ â„±$ changes when the base point $Ï€(p) âˆˆ â„³$ moves, if $p$ is to be considered to move ``horizontally'', i.e., if $p$ is to undergo parallel transport.
\begin{definition}
	A \textdef{horizontal bundle} or \textdef{(Ehresmann) connection} $H$ on a smooth fibre bundle $\fibrebundle F â„± â„³$ is a smooth $(\dim â„³)$-dimensional tangent subbundle $H âŠ† \TT â„±$ which is complementary to the vertical bundle $V âŠ† \TT â„±$, in the sense that
	\begin{align}
		\TT_p â„± = \VV_p â„± âŠ• H_p
	\end{align}
	for each point $p âˆˆ â„±$.
\end{definition}
Note that, while the tangent bundle $\TT â„±$ and vertical bundle $\VV â„±$ are canonical constructions, the choice of a horizontal bundle $H$ is not: there may be many distinct meanings of parallel transport on a given bundle, and so many distinct horizontal bundles.



The requirement that $H$ be complimentary to $\VV â„±$ means that $H_p âˆ© \VV_p â„± = \set{\symbf 0}$ at each $p âˆˆ â„±$.
This means the restriction of $\dd Ï€ : \TT_pâ„± \biject \TT_{Ï€(p)}â„³$ to $H_p âŠ† \TT_pâ„±$ is an isomorphism.\sidenote{
	Using the fact that $\ker \dd Ï€ = \VV â„±$, implying $\ker \dd Ï€|_{H_p} = {
	\symbf 0}$.
}
It therefore has an inverse,
\begin{align}
	\label{eqn:lift-of-base-tangent-vectors}
	\dd Ï€|_{H_p}^{-1} : \TT_{Ï€(p)}â„³ \biject H_p
,\end{align}
which acts to ``lift'' tangent vectors from the base into the horizontal subbundle at $p$.
This proves to be a useful construction:
\begin{definition}
	\label{def:connection-map}
	Let $\fibrebundle[Ï€] F â„± â„³$ be a fibre bundle with an Ehresmann connection $H âŠ† \TT â„±$.
	The \textdef{horizontal lift} to the point $p âˆˆ â„±$ is the linear map
	\begin{align}
	% 	Î“(p) &: \TT_{Ï€(p)} â„³ â†’ H_p
	% \\	Î“(p) &â‰” -\dd Ï€|_{H_p}^{-1}
		Î“(p) â‰” -\dd Ï€|_{H_p}^{-1}
		: \TT_{Ï€(p)} â„³ â†’ H_p
	.\end{align}
	Also define the horizontal lift of a section $f âˆˆ â„±$ at $x âˆˆ â„³$ by
	\begin{align}
	% 	Î“ : \secs(â„±) &â†’ \forms[1](â„³, H)
		Î“(f)|_x &â‰” -\dd Ï€|_{H_{f(x)}}^{-1}
	.\end{align}
\end{definition}
\begin{marginfigure}
	\centering
	\includefigure{connection-map}
	\caption{
		The tangent vector $ğ’–$ at $x$ is lifted to the horizontal bulk vector $Î“_ğ’–(f)$ at the point $f(x)$.
	}
	\label{fig:connection-map}
\end{marginfigure}
The horizontal lift of a section $f$ is a horizontal-valued $1$-form $Î“(f) âˆˆ \forms[1](â„³, H)$, whose action on tangent vectors $ğ’–$ we may write as $Î“_ğ’–(f) â‰” Î“(f)(ğ’–)$, and similarly for a a point $p$.
	
% 	 takes sections to horizontal-valued $1$-forms defined by
% 	\begin{align}
% 		Î“_ğ’–(f)|_x â‰¡ \df Î“(f)(ğ’–)|_x â‰” -\dd Ï€|_{H_{f(x)}}^{-1}(ğ’–) âˆˆ H_{f(x)}
% 	\end{align}
% 	for a section $f âˆˆ \secs(â„±)$ and tangent section $ğ’– âˆˆ \secs(\TT â„³)$.
% Notationally, from this definition we may write both a $1$-form $Î“(f) âˆˆ \forms[1](â„³, H)$ given a fibre section $f$, and a map $Î“_ğ’– : \secs(â„±) â†’ \secs(H)$ given a tangent section $ğ’–$.

The horizontal lift is designed so that tangent vectors $ğ’–$ are `lifted' to horizontal bulk vectors $-Î“_ğ’–(f)$ located on the section $f$ (see \cref{fig:connection-map}).
`Lifted' means $-Î“_ğ’–(f)$ projects onto $ğ’–$, so that we have $-\dd Ï€ (Î“_ğ’–(f)) = ğ’–$.
The minus sign is present to later align with the convention that a plus sign is present in the covariant derivative of a vector section, e.g., `$âˆ‡_Î¼ X^a = âˆ‚_Î¼ X^a + Î“_Î¼{}^a{}_b X^b$'.




\subsection{Parallel transport}

With a connection defined on a bundle, a value in the bulk can be \textdef{parallel transported} between fibres so that the motion is everywhere horizontal with respect to the connection.

More precisely, a path $Î³ : [0, 1] â†’ â„³$ representing the motion of a value $p_0 âˆˆ â„±$ from $Î³(0) = Ï€(p_0)$ can be \textdef{lifted} to a horizontal path $p_0 : [0, 1] â†’ â„±$ in the bulk.
This path is `above' $Î³$ in the sense that $Ï€(p_Î³(Î»)) = Î³(Î»)$, and `horizontal' in the sense that $\dd p_Î³(Î») âˆˆ H_{p_Î³(Î»)}$, for all $Î» âˆˆ [0, 1]$ (see \cref{fig:lifted-path})
In other words, $p_Î³$ is a one-dimensional integral manifold of the connection $H$ restricted to the `wall' $Ï€^{-1}(Î³) âŠ‚ â„±$.

\begin{marginfigure}
	\centering
	\includefigure{lifted-path}
	\caption{
		The point $p_0$ and its parallel transport $p_Î»$ along a path $Î³$.
	}
	\label{fig:lifted-path}
\end{marginfigure}

It is useful to describe this path--lifting process as an operator mapping between fibres:
\begin{definition}
	\label{def:transport-operator}
	If $Î³ : [0, 1] â†’ â„³$ is a path, then the \textdef{transport operator} $\trans_Î³ : F_{Î³(0)} â†’ F_{Î³(1)}$ is defined by
	\begin{math}
		\trans_Î³ p = p_Î³(1)
	\end{math}
	for any point $p âˆˆ F_{Î³(0)}$ where $p_Î³ : [0, 1] â†’ â„±$ is the lifted path satisfying
	\begin{align}
		\label{eqn:transport-operator-path-conds}
		Ï€(p_Î³(Î»)) = Î³(Î»)
		\qqtext{and}
		\dd p_Î³(Î») âˆˆ H_{p_Î³(Î»)}
	\end{align}
	for all $Î» âˆˆ [0, 1]$.
\end{definition}
The transport operator is invariant under path reparametrisation, since any path $Î³'(Î») = Î³(f(Î»))$ where $f : [0, 1] â†’ [0, 1]$ is smooth also satisfies equations \ref{eqn:transport-operator-path-conds} if $Î³$ does.
Furthermore, the transport operator respects path concatenation $Î³_2 * Î³_1$ and inversion,
\begin{align}
	\trans_{Î³^{-1}} &= \trans_Î³{}^{-1}
,&	\trans_{Î³_2*Î³_1} &= \trans_{Î³_2} \circ \trans_{Î³_1}
.\end{align}
This makes the transport operator a homomorphism from the groupoid of directed paths modulo reparametrisation\sidenote{where the partially-defined group operation is path concatenation} into the groupoid of fibre isomorphisms.



Parallel transport along infinitesimally short paths can be related to the horizontal lift:
\begin{lemma}
	\label{lem:trans-ode}
	The transport operator along a path $Î³$ satisfies the ordinary differential equation
	\begin{align}
		\label{eqn:trans-ode}
		\dv{Î»} \trans_{Î³(Î» â† 0)} = -Î“_{\vb{\dot Î³}(Î»)} \circ \!\trans_{Î³(Î» â† 0)}
	,\end{align}
	where $Î³(Î» â† 0)$ denotes the sub-path of $Î³$ from $Î³(0)$ to $Î³(Î»)$.
\end{lemma}
\begin{proof}
	If $p âˆˆ F_{Î³(0)}$ then we have
	\begin{math}
		\trans_{Î³(Î» â† 0)} p = p_Î³(Î»)
	\end{math}
	where $p_Î³$ is the lift of $Î³$ through $p$, satisfying the conditions in \cref{def:transport-operator}.
	Differentiating with respect to $Î»$,
	\begin{align}
		\label{eqn:trans-ode-working.1}
		\dv{Î»} \trans_{Î³(Î» â† 0)} p = \dd p_Î³(Î») âˆˆ H_{p_Î³(Î»)}
	,\end{align}
	which is the horizontal by \cref{eqn:transport-operator-path-conds}.
	Additionally, from $Ï€ \circ p_Î³ = Î³$ we have $\dd Ï€ \circ \dd p_Î³ = \dd Î³$.
	Thus, we see that $\dd p_Î³(Î»)$ is horizontal lift of $\dd Î³(Î»)$ to the point $p_Î³(Î»)$,
	\begin{align}
		\label{eqn:trans-ode-working.2}
		\dd p_Î³(Î»)
		= \dd Ï€|_{H_{p_Î³(Î»)}}^{-1}(\dd Î³(Î»))
		= -Î“_{\vb{\dot Î³}(Î»)}(p_Î³(Î»))
	.\end{align}
	Finally, since
	\begin{math}
		p_Î³(Î») = \trans_{Î³(Î» â† 0)} p
	\end{math},
	combining \cref{eqn:trans-ode-working.1,eqn:trans-ode-working.2} we have the result.
\end{proof}

\todo{Show how $Î“$ is a $\liealg{gl}(\manif E)$-valued $1$-form}

For a linear bundle (introduced in \cref{sec:vector-bundles}) the composition in \cref{eqn:trans-ode} is just matrix multiplication, and the resulting linear differential equation can be solved explicitly.

Evaluating \cref{lem:trans-ode} at $Î» = 0$ yields the following useful result.
\begin{corollary}
	\label{lem:dtrans-is-hlift}
	Let $Î³ : [0, 1] â†’ â„³$ be a path and let $p âˆˆ â„±_{Î³(0)}$.
	\begin{align}
		\dv{Î»} \trans_{Î³(Î» â† 0)} p \, \bigg|_{Î» = 0} = -Î“_{\vb{\dot Î³}(0)}(p)
	\end{align}
\end{corollary}

\subsection{Covariant differentiation}

We have seen that a choice of connection $H âŠ‚ \TT â„±$ determines which tangent vectors in the bulk of a bundle are horizontal.
This in turn defines the coordinate-independent \textdef{covaraint derivative} as the rate of change of a section with respect to the connection's horizontal.

To decompose vectors into horizontal and vertical components according to $H$, we employ the \textdef{projection} and \textdef{rejection} maps
\begin{align}
	\label{eqn:proj-rej}
	\op{proj}_{H_p} : \TT_p â„± â†’ H_p
	\qqtext{and}
	\op{rej}_{H_p} : \TT_p â„± â†’ \VV_p â„±
\end{align}
defined by $\op{proj}_{H_p} ğ’– + \op{rej}_{H_p} ğ’– = ğ’– âˆˆ \TT_p â„±$ and idempotence.


% We expect a submanifold $f$ of $â„±$ (e.g., a curve or section) to have vanishing covariant derivative if the tangent space is horizontal (i.e., $\dd f$ everywhere lies in $H$).
% In other words, $f$ is covariantly constant if it is an integral manifold of the connection $H âŠ† \TT â„±$.
% The covariant derivative then measures the failure of $f$ to be covariantly constant; i.e., the rate of change in $f$ relative to the connection's horizontal.

\begin{definition}
	\label{def:covariant-derivative-on-fibre-bundle}
	% The \textdef{covariant derivative} $\df âˆ‡f : \TT_x â„³ â†’ \VV_{f(x)} â„±$ of a section $f âˆˆ \secs(â„±)$ is defined by
	The \textdef{covariant derivative} $\df âˆ‡f âˆˆ \forms[1](â„³, \VV â„±) $ of a section $f âˆˆ \secs(â„±)$ is defined by
	\begin{align}
		% âˆ‡f &: \TT_p â„³ â†’ \VV_{f(p)} â„±
		\label{eqn:covder}
		\df âˆ‡f &= \op{rej}_H{} âˆ˜ \dd f
	.\end{align}
\end{definition}
\Cref{eqn:covder} is a vertical-valued $1$-form, i.e., a linear map
\begin{math}
	\df âˆ‡f|_x : \TT_x â„³ â†’ \VV_{f(x)} â„±
\end{math}
defined at each $x âˆˆ â„³$.
Acting on a vector $ğ’– âˆˆ \TT_x â„³$, this reads
\begin{align}
	âˆ‡_ğ’–f â‰” \df âˆ‡f(ğ’–) = \op{rej}_{H_{f(x)}} \dd f(ğ’–) âˆˆ \VV_{f(x)} â„±
.\end{align}
This can be interpreted intuitively as follows.
The true gradient vector $\dd f(ğ’–) âˆˆ \TT_{f(x)}â„±$ of the section $f$ lies outside the fibre's tangent space $\VV_{f(x)}â„± âŠ† \TT_{f(x)}â„±$.
However, we do not want to measure horizontal motion --- just the \emph{effective} vertical change of $f(x)$ within the fibre induced by moving $x$ in the direction of $ğ’–$.
Thus, the covariant derivative $âˆ‡_ğ’–f âˆˆ \VV_{f(x)}â„±$ is the vertical projection of $\dd f(ğ’–)$ obtained by discarding its horizontal component, where `horizontal' is of course specified by the connection  (see \cref{fig:covariant-derivative}).


\begin{marginfigure}
	\includefigure{covariant-derivative}
	\caption{
		Covariant derivative of $f$ at $x âˆˆ â„³$ along $ğ’– âˆˆ \TT_x â„³$.
		The vector $-Î“_f(ğ’–) = \dd Ï€|_{H_{f(x)}}^{-1}(ğ’–)$ indicates horizontal motion under the connection $H$, and $âˆ‡_ğ’–f$ is the derivative relative to this horizontal.
	}
	\label{fig:covariant-derivative}
\end{marginfigure}

\begin{lemma}
	\label{lem:covariant-derivative-rewritten}
	The covariant derivative as in \cref{def:covariant-derivative-on-fibre-bundle} is equivalent to
	\begin{align}
		âˆ‡_ğ’– f = \dd f(ğ’–) + Î“_ğ’–(f) 
	,\end{align}
	where $\dd f$ is the push-forward of $f âˆˆ \secs(â„±)$ and $Î“$ is the horizontal lift as in \cref{def:connection-map}.
\end{lemma}

\begin{proof}
	By the defining property of the projection and rejection \eqref{eqn:proj-rej},
	\begin{align}
		\dd f = \op{rej}_H{} âˆ˜ \dd f + \op{proj}_H{} âˆ˜ \dd f
	\end{align}
	since $\dd f : \TT â„³ â†’ \TT â„±$ is linear.
	Therefore, rewriting \cref{def:covariant-derivative-on-fibre-bundle},
	\begin{align}
		\df âˆ‡f = \op{rej}_H{} âˆ˜ \dd f
			= \dd f - \op{proj}_H{} âˆ˜ \dd f
	.\end{align}
	Using \cref{eqn:lift-of-base-tangent-vectors}, the projection operator at $p âˆˆ â„±$ can be written as
	\begin{align}
		\op{proj}_{H_p} = \dd Ï€|_{H_p}^{-1} âˆ˜ \dd Ï€
	.\end{align}
	Finally, because $f$ is a section, $Ï€ âˆ˜ f = \op{id}$ and so
	\begin{math}
		\dd Ï€ âˆ˜ \dd f = \op{id}
	\end{math}
	by the chain rule (\cref{lem:differential-chain-rule}).
	Thus, acting on a base vector $ğ’– âˆˆ \TT_x â„³$,
	\begin{align}
		âˆ‡_ğ’–f
			&= \dd f(ğ’–) - \dd Ï€|_{H_{f(x)}}^{-1} âˆ˜ \dd Ï€ âˆ˜ \dd f (ğ’–)
		\\	&= \dd f(ğ’–) - \dd Ï€|_{H_{f(x)}}^{-1} (ğ’–)
	,\end{align}
	which by \cref{def:connection-map} gives the result.
\end{proof}









\subsubsection{Coordinate representation}

At this point, we may introduce a component form of the horizontal lift and covariant derivative for a general fibre bundle.
Suppose there is a local trivialisation where $\set{x^Î¼}$ are local coordinates on $â„³$ and $\set{x^a}$ local coordinates of the fibres.
Let capital Latin indices $\set{x^A} = \set{x^Î¼, x^a}$ run over all coordinates so that $p âˆˆ â„±$ has coordinates $(p^A) = (x^Î¼, x^a)$.
Vertical motion fixes $Ï€(p)$ leaving the base coordinates $x^Î¼$ unchanged --- but the fibre coordinates $x^a$ are \emph{not} required to be constant under horizontal motion.

% The covariant derivative in \cref{lem:covariant-derivative-rewritten} acting on a section $f : â„³ â†’ â„±$ in the direction $ğ’– âˆˆ \TT_x â„³$ has the full form
% \begin{align}
% 	âˆ‡_ğ’–f = \dd f(ğ’–) + Î“_f(ğ’–)
% .\end{align}
% The connection map $Î“_f : \TTâ„³ â†’ H âŠ† \TT â„±$ is linear, so it is a $\TT â„±$-valued $1$-form which we may write as a bitensor (i.e., matrix--valued) section $Î“_f : â„³ â†’ \TT^*â„³ âŠ— \TT â„±$.
% Without reference to $f$, we have $Î“ : â„± â†’ \TT^*â„³ âŠ— \TT â„±$ with $Î“_f(x) â‰¡ Î“(f(x))$.
% % The horizontal projection $\dd Ï€|_{H_{f(x)}}^{-1} : \TT_xâ„³ â†’ H_{f(x)} âŠ† \TT â„±$ is a linear operator at each point in $â„±$, so we may write it as a $\TT â„±$-valued $1$-form.
Denote the associated coordinate basis of $\TT â„±$ by $(\âˆ‚_A) = (\âˆ‚_Î¼, \âˆ‚_a)$.
Recall that $Î“(f) âˆˆ \forms[1](â„³, H)$ is a $1$-form, and hence is linear in its tangent vector argument $ğ’– âˆˆ \secs(\TT â„³)$.
Thus, we define the components
\begin{align}
	\label{eqn:covariant-derivative-coords.1}
	Î“_Î¼ â‰” Î“_{\âˆ‚_Î¼}
\end{align}
so that
\begin{math}
	Î“_ğ’–(f) = u^Î¼ Î“_Î¼(f)
.\end{math}
Since $Î“_ğ’–(f)|_x âˆˆ H_{f(x)}$ is a horizontal vector, we may also define the $2$-component form $Î“_Î¼{}^A$ by
\begin{align}
	Î“_Î¼(f) = Î“_Î¼{}^A(f) \, \âˆ‚_A
.\end{align}
Note that horizontal vectors have both fibre \emph{and} base components,
\begin{align}
	Î“_Î¼{}^A \, \âˆ‚_A = Î“_Î¼{}^Î½ \, \âˆ‚_Î½ + Î“_Î¼{}^a \, \âˆ‚_a
.\end{align}
Indeed, this includes the push-forward $\dd f$,
\begin{align}
	\dd f = \dd f^Î¼ \, \âˆ‚_Î¼ + \dd f^a \, \âˆ‚_a
\end{align}
since $\dd f$ is not vertical (refer back to \cref{fig:covariant-derivative}).
This is why the covariant derivative is needed!
However, since $âˆ‡_Î¼ f âˆˆ \VV â„±$ \emph{is} vertical, the base components $Î“_Î¼{}^Î½$ and $\dd f^Î½$ must cancel out.

This is verified by noting that
\begin{align}
	\label{eqn:covariant-derivative-coords.2}
	\dd Ï€ (\dd f (ğ’–)) = ğ’–
	\qqtext{and}
	\dd Ï€(-Î“_{f(x)}(ğ’–)) â‰¡ \dd Ï€ (\dd Ï€|_{H_{f(x)}}^{-1}(ğ’–)) = ğ’–
\end{align}
are equal.
In effect, $\dd Ï€$ projects onto components of the base,
\begin{math}
	\dd Ï€(X^A \âˆ‚_A) = X^Î½ \âˆ‚_Î½
,\end{math}
and so \cref{eqn:covariant-derivative-coords.2} implies $\dd f^Î½(ğ’–) = -u^Î¼Î“_Î¼{}^Î½$.
Therefore, in components, the covariant derivative of a section is
\begin{align}
	\label{eqn:covder-comps-general-bundle}
	âˆ‡_Î¼ f^a = âˆ‚_Î¼ f^a + Î“_Î¼{}^a(f)
,\end{align}
with base components of $\dd f(ğ’–)$ and $Î“_ğ’–(f)$ suppressed.\sidenote{
	In practice, one usually works with a (local) trivialisation in which $f : â„³ â†’ F$ is given as a field.
	Then, $\dd f = \dd f^a \, \âˆ‚_a$ has no base components anyway, so we take $Î“_Î¼(f) = Î“_Î¼{}^a(f) \, \âˆ‚_a$.
}
Note that $f$ need not be a vector section of a linear bundle --- \cref{eqn:covder-comps-general-bundle} is general to smooth fibre bundles.


\subsection{Structured connections}
\label{sec:vector-bundles}

So far, we have treated connections in the setting of a general fibre bundle, in which fibres have the minimal structure of a smooth manifold.
We now consider connections and their associated covariant derivatives on vector bundles with more or less structure, such as metrics or bilinear products.

\subsubsection{Vector bundles}

In general, the transport operator over a path is an invertible map between the start and end fibres.
For a vector bundle, we require this to be a \emph{linear} map.
By \cref{lem:trans-ode}, this means the horizontal lift is also linear in its fibre argument,
\begin{math}
	\df Î“(Î»X) = Î» \df Î“(X)
,\end{math}
so we may regard $Î“_ğ’–$ as a matrix and $\df Î“$ as a matrix-valued $1$-form, acting on vectors $X$ by matrix multiplication,
\begin{math}
	\df Î“ X â‰” \df Î“(X)
.\end{math}

If $\set{\ve_a}$ is a basis for some vector bundle $\fibrebundle V ğ’± â„³$, then we may introduce the $3$-component \textdef{connection coefficients},
\begin{align}
	Î“_Î¼{}^a{}_b â‰” Î“_Î¼{}^a \ve_b
.\end{align}
We may write expressions in both basis-free and component forms; 
\begin{align}
	Î“_ğ’– X = u^Î¼ \, Î“_Î¼{}^a{}_b \, X^b \, \ve_a
.\end{align}

Linearity also allows the covariant derivative to be expressed as the limit of a difference, similar to the usual analytical definition of the derivative of a real function.
\begin{lemma}
	\label{lem:trans-and-covariant-der}
	If $Î³ : [0, 1] â†’ â„³$ is a path and $X âˆˆ \secs_Î³(ğ’±)$ is a smooth vector section defined on $Î³$, then
	\begin{align}
		âˆ‡_{\vb{\dot Î³}(0)} X|_{Î³(0)}
		&= \lim_{Îµ â†’ 0} \frac{X|_{Î³(Îµ)} - \trans_{Î³(Îµ â† 0)}X|_{Î³(0)}}{Îµ}
	\\	&= \dv{Î»}\eval{\qty(X|_{Î³(Î»)} - \trans_{Î³(Î» â† 0)}X|_{Î³(0)})}_{Î»=0}
	.\end{align}
\end{lemma}
\begin{proof}
	Using \cref{lem:dtrans-is-hlift}, the right-hand side is equal to
	\begin{align}
		\dd X(\vb{\dot Î³}(0)) + Î“_{\vb{\dot Î³}(0)}X
	,\end{align}
	which by \cref{lem:covariant-derivative-rewritten} is equal to $âˆ‡_{\vb{\dot Î³}(0)} X|_{Î³(0)}$.
\end{proof}



\subsubsection{Metric compatibility}

A linear connection on a vector bundle $\fibrebundle V ğ’± â„³$ is called \textdef{metric compatible} if for any vectors $X, Y âˆˆ ğ’±$,
\begin{align}
	\ip{\trans X, \trans Y} = \ip{X, Y}
\end{align}
where the transport operators are over some common path. 
\begin{lemma}
	A metric compatible connection satisfies
	\begin{align}
		\ip{\df Î“ X, Y} = -\ip{X, \df Î“ Y}
		\qqtext{or}
		Î“_{Î¼ab} = -Î“_{Î¼ba}
	\end{align}
	where $Î“_{Î¼ab} = Î·_{ac}Î“_Î¼{}^c{}_b$.
\end{lemma}
\begin{proof}
	Consider transport along a path $Î³(Î» â† 0)$, and abbreviate $T_Î» â‰” \trans_{Î³(Î» â† 0)}$.
	Since $\ip{T_Î» X, T_Î» Y} = \ip{X, Y}$ is constant with respect to $Î»$, its $Î»$-derivative vanishes.
	But we also have
	\begin{align}
		0 = \dv{Î»} \ip{T_Î» X, T_Î» Y} \bigg|_{Î» = 0}
		% &= \dv{Î»} \ip{X, Y} \bigg|_{Î» = 0} = 0
		&= \ip{\dv{Î»} T_Î» X \, \big|_{Î» = 0}, Y} + \ip{X, \dv{Î»} T_Î» Y \, \big|_{Î» = 0}}
	\\	&= -\ip{Î“_{\vb{\dot Î³}(0)}X, Y} - \ip{X, Î“_{\vb{\dot Î³}(0)}Y}
	.\end{align}
	Since $Î³$ is arbitrary, we have
	\begin{math}
		\ip{Î“_ğ’– X, Y} + \ip{X, Î“_ğ’– Y} = 0
	\end{math}
	for all $ğ’– âˆˆ \TT â„³$.

	Writing this in component form,
	\begin{align}
		Î·_{ab} \, Î“_Î¼{}^a{}_c \, X^c \, Y^b
		= -Î·_{ab} \, X^a \, Î“_Î¼{}^b{}_c \, Y^c
	\end{align}
	which implies
	\begin{math}
		Î·_{ab} \, Î“_Î¼{}^a{}_c
		= -Î·_{ab} \, Î“_Î¼{}^b{}_c
	\end{math}
	since $X$ and $Y$ are arbitrary.
\end{proof}



\subsubsection{Algebra bundles}

Vector bundles may be further equipped with an associative product, forming an algebra bundle.
We require the product $âŠ› : V_x Ã— V_x â†’ V_x$ to vary smoothy with $x âˆˆ â„³$, so that $X âŠ› Y âˆˆ \secs(ğ’±)$ is a smooth section whenever $X$ and $Y$ are.
Requiring the transport operator to respect this product means enforcing
\begin{align}
	\label{eqn:trans-respect-prod}
	(\trans X) âŠ› (\trans Y) = \trans (X âŠ› Y)
,\end{align}
which places further constraints on the connection.
\begin{lemma}
	\label{lem:covder-prod}
	Let $âŠ›$ be a bilinear associative product on a vector bundle $ğ’±$ which is respected by parallel transport as in \cref{eqn:trans-respect-prod}.
	Then,
	\begin{align}
		\label{eqn:covder-prod}
		\df âˆ‡ (\etc{X_\i}âŠ›k) = \df\dd (\etc{X_\i}âŠ›k) + \sum_{i=1}^k \etcmid{X_\i}{\df Î“ X_i}âŠ›k
	\end{align}
	for $X_i âˆˆ \secs(ğ’±)$.
\end{lemma}
\begin{proof}
	Let $T_Î» â‰” \trans_{Î³(Î» â† 0)}$ for some path $Î³$.
	Using \cref{lem:trans-and-covariant-der}, we have
	\begin{fullwidth}
	\begin{align}
		âˆ‡_{\vb{\dot Î³}(0)} (\etc{X_\i}âŠ›k) = \df\dd(\etc{X_\i}âŠ›k)(\vb{\dot Î³}(0)) - \dv{Î»} \trans_{Î³(Î» â† 0)}(\etc{X_\i}âŠ›k) \bigg|_{Î» = 0}
	.\end{align}
	\end{fullwidth}
	Since $âŠ›$ is respected by parallel transport and is bilinear and associative, the rightmost term is
	\begin{align}
		-\dv{Î»} \etc{T_Î» X_i}âŠ›k \, \bigg|_{Î»=0} = -\sum_{i=1}^k \etcmid{X_\i}{\dv{Î»} T_Î» X_i \big|_{Î»=0}}âŠ›k
	,\end{align}
	which by \cref{lem:dtrans-is-hlift} gives the result, removing reverence to the arbitrary vector $\vb{\dot Î³}(0)$.
\end{proof}

\todo{Show $\df âˆ‡$ is derivation.}
A consequence of \cref{lem:covder-prod} is that a linear connection on a vector bundle $ğ’±$ induces a unique $âŠ›$-respecting connection on the algebra bundle generated by $âŠ›$.
In particular, such a connection obeys the product rule:
\begin{align}
	\df âˆ‡(X âŠ› Y)
	&= \df\dd X âŠ› Y + X âŠ› \df\dd Y + \df Î“ X âŠ› Y + X âŠ› \df Î“ Y
\\	&= \df âˆ‡ X âŠ› Y + X âŠ› \df âˆ‡ Y
\end{align}
For example, for the tensor bundle $\TA{ğ’±}$, we obtain the product rule written in component form,
\begin{align}
	\label{eqn:covder-tensor-prod}
	âˆ‡_Î¼ X^a Y^b = âˆ‚_Î¼(X^a Y^b) + Î“_Î¼{}^a{}_c X^c Y^b + X^a Î“_Î¼{}^b{}_c Y^c
,\end{align}
and if the connection is also compatible with a metric used to raise and lower indices, we derive the familiar formula for covariant differentiation of general type-$(p, q)$ tensors,{}
% \begin{samepage}
\begin{fullwidth}
\begin{align}
	\label{eqn:covder-general-tensor}
	âˆ‡_Î¼T^{a_1\cdots a_p}{}_{b_1\cdots b_q}
	= âˆ‚_Î¼T^{a_1\cdots a_p}{}_{b_1\cdots b_q}
	+ \sum_{i = 1}^p Î“_Î¼{}^{a_i}{}_c T^{a_1\cdots c\cdots a_p}{}_{b_1\cdots b_q}
	- \sum_{j = 1}^q Î“_Î¼{}^c{}_{b_j} T^{a_1\cdots a_p}{}_{b_1\cdots c\cdots b_q}
.\end{align}
\end{fullwidth}
% \end{samepage}
% Note that \cref{eqn:covder-general-tensor} is written only in terms of the connection coefficients $Î“_Î¼{}^a{}_b$ on $ğ’±$.



\section{Covariant Algebraic Derivatives}


The covariant derivative $âˆ‡_ğ’–$ is analogous to the directional derivative $âˆ‚_ğ’–$ of \cref{sec:algder}, but defined for sections on a manifold $F âˆˆ \secs(ğ’œ)$ instead of fields on a vector space $F : V â†’ A$.
In identical vein to \cref{def:algder}, it is useful to define a `total' derivative operator $ğ’Ÿ$ which is independent of a direction $ğ’– âˆˆ \TT â„³$.
Like the algebraic derivative $\DD$ of \cref{sec:algder}, $ğ’Ÿ$ is defined whenever an inclusion $Î¹ : \TT^*â„³ â†’ ğ’œ$ is given (but usually left implicit) enabling tangent vectors to be multiplied by elements in the algebra.

\begin{definition}
	\label{def:covalgder}
	Let $\fibrebundle A ğ’œ â„³$ be an algebra bundle with product $âŠ›$ and connection $\df âˆ‡$, equipped with an inclusion $Î¹ : \TT^*â„³ â†’ ğ’œ$.
	The \textdef{covariant algebraic derivative} of a section $F âˆˆ \secs(ğ’œ)$ is
	\begin{align}
		ğ’Ÿ F â‰” Î¹(\ve^a) âŠ› âˆ‡_{\ve_a} F
	\end{align}
	(summation on $a$) where $\set{\ve_a} âŠ‚ \secs(\TT â„³)$ and $\set{\ve^a} âŠ‚ \secs(\TT^* â„³)$ are dual bases of tangent sections.
\end{definition}


\subsection{Covariant vector derivative}

The geometric algebra $\GA(V, Î·)$ may be defined on a manifold by taking $V$ to be the vector space of tangent sections $\secs(\TT â„³)$.
Write $\GA(â„³, Î·)$ as shorthand for $\GA(\secs(\TT â„³), Î·)$ to indicate this construction.

On a geometric algebra bundle $\GA(â„³, Î·)$, \cref{def:covalgder} is the \textdef{covariant vector derivative} $\VD$ and has similar properties to the vector derivative $\vd$ on $\GA(V, Î·)$.
Given a basis $\set{\ve^a}$ (regarded as both a basis for $\secs(\TT^* â„³)$ and $\GA[1](â„³, Î·)$), the covariant vector derivative written as an operator
\begin{align}
	\VD = \ve^a âˆ‡_a
\end{align}
shares the algebraic properties of a grade-$1$ vector.\sidenote{Hence it is given a bold symbol, like $\vd$.}
In particular, for a $k$-vector section $F âˆˆ \GA[k](â„³, Î·)$, there is a decomposition into $(k Â± 1)$-grade parts,
\begin{align}
	\VD F = \VD \lcontr F + \VD âˆ§ F
.\end{align}

\begin{align}
	\VD \ve_a
	&= \ve^b âˆ‡_b \ve_a
	= Î“_b{}^c{}_a \ve^b \ve_c
\end{align}

Consider the covariant vector derivative of a vector $ğ‘¿ âˆˆ \GA[1](â„³, Î·)$,
\begin{align}
	\VD ğ‘¿ = \ve^a (âˆ‚_a X^b + Î“_a{}^b{}_c X^c) \ve_b
.\end{align}
Rewrite the non-derivative term as
\begin{align}
	Î“_a{}^b{}_c \, \ve^a \ve_b X^c
	&= Î“_{abc} \, \ve^a \ve^b (\ve^c \fatdot ğ‘¿)
% \\	&= \frac12 Î“_{abc} \, \ve^a (\ve^b (\ve^c \fatdot ğ‘¿) - \ve^c (\ve^b \fatdot ğ‘¿))
\\	&= \frac12 Î“_{abc} \, \ve^a (\ve^b (\ve^c \fatdot ğ‘¿) - (\ve^b \fatdot ğ‘¿) \ve^c )
\end{align}
using the fact that $Î“_{abc} = -Î“_{acb}$ for a metric compatible connection, and that $\ve^b \fatdot ğ‘¿$ is a scalar commuting with $\ve^c$.
Then, since for vectors the inner product is $ğ‘¿ \fatdot ğ’€ = \frac12(ğ‘¿ğ’€ + ğ’€ğ‘¿)$, this is
\begin{align}
	\frac14 Î“_{abc} \, \ve^a (\ve^b \ve^c ğ‘¿ + \ve^b ğ‘¿ \ve^c - \ve^c ğ‘¿ \ve^b - ğ‘¿ \ve^c \ve^b)
	&= \frac12 Î“_{abc} \, \ve^a (\ve^b \ve^c ğ‘¿ - ğ‘¿ \ve^b \ve^c)
.\end{align}
In the right-hand side, the scalar parts from the products between $\ve^b$ and $\ve^c$ cancel, leaving a commutator product of the bivector $\ve^b âˆ§ \ve^c$ with $ğ‘¿$,
\begin{align}
	Î“_{abc} \, \ve^a \qty( (\ve^b âˆ§ \ve^c) Ã— ğ‘¿) = \ve^a (Ï‰_a Ã— ğ‘¿)
,\end{align}
where we define the \textdef{connection bivectors} in the basis $\set{\ve_a}$ by
\begin{align}
	\label{eqn:connection-bivectors}
	Ï‰_a â‰” Î“_{abc} \, \ve^b âˆ§ \ve^c
.\end{align}
Thus, we may write the covariant derivative of $ğ‘¿$ as
\begin{align}
	\label{eqn:covder-connection-bivectors}
	âˆ‡_a ğ‘¿ = âˆ‚_a ğ‘¿ + Ï‰_a Ã— ğ‘¿
.\end{align}

The connection bivectors are especially useful for writing covariant expressions in the geometric algebra, because the form of \cref{eqn:covder-connection-bivectors} is in fact general to all multivectors --- in sharp contrast to, e.g., \cref{eqn:covder-tensor-prod,eqn:covder-general-tensor} in terms of connection coefficients.
For sake of basis-independent notation, we may define the \textdef{connection bivector $1$-form} $\df Ï‰$ by
\begin{align}
	\df Ï‰(ğ’–) â‰¡ Ï‰_ğ’– â‰” u^a Ï‰_a
\end{align}
expressed in any basis.

\begin{lemma}
	\label{lem:covder-multivector}
	The covariant derivative of any multivector $A âˆˆ \GA(â„³, Î·)$ is
	\begin{align}
		\df âˆ‡ A = \df\dd A + \df Ï‰ Ã— A
	.\end{align}
\end{lemma}
\begin{proof}
	The covariant derivative is a derivation if the connection respects the geometric product.
	Therefore, the covariant derivative of a product of $k$-many vectors is
	\begin{align}
		\df âˆ‡(\etc{ğ’–_\i}{}k)
		% &= \sum_{i=1}^k \etcmid{ğ’–_\i}{(\df âˆ‡ ğ’–_i)}{}k
		&= \sum_{i=1}^k \etcmid{ğ’–_\i}{(\df\dd ğ’–_i + \df Ï‰ Ã— ğ’–_i)}{}k
	% \\	&= \df\dd(\etc{ğ’–_\i}{}k) + \sum_{i=1}^k \etcmid{ğ’–_\i}{(\df Ï‰ Ã— ğ’–_i)}{}k
	\\	&= \df\dd(\etc{ğ’–_\i}{}k) + \df Ï‰ Ã— (\etc{ğ’–_\i}{}k)
	,\end{align}
	using \cref{eqn:covder-connection-bivectors} and the fact that commutation by a bivector is a derivation (\cref{lem:commutator-derivation}).
	Since all multivectors are linear combinations of products of vectors, the general result follows.
\end{proof}


A rapid alternative derivation of \cref{lem:covder-multivector} starts from the observation that parallel transport along a path may be written as
\begin{align}
	\trans_Î³ A = R A \rev{R}
,\end{align}
since any transformation continuously connected to the identity which preserves the geometric product belongs to the rotor group, $\op{Spin}^+$ (see \cref{sec:rotors}).
Any such rotor is of the form $R = e^{Ïƒ/2}$ for a bivector $Ïƒ$, so we have
\begin{align}
	\dv{Î»} \trans_{Î³(Î» â† 0)} A = \frac12 R (Ïƒ A - A Ïƒ) \rev{R}
\end{align}
where $Ïƒ = Ïƒ(Î»)$ and hence $R$ are functions of the path parameter.
At $Î» = 0$, the rotor is trivial, so by \cref{lem:dtrans-is-hlift} we find
\begin{align}
	\dv{Î»} \trans_{Î³(Î» â† 0)} A \, \bigg|_{Î»=0} = -Î“_{\vb{\dot Î³}(0)}(A) = Ïƒ(0) Ã— A
.\end{align}
Thus, the horizontal lift is given by commutation with a specified bivector.
Since this holds for arbitrary multivectors $A$, by \cref{lem:covariant-derivative-rewritten} we have the universally applicable formula for the covariant derivative of a multivector
\begin{align}
	âˆ‡_ğ’– A = âˆ‚_ğ’– A + Ï‰_ğ’– Ã— A
\end{align}
where $Ï‰_ğ’–$ is the required bivector.